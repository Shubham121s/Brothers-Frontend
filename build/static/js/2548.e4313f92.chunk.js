"use strict";(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[2548],{22548:(t,e,a)=>{a.r(e),a.d(e,{default:()=>N});var o=a(65043),d=a(79456),l=a(73216),i=a(80907),n=a(90642),s=a(99149),r=a(67600),u=a(95895);const c=(0,i.zD)("po/details/data/details",async t=>{try{return await(0,r.XU)(t)}catch(e){return e.response}}),p=(0,i.zD)("edit/po/data/customer/all",async()=>{try{return await(0,n.ZS)()}catch(t){return null===t||void 0===t?void 0:t.response}}),g=(0,i.zD)("edit/po/data/product/all",async()=>{try{return await(0,s.qT)()}catch(t){return null===t||void 0===t?void 0:t.response}}),v=(0,i.zD)("edit/po/data/po/update",async t=>{try{return await(0,r.RV)(t)}catch(e){return null===e||void 0===e?void 0:e.response}}),y=(0,i.zD)("edit/po/data/notes/all",async()=>{try{return await(0,u.p5)()}catch(t){return null===t||void 0===t?void 0:t.response}}),m=(0,i.zD)("edit/po/data/condition/all",async t=>{try{return await(0,u.jM)(t)}catch(e){return null===e||void 0===e?void 0:e.response}}),h=(0,i.Z0)({name:"edit/po/data",initialState:{loading:{getAllCustomers:!1,getUniquePoNumber:!1,getAllProductsWithDrawing:!1,getAllNotes:!1,getAllCondition:!1,getPoDetailsByPoId:!1},customers:[],products:[],poDetails:{}},extraReducers:{[c.pending]:t=>{t.loading.getPoDetailsByPoId=!0},[p.pending]:t=>{t.loading.getAllCustomers=!0},[g.pending]:t=>{t.loading.getAllProductsWithDrawing=!0},[y.pending]:t=>{t.loading.getAllNotes=!0},[m.pending]:t=>{t.loading.getAllCondition=!0},[c.fulfilled]:(t,e)=>{t.loading.getPoDetailsByPoId=!1,t.poDetails={...e.payload.data.data,PoLists:e.payload.data.data.PoLists.map(t=>({...t,revision_number:t.Drawing.revision_number}))}},[p.fulfilled]:(t,e)=>{var a;t.loading.getAllCustomers=!1,t.customers=(null===(a=e.payload.data)||void 0===a?void 0:a.data)||[]},[v.fulfilled]:t=>{},[g.fulfilled]:(t,e)=>{var a;t.loading.getAllProductsWithDrawing=!1,t.products=(null===(a=e.payload.data)||void 0===a?void 0:a.data)||[]},[y.fulfilled]:(t,e)=>{var a;t.loading.getAllNotes=!1,t.notes=(null===(a=e.payload.data)||void 0===a?void 0:a.data)||[]},[m.fulfilled]:(t,e)=>{var a;t.loading.getAllCondition=!1,t.condition=(null===(a=e.payload.data)||void 0===a?void 0:a.data)||[]},[c.rejected]:t=>{t.loading.getPoDetailsByPoId=!1},[p.rejected]:t=>{t.loading.getAllCustomers=!1},[v.rejected]:t=>{},[g.rejected]:t=>{t.loading.getAllProductsWithDrawing=!1},[y.rejected]:t=>{t.loading.getAllNotes=!1},[m.rejected]:t=>{t.loading.getAllCondition=!1}}}).reducer;var f=a(9331),D=a(50805),A=a(42784);const w=(0,D.HY)({data:h,state:A.Ay});var P=a(24603),_=a(49934),j=a(27176),C=a(70579);(0,P.Mh)("edit_po",w);const N=()=>{var t,e;const a=(0,d.wA)(),i=(0,l.Zp)(),n=(0,l.zy)(),s=n.pathname.substring(n.pathname.lastIndexOf("/")+1);(0,o.useEffect)(()=>{(async()=>{a(p()),a(g()),a(m({type:"po"})),a(y()),s&&await a(c({po_id:s}))})()},[s]);const r=(0,d.d4)(t=>t.edit_po.data.poDetails),u=(0,d.d4)(t=>t.edit_po.data.customers),h=(0,d.d4)(t=>t.edit_po.data.products),D=(0,d.d4)(t=>t.edit_po.data.notes),A=(0,d.d4)(t=>t.edit_po.data.condition),w=(0,d.d4)(t=>t.edit_po.data.loading),P=Object.values(w).some(t=>t),N=(0,o.useMemo)(()=>null===D||void 0===D?void 0:D.map(t=>({label:t.name,value:{note_id:t.note_id,notes:t.notes}})),[D]),b=(0,o.useMemo)(()=>null===A||void 0===A?void 0:A.map(t=>({label:t.name,value:{condition_id:t.condition_id,condition:t.condition}})),[A]),z=()=>{i("/po/list")};return(0,C.jsx)(j.Rh,{loading:P,children:(0,C.jsx)(f.A,{type:"edit",onFormSubmit:async(t,e)=>{console.log("values from here",t),e(!0);const o=await(async t=>await a(v(t)))(t);e(!1),console.log("action",o.payload.data.message),200===o.payload.status?(_.y8.push((0,C.jsx)(_.Eg,{title:"Successfully added",type:"success",duration:2500,children:"Po successfully added"}),{placement:"top-center"}),z()):_.y8.push((0,C.jsx)(_.Eg,{title:"Error",type:"danger",duration:2500,children:o.payload.data.message}),{placement:"top-center"})},onDiscard:z,customers:u,products:h,Notes:N,Condition:b,initialData:{...r,date:r?new Date(r.date):null,Note:{...null===r||void 0===r?void 0:r.Note,notes:null!==r&&void 0!==r&&null!==(t=r.Note)&&void 0!==t&&t.notes?JSON.parse(null===r||void 0===r||null===(e=r.Note)||void 0===e?void 0:e.notes):[]}}})})}}}]);
//# sourceMappingURL=2548.e4313f92.chunk.js.map