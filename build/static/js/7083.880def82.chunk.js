"use strict";(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[7083],{17083:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Pe});var a=n(65043),i=n(49934),s=n(24603),o=n(50805),d=n(80907),l=n(96396),r=n(67600);const c=(0,d.zD)("edit/pattern/invoice/data/details",async e=>{try{return await(0,l.vq)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),u=(0,d.zD)("edit/pattern/invoice/data/update/charges",async e=>{try{return await(0,l.M)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),p=(0,d.zD)("edit/pattern/invoice/data/update/id",async e=>{try{return await(0,l.v8)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),h=(0,d.zD)("edit/pattern/invoice/data/list/update",async e=>{try{return await(0,l.S9)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),v=(0,d.zD)("edit/pattern/invoice/data/list/delete",async e=>{try{return await(0,l.O)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),m=(0,d.zD)("edit/pattern/invoice/data/po/all",async e=>{try{return await(0,r.uR)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),f=(0,d.zD)("edit/pattern/invoice/data/add/product",async e=>{try{return await(0,l.c2)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),y=(0,d.zD)("edit/pattern/invoice/data/add/product",async e=>{try{return await(0,l.vv)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),x=(0,d.zD)("edit/pattern/invoice/data/delete",async e=>{try{return await(0,l.tt)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),j=(0,d.Z0)({name:"edit/pattern/invoice/data",initialState:{invoiceDetails:{},loading:!1,poList:[]},reducers:{},extraReducers:{[c.fulfilled]:(e,t)=>{var n;e.invoiceDetails=(null===(n=t.payload.data)||void 0===n?void 0:n.data)||{},e.loading=!1},[c.pending]:e=>{e.invoiceDetails={},e.loading=!0},[h.fulfilled]:(e,t)=>{},[v.fulfilled]:(e,t)=>{},[u.fulfilled]:(e,t)=>{},[m.fulfilled]:(e,t)=>{var n;e.poList=(null===(n=t.payload.data)||void 0===n?void 0:n.data)||[]},[m.pending]:(e,t)=>{e.poList=[]},[f.fulfilled]:(e,t)=>{},[p.fulfilled]:(e,t)=>{}}}).reducer,g=(0,d.Z0)({name:"edit/pattern/invoice/state",initialState:{editDispatchItemDialog:!1,deleteConfirmation:!1,selectedDispatchItem:{},addDispatchItemDialog:{option:!1,locationIndex:null}},reducers:{toggleEditDispatchItemDialog:(e,t)=>{e.editDispatchItemDialog=t.payload},toggleAddDispatchItemDialog:(e,t)=>{e.addDispatchItemDialog=t.payload},togglDeleteConfirmationDialog:(e,t)=>{e.deleteConfirmation=t.payload},setSelectedDispatchItem:(e,t)=>{e.selectedDispatchItem=t.payload}}}),{setSelectedDispatchItem:b,toggleEditDispatchItemDialog:D,togglDeleteConfirmationDialog:w,toggleAddDispatchItemDialog:N}=g.actions,A=g.reducer,_=(0,o.HY)({data:j,state:A});var I=n(79456),P=n(27176),S=n(54320),C=n.n(S),L=n(73216),q=n(58931),k=n(47111),R=n(60446),M=n.n(R),z=(n(96403),n(93751)),O=n(23533),$=n(70579);const{Tr:F,Th:V,Td:Z,THead:E,TBody:T,TFoot:U}=i.XI,Y=e=>{let{row:t,initialData:n}=e;const{textTheme:a}=(0,O.A)(),i=(0,I.wA)();return(0,$.jsxs)("div",{className:"flex justify-center text-lg gap-x-4",children:[(0,$.jsx)("span",{className:`cursor-pointer hover:${a}`,onClick:()=>{i(D(!0)),i(b(t))},children:(0,$.jsx)(z.VUG,{})}),n.length>1&&(0,$.jsx)("span",{className:`cursor-pointer hover:${a}`,onClick:()=>{i(w(!0)),i(b(t))},children:(0,$.jsx)(z.yRo,{})})]})},H=e=>{let{initialData:t=[],dispatchList:n,setFieldValue:s}=e;const o=t[0].Po.currency_type;console.log("currency",o);const d=(0,a.useMemo)(()=>[{header:"PO Sr No.",accessorKey:"PoList",cell:e=>{var t,n;const a=e.row.original;return(0,$.jsx)("div",{className:"uppercase text-center",children:""+((null===a||void 0===a||null===(t=a.Po)||void 0===t?void 0:t.number)+"-"+(null===a||void 0===a||null===(n=a.PoList)||void 0===n?void 0:n.serial_number))})}},{header:"Description of goods",accessorKey:"name",cell:e=>{const t=e.row.original;return(0,$.jsxs)("div",{className:"uppercase text-center",children:[(0,$.jsx)("strong",{children:"Product : "}),null===t||void 0===t?void 0:t.item_name,(0,$.jsx)("br",{})," ",(0,$.jsx)("strong",{children:"Item Code : "}),null===t||void 0===t?void 0:t.item_code,(0,$.jsx)("br",{}),(0,$.jsx)("strong",{children:"HSN Code :"})," ",null===t||void 0===t?void 0:t.hsn_code]})}},{header:"No ",accessorKey:"no",cell:e=>{const t=e.row.original;return(0,$.jsx)("div",{className:"uppercase text-center",children:`${null===t||void 0===t?void 0:t.no}`})}},{header:"qty in sets.",accessorKey:"quantity",cell:e=>{const t=e.row.original;return(0,$.jsx)("div",{className:"uppercase text-center",children:`${null===t||void 0===t?void 0:t.item_quantity}`})}},{header:`Rate in ${o}`,accessorKey:"rate",cell:e=>{const t=e.row.original;return(0,$.jsx)("div",{className:"uppercase text-center",children:`${null===t||void 0===t?void 0:t.rate}`})}},{header:`amount in ${o}`,accessorKey:"amount",cell:e=>{const t=e.row.original;return(0,$.jsx)("div",{className:"uppercase text-center",children:Number((null===t||void 0===t?void 0:t.item_quantity)*(null===t||void 0===t?void 0:t.rate)).toFixed(2)})}},{header:"-",accessorKey:"action",cell:e=>{const n=e.row.original;return(0,$.jsx)(Y,{row:n,initialData:t})}}],[t,n]),l=(0,q.N4)({data:t,columns:d,getCoreRowModel:(0,k.HT)()});return(0,$.jsx)($.Fragment,{children:(0,$.jsxs)(i.XI,{compact:!0,children:[(0,$.jsx)(E,{children:l.getHeaderGroups().map(e=>(0,$.jsx)(F,{children:e.headers.map(e=>(0,$.jsx)(V,{style:{border:".5px solid #e0e0e0",textAlign:"center"},className:"select-none",colSpan:e.colSpan,children:(0,q.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,$.jsx)(T,{children:l.getRowModel().rows.map(e=>(0,$.jsx)(F,{children:e.getVisibleCells().map(e=>(0,$.jsx)(Z,{style:{border:".5px solid #e0e0e0"},className:"select-none",children:(0,q.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})})},K=(0,a.memo)(H),G=(e,t,n)=>i.y8.push((0,$.jsx)(i.Eg,{title:e,type:t,duration:2500,children:n}),{placement:"top-center"}),B=e=>{let{fetchData:t}=e;const[n,i]=(0,a.useState)(!1),s=(0,I.wA)(),o=(0,I.d4)(e=>e.edit_pattern_dispatch.state.selectedDispatchItem),d=(0,I.d4)(e=>e.edit_pattern_dispatch.state.deleteConfirmation),l=()=>{s(w(!1))};return(0,$.jsx)(P.TM,{isOpen:d,onClose:l,onRequestClose:l,type:"danger",title:"Delete Product",onCancel:l,onConfirm:async()=>{var e;i(!0);const n=await s(x({pattern_invoice_list_id:null===o||void 0===o?void 0:o.pattern_invoice_list_id}));var a,d,r,c;return i(!1),200===(null===(e=n.payload)||void 0===e?void 0:e.status)?(G("Successfully Deleted","success",null===(a=n.payload)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message),t(),l()):G("Unsuccessfully","danger",null===(r=n.payload)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message)},confirmText:n?"Deleting...":"Confirm",confirmButtonColor:"red-600",children:(0,$.jsx)("p",{children:"Are you sure you want to delete this Product? This action cannot be undone."})})};var Q=n(80899),W=n(63516),X=n(53536);const J=e=>{const{errors:t,values:n,touched:s}=e,o=(0,I.d4)(e=>e.edit_pattern_dispatch.data.poList);(0,a.useMemo)(()=>null===o||void 0===o?void 0:o.map(e=>({label:e.number,value:e})),[o]);return(0,$.jsx)(i.eI,{className:"mb-4",label:"PO Number",invalid:t&&s,errorMessage:t,children:(0,X.isEmpty)(n)?null:(0,$.jsxs)(i.Zp,{className:"mt-2 bg-emerald-50",children:[(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"PO Number :"})," ",(0,$.jsx)("span",{children:(null===n||void 0===n?void 0:n.number)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Currency Type :"})," ",(0,$.jsx)("span",{children:(null===n||void 0===n?void 0:n.currency_type)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Po Date :"})," ",(0,$.jsx)("span",{children:M()(null===n||void 0===n?void 0:n.date).format("DD-MMM-YYYY")||"-"})]})]})})},ee=(0,a.memo)(J),te=e=>{var t;const{errors:n,values:s,Po:o,touched:d}=e;(0,a.useMemo)(()=>{var e;return o?null===o||void 0===o||null===(e=o.PoLists)||void 0===e?void 0:e.map(e=>{var t;return{label:`${null===e||void 0===e?void 0:e.serial_number} : ${null===e||void 0===e||null===(t=e.Product)||void 0===t?void 0:t.name}`,value:e}}):[]},[o]);return(0,$.jsx)(i.eI,{className:"mb-4",label:"PO Serial Number",invalid:n&&d,errorMessage:n,children:(0,X.isEmpty)(s)?null:(0,$.jsxs)(i.Zp,{className:"mt-2 bg-orange-50",children:[(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"PO Sr. No :"})," ",(0,$.jsx)("span",{children:(null===s||void 0===s?void 0:s.serial_number)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"PO Del Date :"})," ",(0,$.jsx)("span",{children:M()(null===s||void 0===s?void 0:s.delivery_date).format("DD-MMM-YYYY")||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Item Code :"})," ",(0,$.jsx)("span",{children:(null===s||void 0===s||null===(t=s.Product)||void 0===t?void 0:t.item_code)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("strong",{children:"Price :"})," ",(0,$.jsx)("span",{children:(null===s||void 0===s?void 0:s.unit_price)||"-"})]}),(0,$.jsxs)("div",{children:[(0,$.jsx)("strong",{children:"Qty :"})," ",(0,$.jsx)("span",{children:(null===s||void 0===s?void 0:s.quantity)||"-"})]})]})]})})},ne=e=>{const{errors:t,values:n,touched:a,quantity:s}=e;return(0,$.jsx)(i.eI,{label:"Quantity In Sets.",className:"mb-4",invalid:t&&a,errorMessage:t,children:(0,$.jsx)(W.D0,{name:"item_quantity",children:e=>{let{field:t,form:n}=e;return(0,$.jsx)(i.pd,{className:"w-full",field:t,form:n,value:t.value||"",placeholder:"Enter Quantity",type:"number",autoComplete:"off"})}})})},ae=(0,a.memo)(ne),ie=e=>{const{quantity:t=0,rate:n,currency:a="INR"}=e;console.log("props",e);const s=(Number(n||0)*Number(t||0)).toFixed(2);return console.log(t),(0,$.jsx)(i.eI,{label:`Amount In ${a}`,className:"mb-4",children:(0,$.jsx)(W.D0,{disabled:!0,placeholder:"Total Amount",prefix:a,value:s,component:i.pd})})},se=(0,a.memo)(ie),oe=e=>{const{errors:t,values:n,touched:a,currency:s="INR"}=e;return(0,$.jsx)(i.eI,{label:`Rate In ${s}`,className:"mb-4",invalid:t&&a,errorMessage:t,children:(0,$.jsx)(W.D0,{name:"rate",children:e=>{let{field:t,form:n}=e;return(0,$.jsx)(i.pd,{className:"w-full",field:t,form:n,type:"number",placeholder:"Enter Rate",autoComplete:"off"})}})})},de=(0,a.memo)(oe),le=e=>{const{errors:t,values:n,touched:a}=e;return(0,$.jsx)(i.eI,{label:"No",className:"mb-4",invalid:t&&a,errorMessage:t,children:(0,$.jsx)(W.D0,{name:"no",children:e=>{let{field:t,form:n}=e;return(0,$.jsx)(i.pd,{className:"w-full",field:t,form:n,type:"number",placeholder:"Number",autoComplete:"off"})}})})},re=(0,a.memo)(le);var ce=n(30505);const ue=Q.Ik().shape({item_quantity:Q.ai().required("Required")}),pe=(0,a.forwardRef)((e,t)=>{const{initialData:n,onDiscard:s,boxes:o=[],handleFormSubmit:d,type:l,dispatchList:r,currency:c}=e,[u,p]=(0,a.useState)(n.remark);return console.log("content",u),console.log("initialData",n),(0,$.jsx)(W.l1,{innerRef:t,initialValues:{...n},validationSchema:ue,onSubmit:(e,t)=>{let{setSubmitting:n}=t;null===d||void 0===d||d(e,n),D(!1)},children:e=>{let{values:t,touched:n,errors:a,setFieldValue:o,isSubmitting:d}=e;return(0,$.jsx)(W.lV,{children:(0,$.jsxs)(i.MG,{children:[(0,$.jsxs)("h4",{children:["new"===l?"Add":"Update"," Item Information"]}),(0,$.jsx)("p",{className:"mb-3",children:"Section to config add item information"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,$.jsx)(ee,{values:t.Po}),(0,$.jsx)(te,{values:t.PoList,Po:t.Po}),(0,$.jsx)(re,{errors:a.no,touched:n.no}),(0,$.jsx)(ae,{values:t.quantity,setFieldValue:o,quantity:t.item_quantity}),(0,$.jsx)(de,{currency:c,rate:t.rate}),(0,$.jsx)(se,{currency:c,rate:t.rate,quantity:t.item_quantity})]}),(0,$.jsx)("div",{className:"mt-3 mb-3",children:(0,$.jsx)(ce.A,{content:u,setContent:p,placeholder:"Add Product Remark"})}),(0,$.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,$.jsx)(i.$n,{size:"sm",type:"button",variant:"",onClick:()=>null===s||void 0===s?void 0:s(),children:"Discard"}),(0,$.jsx)(i.$n,{size:"sm",variant:"solid",type:"submit",loading:d,children:"Update"})]})]})})}})});pe.defaultProps={initialData:{Po:null,quantity:0,PoList:null,rate:0,no:0}};const he=pe,ve=Q.Ik().shape({PoList:Q.Ik().required("Required"),Po:Q.Ik().required("Required")}),me=(0,a.forwardRef)((e,t)=>{const{initialData:n,onDiscard:s,boxes:o=[],handleFormSubmit:d,type:l,dispatchList:r}=e,[c,u]=(0,a.useState)("");return(0,$.jsx)(W.l1,{innerRef:t,initialValues:{...n},validationSchema:ve,onSubmit:(e,t)=>{let{setSubmitting:n}=t;console.log("vaues from new item form",e),null===d||void 0===d||d({...e,remarks:c},n),u("")},children:e=>{let{values:t,touched:n,errors:a,setFieldValue:s,isSubmitting:o}=e;return(0,$.jsx)(W.lV,{children:(0,$.jsxs)(i.MG,{children:[(0,$.jsxs)("h4",{children:["new"===l?"Add":"Update"," Item Information"]}),(0,$.jsx)("p",{className:"mb-3",children:"Section to config add item information"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,$.jsx)(ee,{errors:a.Po,touched:n.Po,values:t.Po}),(0,$.jsx)(te,{errors:a.PoList,touched:n.PoList,values:t.PoList,Po:t.Po}),(0,$.jsx)(re,{errors:a.no,touched:n.no}),(0,$.jsx)(ae,{errors:a.quantity,touched:n.quantity,values:t.quantity,setFieldValue:s}),(0,$.jsx)(de,{errors:a.rate,touched:n.rate,currency:t.Po.currency_type,rate:t.rate}),(0,$.jsx)(se,{currency:t.Po.currency_type,rate:t.rate,quantity:t.quantity})]}),(0,$.jsx)("div",{className:"mt-3 mb-3",children:(0,$.jsx)(ce.A,{content:c,setContent:u,placeholder:"Add Product Remarks"})}),(0,$.jsx)("div",{className:"flex gap-2 justify-end",children:(0,$.jsx)(i.$n,{size:"sm",variant:"solid",type:"submit",loading:o,children:"Add Item"})})]})})}})});me.defaultProps={initialData:{Po:{},quantity:0,PoList:[],no:0,rate:0,remarks:""}};const fe=me,ye=e=>{const{locationIndex:t,setFieldValue:n,dispatchList:a=[],addNewItemInPoList:s,invoiceId:o,fetchData:d}=e,l=(0,I.wA)();console.log("addNewItemInPoList",s);const r=(e,t,n)=>i.y8.push((0,$.jsx)(i.Eg,{title:n,type:t,duration:2500,children:e}),{placement:"top-end"}),c=(0,I.d4)(e=>{var t;return null===(t=e.edit_pattern_dispatch.state)||void 0===t?void 0:t.addDispatchItemDialog}),u=()=>{l(N({option:!1,locationIndex:null}))};console.log("dispatchList",a);return(0,$.jsx)(i.lG,{isOpen:c.option&&t===c.locationIndex,onClose:u,onRequestClose:u,children:(0,$.jsx)(fe,{type:"new",dispatchList:a,handleFormSubmit:async(e,n)=>{var i,c,p,h;n(!0);const v=a[t];var m,f,x;if((null===v||void 0===v||null===(i=v.Po)||void 0===i?void 0:i.number)===(null===e||void 0===e||null===(c=e.Po)||void 0===c?void 0:c.number)&&(null===v||void 0===v||null===(p=v.PoList)||void 0===p?void 0:p.po_list_id)===(null===e||void 0===e||null===(h=e.PoList)||void 0===h?void 0:h.po_list_id))return n(!1),r(`PO ${null===e||void 0===e||null===(m=e.Po)||void 0===m?void 0:m.number} and ${null===e||void 0===e||null===(f=e.PoList)||void 0===f||null===(x=f.Product)||void 0===x?void 0:x.name} Already Added You Can Edit it.`,"danger","Error");const j=await l(y({item:e,pattern_invoice_id:o}));var g,b;if(j.payload.status>300)return n(!1),r(null===j||void 0===j||null===(g=j.payload)||void 0===g||null===(b=g.data)||void 0===b?void 0:b.message,"danger","Error");r("Product Added Successfully","success","Successfull");const D=[...a];var w;"number"===typeof t&&D[t]?D[t]={...D[t],DispatchLists:[...D[t].DispatchLists||[],{...e,pattern_invoice_id:null===(w=j.payload.data)||void 0===w?void 0:w.data.pattern_invoice_id}]}:console.warn("Invalid locationIndex:",t);null===s||void 0===s||s(D),await d(),n(!1),u()},onDiscard:u})})},xe=(0,a.memo)(ye);var je=n(49836);const ge=e=>{const{data:t,title:n}=e;return(0,$.jsxs)(i.Zp,{className:"mt-2",children:[(0,$.jsx)("h6",{className:"font-normal text-center text-gray-500 uppercase mb-1",children:n}),(0,$.jsx)("h6",{className:"text-gray-600 font-semibold uppercase",children:null===t||void 0===t?void 0:t.name}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Customer Code :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.customer_code)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Vender Code :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.vender_code)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Mobile :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.mobile)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Email :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.email)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"PAN No :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.pan)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"GST No :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.gst_no)||"-"})]})]})},be=e=>{const{data:t,address:n,title:a}=e;return(0,$.jsxs)(i.Zp,{className:"mt-2",children:[(0,$.jsx)("h6",{className:"font-normal text-center text-gray-500 uppercase mb-1",children:a}),(0,$.jsx)("h6",{className:"text-gray-600 font-semibold uppercase",children:null===t||void 0===t?void 0:t.name}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Customer Code :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.customer_code)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Vender Code :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.vender_code)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Mobile :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.mobile)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Email :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.email)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"PAN No :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.pan)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"GST No :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.gst_no)||"-"})]})]})},De=e=>{const{data:t}=e;return(0,$.jsxs)(i.Zp,{className:"mt-2",children:[(0,$.jsx)("h6",{className:"font-normal text-center text-gray-500 uppercase mb-1",children:"Shipping Address"}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Country :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.country)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"State :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.state)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"City :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.city)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"ZIP Code :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.zip_code)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Contact Person :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.contact_person)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Contact Phone :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.contact_phone)||"-"})]})]})},we=e=>{const{data:t}=e;return(0,$.jsxs)(i.Zp,{className:"mt-2",children:[(0,$.jsx)("h6",{className:"font-normal text-center text-gray-500 uppercase mb-1",children:"Shipping Address"}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Place of receipt :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.place_of_receipt)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Port of discharge :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.port_of_discharge)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Port of loading :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.port_of_loading)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Country of goods :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.country_of_goods)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Country of destination :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.country_of_destination)||"-"})]}),(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsx)("strong",{children:"Final destination :"})," ",(0,$.jsx)("span",{children:(null===t||void 0===t?void 0:t.final_destination)||"-"})]})]})},Ne=(e,t,n)=>i.y8.push((0,$.jsx)(i.Eg,{title:n,type:t,duration:2500,children:e}),{placement:"top-center"}),Ae=e=>{const{dispatchList:t=[],fetchData:n}=e,a=(0,I.wA)(),s=(0,I.d4)(e=>e.edit_pattern_dispatch.state.editDispatchItemDialog),o=(0,I.d4)(e=>e.edit_pattern_dispatch.state.selectedDispatchItem),d=()=>{a(D(!1))};return(0,$.jsx)(i.lG,{isOpen:s,onClose:d,onRequestClose:d,children:(0,$.jsx)(he,{initialData:o,dispatchList:t,handleFormSubmit:async(e,t)=>{var i,s,o;console.log("values",e),console.log("clicked"),t(!0);const l=await a(p(e));var r,c;return t(!1),200===(null===(i=l.payload)||void 0===i?void 0:i.status)?(Ne(null===l||void 0===l||null===(r=l.payload)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message,"success","Successfully updated"),null===n||void 0===n||n(),d()):Ne(null===l||void 0===l||null===(s=l.payload)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message,"danger","Unsuccessfully updated")},onDiscard:d})})},_e=(0,a.memo)(Ae);(0,s.Mh)("edit_pattern_dispatch",_);const Ie=(e,t,n)=>i.y8.push((0,$.jsx)(i.Eg,{title:n,type:t,duration:2500,children:e}),{placement:"top-end"}),Pe=()=>{var e;const t=(0,L.zy)(),n=(0,I.wA)(),s=(0,L.Zp)(),[o,d]=(0,a.useState)(""),[l,r]=(0,a.useState)(null),u=(0,I.d4)(e=>e.edit_pattern_dispatch.data.invoiceDetails);console.log("StateDispatchList",l);const[p,h]=(0,a.useState)(!1),[v,f]=(0,a.useState)(0),[y,x]=(0,a.useState)(0),[j,g]=(0,a.useState)(0);(0,a.useEffect)(()=>{D()},[]),(0,a.useEffect)(()=>{u&&r(u)},[u]),(0,a.useEffect)(()=>{(async()=>{if(o&&"Invalid Date"!==o){(await n((0,je.Zz)({invoice_date:M()(o).format("YYYY-MM-DD"),pattern_invoice_id:u.pattern_invoice_id}))).payload.status<300?(Ie("Invoice Date Successfully Updated","success","Successfully Updated"),D()):Ie("Invoice Date Not Updated","danger","error")}})()},[o]);const b=new Date(u.invoice_date),D=async()=>{const e=t.pathname.substring(t.pathname.lastIndexOf("/")+1);if(e){var a,i,s,o,d,l,r,u,p,h,v,y,j,b;const t=await n(c({pattern_invoice_id:e}));f(null!==(a=t.payload.data.data)&&void 0!==a&&null!==(i=a.DispatchShippingAndOtherDetail)&&void 0!==i&&i.packing_charges?null===(s=t.payload.data.data)||void 0===s||null===(o=s.DispatchShippingAndOtherDetail)||void 0===o?void 0:o.packing_charges:0),x(null!==(d=t.payload.data.data)&&void 0!==d&&null!==(l=d.DispatchShippingAndOtherDetail)&&void 0!==l&&l.fright_charges?null===(r=t.payload.data.data)||void 0===r||null===(u=r.DispatchShippingAndOtherDetail)||void 0===u?void 0:u.fright_charges:0),g(null!==(p=t.payload.data.data)&&void 0!==p&&null!==(h=p.DispatchShippingAndOtherDetail)&&void 0!==h&&h.other_charges?null===(v=t.payload.data.data)||void 0===v||null===(y=v.DispatchShippingAndOtherDetail)||void 0===y?void 0:y.other_charges:0),n(m({customer_id:null===(j=t.payload.data.data)||void 0===j||null===(b=j.DispatchConsignee)||void 0===b?void 0:b.customer_id,currency_type:"INR"}))}};return(0,$.jsxs)(P.mc,{className:"h-full",children:[(0,$.jsx)(P.Rh,{loading:p,children:!C()(l)&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,$.jsxs)(i.Zp,{className:"bg-yellow-50",children:[(0,$.jsxs)("div",{className:"flex justify-between items-center",children:[(0,$.jsxs)("span",{children:[(0,$.jsx)("h5",{className:"font-semibold text-gray-700",children:"Consignee & Buyer Information"}),(0,$.jsx)("p",{className:"mb-2",children:"Section to config consignee & buyer information"})]}),(0,$.jsx)("div",{children:(0,$.jsx)(i.lr,{style:{width:"160px"},placeholder:"Invoice Date",value:b,onChange:e=>{d(e)}})})]}),(0,$.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,$.jsx)(ge,{title:"Receiver",data:null===l||void 0===l?void 0:l.DispatchConsignee,address:null===l||void 0===l||null===(e=l.DispatchConsignee)||void 0===e?void 0:e.DispatchConsigneeAddress}),(0,$.jsx)(be,{title:"Recipient",data:null===l||void 0===l?void 0:l.DispatchBuyer,address:null===l||void 0===l?void 0:l.DispatchShippingAddress})]})]}),(0,$.jsxs)(i.Zp,{className:"bg-blue-50 h-max",children:[(0,$.jsx)("h5",{className:"font-semibold text-gray-700",children:"Address & Shipping Information"}),(0,$.jsx)("p",{className:"mb-2",children:"Section to config address & shipping information"}),(0,$.jsx)("div",{className:"grid grid-cols-2 gap-2"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,$.jsx)(De,{data:null===l||void 0===l?void 0:l.DispatchShippingAddress}),(0,$.jsx)(we,{data:null===l||void 0===l?void 0:l.DispatchShippingDetail})]})]})]}),(0,$.jsxs)(i.Zp,{className:"my-4",children:[(0,$.jsxs)("div",{className:"flex justify-between items-center h-full mb-2",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("h5",{className:"font-semibold text-gray-700",children:"POs Information"}),(0,$.jsx)("p",{children:"Section to config POs list information"})]}),(0,$.jsx)("div",{className:"flex gap-2 justify-end items-center h-full",children:(0,$.jsx)(i.$n,{type:"button",variant:"solid",color:"pink-500",size:"sm",onClick:()=>{n(N({option:!0,locationIndex:null}))},children:"Add Item"})})]}),(0,$.jsx)(K,{initialData:(null===l||void 0===l?void 0:l.PatternInvoiceLists)||[],boxes:null===l||void 0===l?void 0:l.DispatchBoxLists}),(0,$.jsx)(xe,{locationIndex:null,invoiceId:null===l||void 0===l?void 0:l.pattern_invoice_id,addNewItemInPoList:async e=>{console.log("dispatchList:",e),Array.isArray(e)?r(t=>t?{...t,PatternInvoiceLists:[...e]}:t):console.error("dispatchList is not an array:",e)},dispatchList:l.PatternInvoiceLists,fetchData:D}),(0,$.jsx)(_e,{dispatchList:l.DispatchLocations,fetchData:D}),(0,$.jsx)(B,{fetchData:D})]}),(0,$.jsx)(P.NG,{className:"-mx-8 px-8 flex items-center justify-end p-3",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:(0,$.jsx)("div",{className:"md:flex items-center",children:(0,$.jsx)(i.$n,{variant:"solid",onClick:()=>{Ie("Invoice Date Successfully Updated","success","Successfully Updated"),s("/dispatch-list")},children:"Update"})})})]})}),!p&&C()(u)&&(0,$.jsxs)("div",{className:"h-full flex flex-col items-center justify-center",children:[(0,$.jsx)(P.Sl,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No invoice found!"}),(0,$.jsx)("h3",{className:"mt-8",children:"No Invoice found!"})]})]})}},30505:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(65043),i=n(48555),s=n.n(i),o=n(70579);const d=e=>{let{setContent:t,content:n,placeholder:i=""}=e;const d=(0,a.useRef)(null),l={readonly:!1,height:100,toolbar:!1,toolbarSticky:!1,placeholder:i,buttons:[],showCharsCounter:!1,showWordsCounter:!1,showXPathInStatusbar:!1,minHeight:"150px"};return(0,o.jsx)("div",{children:(0,o.jsx)(s(),{ref:d,value:n,config:l,onBlur:e=>t(e)})})}},49836:(e,t,n)=>{n.d(t,{AV:()=>c,Ay:()=>m,OW:()=>d,Zz:()=>r,b5:()=>u,fW:()=>h,g0:()=>l,jq:()=>o,lc:()=>p,rj:()=>v});var a=n(80907),i=n(96396),s=n(67600);const o=(0,a.zD)("edit/foreign/invoice/data/details",async e=>{try{return await(0,i.H1)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),d=(0,a.zD)("edit/foreign/invoice/data/list/update",async e=>{try{return await(0,i.S9)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),l=(0,a.zD)("edit/foreign/invoice/data/list/delete",async e=>{try{return await(0,i.O)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),r=(0,a.zD)("edit/foreign/invoice/date/update",async e=>{try{return await(0,i.xs)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),c=(0,a.zD)("edit/foreign/invoice/data/po/all",async e=>{try{return await(0,s.uR)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),u=(0,a.zD)("edit/foreign/invoice/data/add/product",async e=>{try{return await(0,i.c2)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),p=(0,a.zD)("edit/foreign/invoice/data/add/box",async e=>{try{return await(0,i.cZ)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),h=(0,a.zD)("edit/foreign/invoice/data/delete/box",async e=>{try{return await(0,i.Z2)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),v=(0,a.zD)("edit/foreign/invoice/data/update/box",async e=>{try{return await(0,i.F$)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),m=(0,a.Z0)({name:"edit/foreign/invoice/data",initialState:{invoiceDetails:{},loading:!1,poList:[]},reducers:{},extraReducers:{[o.fulfilled]:(e,t)=>{var n;e.invoiceDetails=(null===(n=t.payload.data)||void 0===n?void 0:n.data)||{},e.loading=!1},[o.pending]:e=>{e.invoiceDetails={},e.loading=!0},[d.fulfilled]:(e,t)=>{},[l.fulfilled]:(e,t)=>{},[r.fulfilled]:(e,t)=>{},[c.fulfilled]:(e,t)=>{var n,a;e.poList=(null===(n=t.payload)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.data)||[]},[u.fulfilled]:(e,t)=>{},[p.fulfilled]:(e,t)=>{},[h.fulfilled]:(e,t)=>{},[v.fulfilled]:(e,t)=>{}}}).reducer},67600:(e,t,n)=>{n.d(t,{II:()=>x,L7:()=>b,NH:()=>w,Pp:()=>_,Ps:()=>i,Q$:()=>L,Q8:()=>j,RV:()=>o,TR:()=>A,Vf:()=>p,Wm:()=>C,XU:()=>l,c:()=>v,ef:()=>h,fd:()=>I,hv:()=>s,jd:()=>N,jt:()=>f,mF:()=>D,mj:()=>m,nT:()=>d,nd:()=>r,pW:()=>g,rQ:()=>S,rh:()=>c,uR:()=>y,xo:()=>u,z6:()=>P});var a=n(43971);async function i(e){return a.A.fetchData({url:"v1/web/company/po/Number/check",method:"post",data:e})}async function s(e){return a.A.fetchData({url:"v1/web/company/po/register",method:"post",data:e})}async function o(e){return a.A.fetchData({url:"v1/web/company/po/update/id",method:"post",data:e})}async function d(e){return a.A.fetchData({url:"v1/web/company/po/delete/id",method:"delete",data:e})}async function l(e){return a.A.fetchData({url:"v1/web/company/po/id",method:"post",data:e})}async function r(e){return a.A.fetchData({url:"v1/web/company/po",method:"post",data:e})}async function c(e){return a.A.fetchData({url:"v1/web/company/po/dates",method:"post",data:e})}async function u(e){return a.A.fetchData({url:"v1/web/company/po/delivery/dates",method:"post",data:e})}async function p(e){return a.A.fetchData({url:"v1/web/company/po/accept/delivery/dates",method:"post",data:e})}async function h(e){return a.A.fetchData({url:"v1/web/company/po/raw/dates",method:"post",data:e})}async function v(e){return a.A.fetchData({url:"v1/web/company/po/machining/dates",method:"post",data:e})}async function m(e){return a.A.fetchData({url:"/v1/web/company/executive/po/list/update",method:"post",data:e})}async function f(e){return a.A.fetchData({url:"v1/web/company/po-list/list/id",method:"post",data:e})}async function y(e){return a.A.fetchData({url:"v1/web/company/po/select/customer/id",method:"post",data:e})}async function x(){return a.A.fetchData({url:"v1/web/company/po/Unique/number",method:"get"})}async function j(e){return a.A.fetchData({url:"v1/web/company/po/lists",method:"get",params:e})}async function g(e){return a.A.fetchData({url:"v1/web/company/po/number/po",method:"post",data:e})}async function b(){return a.A.fetchData({url:"v1/web/company/po/years",method:"get"})}async function D(e){return a.A.fetchData({url:"v1/web/company/po/months",method:"post",data:e})}async function w(e){return a.A.fetchData({url:"v1/web/company/po/month/dates",method:"post",data:e})}async function N(e){return a.A.fetchData({url:"v1/web/company/po/Number/po/option",method:"post",data:e})}async function A(e){return a.A.fetchData({url:"v1/web/company/po/poa/option",method:"post",data:e})}async function _(e){return a.A.fetchData({url:"v1/web/company/po-list/po/number",method:"post",data:e})}async function I(e){return a.A.fetchData({url:"v1/web/company/po-list/serial/number",method:"post",data:e})}async function P(e){return a.A.fetchData({url:"v1/web/company/po-list/attachment",method:"put",data:e})}async function S(e){return a.A.fetchData({url:"v1/web/company/po-list/attachment/delete",method:"put",data:e})}async function C(){return a.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function L(e){return a.A.fetchData({url:"v1/web/company/po-list/date/update",method:"post",data:e})}},96396:(e,t,n)=>{n.d(t,{D8:()=>r,F$:()=>j,FT:()=>g,H1:()=>l,HH:()=>s,K5:()=>L,Lb:()=>C,M:()=>c,O:()=>v,S9:()=>h,V1:()=>D,VA:()=>p,Wm:()=>P,Xd:()=>u,Z2:()=>x,c2:()=>f,cZ:()=>y,dg:()=>o,i7:()=>k,ic:()=>m,ko:()=>I,nV:()=>i,r6:()=>b,tt:()=>_,uM:()=>q,v8:()=>N,vq:()=>w,vv:()=>A,wb:()=>S,xs:()=>d});var a=n(43971);async function i(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/check/invoice/number",method:"post",data:e})}async function s(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/domestic/register",method:"post",data:e})}async function o(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/foreign/register",method:"post",data:e})}async function d(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/foreign/invoice/date/update",method:"put",data:e})}async function l(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/foreign/invoice/id",method:"post",data:e})}async function r(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/domestic/invoice/id",method:"post",data:e})}async function c(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/domestic/packing/update",method:"put",data:e})}async function u(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch",method:"post",data:e})}async function p(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/details/id",method:"post",data:e})}async function h(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch-list/id",method:"put",data:e})}async function v(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch-list/delete/id",method:"delete",data:e})}async function m(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch-list/raw/machining/date",method:"post",data:e})}async function f(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch-list/add/product",method:"post",data:e})}async function y(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch-list/add/box",method:"post",data:e})}async function x(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch-list/delete/box",method:"delete",data:e})}async function j(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch-list/update/box",method:"put",data:e})}async function g(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/delete",method:"delete",data:e})}async function b(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/pattern/register",method:"post",data:e})}async function D(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/pattern",method:"post",data:e})}async function w(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/Pattern/invoice/id",method:"post",data:e})}async function N(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/patternList/id",method:"put",data:e})}async function A(e){return a.A.fetchData({url:"v1/web/company/product/pattern/update/product",method:"put",data:e})}async function _(e){return a.A.fetchData({url:"v1/web/company/product/pattern/delete",method:"delete",data:e})}async function I(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/number",method:"get",data:e})}async function P(){return a.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function S(){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/date",method:"get"})}async function C(){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/years",method:"get"})}async function L(){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/months",method:"get"})}async function q(e){return a.A.fetchData({url:"v1/web/company/invoice/dispatch/update/status",method:"put",data:e})}async function k(e){return console.log("data",e),a.A.fetchData({url:"v1/web/company/invoice/dispatch/patternInvoice/update/status",method:"put",data:e})}},96403:(e,t,n)=>{n(70579)}}]);
//# sourceMappingURL=7083.880def82.chunk.js.map