"use strict";(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[1401],{51401:(e,t,a)=>{a.r(t),a.d(t,{default:()=>be});var n=a(65043),r=a(24603),l=a(50805),i=a(80907),o=a(83838);const s=(0,i.zD)("enquiry/data/all/enquiry",async e=>{try{return await(0,o.F)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),d=(0,i.zD)("enquiry/data/delete/enquiry",async e=>{try{return await(0,o.dq)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),c=(0,i.Z0)({name:"enquiry/data",initialState:{loading:!1,enquiryList:[],tableData:{total:0,pageIndex:1,pageSize:10,query:""}},reducers:{setTableData:(e,t)=>{e.tableData=t.payload}},extraReducers:{[s.fulfilled]:(e,t)=>{var a,n,r,l;e.enquiryList=(null===(a=t.payload)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.data)||[],e.tableData.total=(null===(r=t.payload)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.total)||0,e.loading=!1},[s.pending]:(e,t)=>{e.loading=!0},[s.rejected]:(e,t)=>{e.enquiryList=[],e.tableData.total=0,e.loading=!1},[d.fulfilled]:(e,t)=>{}}}),{setTableData:u,setFilterData:m}=c.actions,y=c.reducer,p=(0,i.Z0)({name:"enquiry/state",initialState:{deleteConfirmation:!1,selectedEnquiry:{},openDrawer:!1,openEditDrawer:!1},reducers:{togglDeleteConfirmationDialog:(e,t)=>{e.deleteConfirmation=t.payload},toggleDrawer:(e,t)=>{e.openDrawer=t.payload},toggleEditDrawer:(e,t)=>{e.openEditDrawer=t.payload},setSelectedEnquiry:(e,t)=>{e.selectedEnquiry=t.payload}}}),{togglDeleteConfirmationDialog:h,setSelectedEnquiry:v,toggleDrawer:g,toggleEditDrawer:x}=p.actions,f=p.reducer,j=(0,l.HY)({data:y,state:f});var w=a(79456),b=a(23533),q=a(73216),D=a(35475),C=a(56434),_=a.n(C),S=a(88705),A=a(93751),N=a(49934),z=a(90642),E=a(99149);const I=(0,i.zD)("new/enquiry/data/customer/all",async()=>{try{return await(0,z.ZS)()}catch(e){return null===e||void 0===e?void 0:e.response}}),P=(0,i.zD)("new/enquiry/data/product/all",async()=>{try{return await(0,E.qT)()}catch(e){return null===e||void 0===e?void 0:e.response}}),R=(0,i.zD)("new/enquiry/data/register",async e=>{try{return await(0,o.QM)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),k=(0,i.Z0)({name:"new/enquiry/data",initialState:{loading:{getAllCustomers:!0,getAllProductsWithDrawing:!0},customers:[],products:[]},extraReducers:{[I.fulfilled]:(e,t)=>{var a;e.customers=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[],e.loading.getAllCustomers=!1},[R.fulfilled]:e=>{},[P.fulfilled]:(e,t)=>{var a;e.products=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[],e.loading.getAllProductsWithDrawing=!1}}}).reducer,M=(0,l.HY)({data:k});a(98257);var T=a(41434),$=a(63516),F=a(80899),B=a(27176),O=a(72234),Y=a(70579);const Z=e=>{const{errors:t,touched:a,label:r,name:l,placeholder:i="",type:o="text",value:s,size:d=""}=e,[c,u]=(0,n.useState)(!1);return(0,Y.jsx)("div",{className:"datepicker-wrapper",style:{position:"relative",zIndex:1e3},children:(0,Y.jsx)(N.eI,{label:r,errorMessage:t,className:"mb-2",children:(0,Y.jsx)($.D0,{name:l,placeholder:i,children:e=>{let{field:t,form:a}=e;return(0,Y.jsx)(N.lr,{field:t,form:a,value:s,onChange:e=>{a.setFieldValue(t.name,e)},size:d})}})})})},H=(0,n.memo)(Z),{Tr:K,Th:W,Td:G,THead:V,TBody:U}=N.XI,{Control:L}=O.c,X=e=>{let{values:t,errors:a,touched:r,Products:l=[],type:i="new"}=e;const o=(e,t)=>{const a=(0,$.O6)(e.errors,t);return{errorMessage:a||"",invalid:(0,$.O6)(e.touched,t)&&Boolean(a)}};console.log(t);const s=(0,n.useMemo)(()=>l.map(e=>({label:`${e.name} ${null===e||void 0===e?void 0:e.item_code}`,value:e})),[l]),d=e=>{var t;let{children:a,...n}=e;const r=n.getValue()[0];return(0,Y.jsxs)(L,{...n,children:[r&&(0,Y.jsxs)("span",{className:"ml-2 font-semibold uppercase",children:[null===r||void 0===r||null===(t=r.value)||void 0===t?void 0:t.item_code," :"]}),a]})},c=e=>{let{innerProps:t,label:a,data:n,isSelected:r}=e;return(0,Y.jsx)("div",{className:"flex items-center justify-between p-2 "+(r?"bg-gray-100":"hover:bg-gray-50"),...t,children:(0,Y.jsxs)("div",{className:"items-center flex justify-between w-full",children:[(0,Y.jsx)("div",{className:"ml-2 uppercase",children:`${a}`}),r&&(0,Y.jsx)(A.q9z,{className:"text-emerald-500 text-xl"})]})})},u={textAlign:"center",border:".2px dashed lightGray",width:"200px"};return(0,Y.jsxs)(N.XI,{className:"relative",compact:!0,children:[(0,Y.jsx)(V,{className:"sticky",style:{top:"-.2px"},children:(0,Y.jsxs)(K,{children:[(0,Y.jsx)(W,{style:u,children:"Product"}),(0,Y.jsx)(W,{style:u,children:"Drawing Revision Number"}),(0,Y.jsx)(W,{style:u,children:"Quantity"}),(0,Y.jsx)(W,{style:u,children:"Expected Delivery Date"}),(0,Y.jsx)(W,{style:{textAlign:"center",border:".2px dashed lightGray",width:"100px"},children:"Action"})]})}),(0,Y.jsx)(U,{children:(0,Y.jsx)($.ED,{name:"items",children:e=>{let{form:a,remove:n,push:r}=e;return(0,Y.jsxs)(Y.Fragment,{children:[t.items&&t.items.length>0?t.items.map((e,r)=>{var l,i;const m=o(a,`items[${r}].Product`),y=o(a,`items[${r}].drawing_revision`),p=o(a,`items[${r}].quantity`);o(a,`items[${r}].delivery_date`);return(0,Y.jsxs)(K,{children:[(0,Y.jsx)(G,{style:u,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",invalid:m.invalid,errorMessage:m.errorMessage,children:(0,Y.jsx)($.D0,{name:`items[${r}].Product`,invalid:m.invalid,children:e=>{let{field:a,form:n}=e;return(0,Y.jsx)(N.l6,{field:a,form:n,size:"sm",className:"w-full",options:s,components:{Option:c,Control:d},value:s.find(e=>{var a,n,l;return(null===(a=e.value)||void 0===a?void 0:a.product_id)===(null===(n=t.items[r])||void 0===n||null===(l=n.Product)||void 0===l?void 0:l.product_id)}),onChange:e=>{n.setFieldValue(a.name,e.value)},menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})}})}})})}),(0,Y.jsx)(G,{style:u,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",invalid:y.invalid,errorMessage:y.errorMessage,children:(0,Y.jsx)($.D0,{autoComplete:"off",invalid:y.invalid,type:"text",name:`items[${r}].drawing_revision`,size:"sm",className:(null===(l=t.items[r].Product)||void 0===l||null===(i=l.Drawings)||void 0===i?void 0:i.some(e=>e.revision_number===(null===t||void 0===t?void 0:t.items[r].drawing_revision)))&&"bg-emerald-100",placeholder:"Drawing Revision Number",component:N.pd})})}),(0,Y.jsx)(G,{style:u,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",invalid:p.invalid,errorMessage:p.errorMessage,children:(0,Y.jsx)($.D0,{invalid:p.invalid,autoComplete:"off",type:"text",name:`items[${r}].quantity`,size:"sm",placeholder:"Quantity",component:N.pd})})}),(0,Y.jsx)(G,{style:u,children:(0,Y.jsx)(H,{placeholder:"Expected Delivery Date",label:"",size:"sm",name:`items[${r}].delivery_date`,value:t.items[r].delivery_date,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})}})}),(0,Y.jsx)(G,{style:{textAlign:"center",border:".2px dashed lightGray",width:"100px"},children:(0,Y.jsx)(N.$n,{shape:"circle",size:"sm",onClick:()=>n(r),icon:(0,Y.jsx)(A.yRo,{})})})]},r)}):null,(0,Y.jsx)(K,{children:(0,Y.jsx)(G,{colSpan:5,style:{textAlign:"end"},children:(0,Y.jsx)(N.$n,{type:"button",size:"sm",variant:"solid",color:"purple-600",onClick:()=>{r({Product:null,quantity:"",delivery_date:"",drawing_revision:""})},children:"Add an Product"})})})]})}})})]})},Q=e=>{const{errors:t,touched:a,label:n,name:r,placeholder:l="",type:i="text"}=e;return(0,Y.jsx)(N.eI,{className:"mb-4",label:n,invalid:t&&a,errorMessage:t,children:(0,Y.jsx)($.D0,{type:i,autoComplete:"off",name:r,placeholder:l,component:N.pd})})},J=(0,n.memo)(Q),ee=e=>{const{errors:t,touched:a,name:n,data:r,values:l,label:i}=e;return(0,Y.jsx)(N.eI,{className:"mb-3",label:i,invalid:t&&a,errorMessage:t,children:(0,Y.jsx)($.D0,{name:n,children:e=>{let{field:t,form:a}=e;return(0,Y.jsx)(N.l6,{field:t,form:a,options:r,value:r.filter(e=>e.value===l),onChange:e=>a.setFieldValue(t.name,e.value)})}})})},te=(0,n.memo)(ee),ae=[{label:"Foreign",value:"FOREIGN"},{label:"Domestic",value:"DOMESTIC"}],ne=(F.Ik().shape({customer_id:F.Yj().required("Required"),enquiry_date:F.Yj().required("Required"),enquiry_type:F.Yj().required("Required"),enq_number:F.Yj().required("Required"),poc_name:F.Yj().required("Required"),poc_contact:F.Yj().required("Required"),items:F.YO().of(F.Ik().shape({Product:F.Ik().required("Required"),drawing_revision:F.Yj().required("Required").test((e,t)=>{var a,n;return!(null===(a=t.parent)||void 0===a||null===(n=a.Product)||void 0===n||!n.Drawings.some(t=>t.revision_number===e))||t.createError({message:"Not Matched"})}),quantity:F.Yj().required("Required"),delivery_date:F.Ik().required("Required")}))}),(0,n.forwardRef)((e,t)=>{(0,w.wA)(),(0,q.Zp)();const{type:a,initialData:r,onFormSubmit:l,onDiscard:i,Customers:o,Products:s}=e,d=(0,n.useMemo)(()=>o.map(e=>({label:e.name,value:e.customer_id})),[o]);return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)("div",{children:(0,Y.jsx)($.l1,{enableReinitialize:!0,innerRef:t,initialValues:{...r},onSubmit:(e,t)=>{let{setSubmitting:a}=t;const n=_()(e);null===l||void 0===l||l(n,a)},children:e=>{let{values:t,errors:n,touched:r,isSubmitting:l,setErrors:i,handleSubmit:o,resetForm:c}=e;return console.log(t),(0,Y.jsx)($.lV,{children:(0,Y.jsxs)(N.MG,{children:[(0,Y.jsx)(N.Zp,{className:" h-max border-rose-800 bg-rose-50",children:(0,Y.jsxs)("div",{className:"grid grid-cols-6 gap-3",children:[(0,Y.jsx)(te,{errors:null===n||void 0===n?void 0:n.customer_id,touched:null===r||void 0===r?void 0:r.customer_id,name:"customer_id",data:d,values:t.customer_id,label:"Customer"}),(0,Y.jsx)(J,{errors:null===n||void 0===n?void 0:n.enq_number,touched:null===r||void 0===r?void 0:r.enq_number,placeholder:"Enquiry Number",label:"Enquiry No.",name:"enq_number",type:"text"}),(0,Y.jsx)(te,{errors:null===n||void 0===n?void 0:n.enquiry_type,touched:null===r||void 0===r?void 0:r.enquiry_type,name:"enquiry_type",data:ae,values:t.enquiry_type,label:"Type"}),(0,Y.jsx)(H,{errors:null===n||void 0===n?void 0:n.enquiry_date,touched:null===r||void 0===r?void 0:r.enquiry_date,placeholder:"Enquiry Date",label:"Enquiry Date",name:"enquiry_date",value:t.enquiry_date}),(0,Y.jsx)(J,{errors:null===n||void 0===n?void 0:n.poc_name,touched:null===r||void 0===r?void 0:r.poc_name,placeholder:"POC Name",label:"Person Of Contact Name",name:"poc_name",type:"text"}),(0,Y.jsx)(J,{errors:null===n||void 0===n?void 0:n.poc_contact,touched:null===r||void 0===r?void 0:r.poc_contact,placeholder:"POC Contact",label:"Person Of Contact Number",name:"poc_contact",type:"text"})]})}),(0,Y.jsx)("div",{className:"mt-4",children:(0,Y.jsx)(X,{values:t,Products:s,errors:n,touched:r,type:a})}),(0,Y.jsx)(B.NG,{className:"-mx-8 px-8 flex items-center justify-end py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:(0,Y.jsxs)("div",{className:"md:flex items-center",children:[(0,Y.jsx)(N.$n,{size:"sm",className:"mr-3",type:"button",children:"Discard"}),(0,Y.jsx)(N.$n,{size:"sm",variant:"solid",icon:(0,Y.jsx)(T.kuV,{className:"mr-1"}),type:"submit",children:"Save"})]})})]})})}})})})}));ne.defaultProps={type:"new",initialData:{customer_id:"",enq_number:"",enquiry_type:"",enquiry_date:new Date,poc_name:"",poc_contact:"",items:[{Product:null,quantity:"",delivery_date:new Date,drawing_revision:""}]}};const re=ne;(0,r.Mh)("enquiry_new",M);const le=(e,t,a)=>{N.y8.push((0,Y.jsx)(N.Eg,{title:e,type:t,duration:2500,children:a}),{placement:"top-end"})},ie=()=>{const e=(0,w.wA)(),t=(0,q.Zp)(),[a,r]=(0,n.useState)(1400),l=(0,w.d4)(e=>e.enquiry_new.data.customers),i=(0,w.d4)(e=>e.enquiry_new.data.products),o=(0,w.d4)(e=>e.enquiry_new.data.loading),d=(0,w.d4)(e=>e.enquiry.state.openDrawer);let c=Object.values(o);(0,n.useEffect)(()=>{d&&(m(),u())},[d]);const u=async()=>{e(I()),e(P())},m=()=>{const e=window.innerWidth;r(e-250)},y=()=>{e(g(!1))};N.$n,N.$n;return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(N._s,{title:"New Enquiry",isOpen:d,onClose:y,onRequestClose:y,width:a,children:(0,Y.jsx)(B.Rh,{loading:!c.every(e=>!1===e),children:(0,Y.jsx)(re,{type:"new",onFormSubmit:async(t,a)=>{console.log(t),a(!0);(await e(R(t))).payload.status<300?(a(!1),le("Successfull","success","Enquiry Successfully created"),y(),e(s())):(le("Unsuccessful","error","Enquiry not created"),a(!1))},onDiscard:()=>{t("/product")},Customers:l,Products:i})})})})},oe=(0,i.zD)("edit/enquiry/data/customer/all",async()=>{try{return await(0,z.ZS)()}catch(e){return null===e||void 0===e?void 0:e.response}}),se=(0,i.zD)("edit/enquiry/data/product/all",async()=>{try{return await(0,E.qT)()}catch(e){return null===e||void 0===e?void 0:e.response}}),de=(0,i.zD)("edit/enquiry/data/get",async e=>{try{return await(0,o.Y_)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),ce=(0,i.zD)("edit/enquiry/data/update",async e=>{try{return await(0,o.lB)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),ue=(0,i.Z0)({name:"edit/enquiry/data",initialState:{loading:{getAllCustomers:!0,getAllProductsWithDrawing:!0,getEnquiryById:!0},customers:[],products:[],enquiry:{}},extraReducers:{[oe.fulfilled]:(e,t)=>{var a;e.customers=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[],e.loading.getAllCustomers=!1},[ce.fulfilled]:e=>{},[se.fulfilled]:(e,t)=>{var a;e.products=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[],e.loading.getAllProductsWithDrawing=!1},[de.fulfilled]:(e,t)=>{var a;e.enquiry=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||{},e.loading.getEnquiryById=!1}}}).reducer,me=(0,l.HY)({data:ue});(0,r.Mh)("enquiry_edit",me);const ye=(e,t,a)=>{N.y8.push((0,Y.jsx)(N.Eg,{title:e,type:t,duration:2500,children:a}),{placement:"top-end"})},pe=()=>{var e;const t=(0,w.wA)(),a=(0,q.Zp)(),[r,l]=(0,n.useState)(1400),i=(0,w.d4)(e=>e.enquiry_edit.data.customers),o=(0,w.d4)(e=>e.enquiry_edit.data.products),d=(0,w.d4)(e=>e.enquiry_edit.data.enquiry),c=(0,w.d4)(e=>e.enquiry_edit.data.loading),u=(0,w.d4)(e=>e.enquiry.state.openEditDrawer),m=(0,w.d4)(e=>e.enquiry.state.selectedEnquiry),y=Object.values(c);console.log(y),(0,n.useEffect)(()=>{u&&(h(),p())},[u]);const p=async()=>{try{await t(oe()),await t(se()),await t(de({enquiry_id:null===m||void 0===m?void 0:m.enquiry_id}))}catch(e){console.error("Error fetching data:",e)}},h=()=>{const e=window.innerWidth;l(e-250)},v=()=>{t(x(!1))};N.$n,N.$n;return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(N._s,{title:"Edit Enquiry",isOpen:u,onClose:v,onRequestClose:v,width:r,children:(0,Y.jsx)(B.Rh,{loading:!y.every(e=>!1===e),children:(0,Y.jsx)(re,{type:"edit",onFormSubmit:async(e,a)=>{console.log(e),a(!0);(await t(ce(e))).payload.status<300?(a(!1),ye("Successfull","success","Enquiry Successfully Updated"),v(),t(s())):(ye("Unsuccessful","error","Enquiry not Updated"),a(!1))},onDiscard:()=>{a("/product")},Customers:i,Products:o,initialData:{...d,enquiry_date:new Date(null===d||void 0===d?void 0:d.enquiry_date),items:null===d||void 0===d||null===(e=d.items)||void 0===e?void 0:e.map(e=>({...e,delivery_date:new Date(e.delivery_date)}))}})})})})},he=(e,t,a)=>N.y8.push((0,Y.jsx)(N.Eg,{title:e,type:t,duration:2500,children:a}),{placement:"top-center"}),ve=()=>{const[e,t]=(0,n.useState)(!1),a=(0,w.d4)(e=>e.enquiry.data.tableData),r=(0,w.wA)(),l=(0,w.d4)(e=>e.enquiry.state.selectedEnquiry),i=(0,w.d4)(e=>e.enquiry.state.deleteConfirmation),o=()=>{r(h(!1))};return(0,Y.jsx)(B.TM,{isOpen:i,onClose:o,onRequestClose:o,type:"danger",title:"Delete Enquiry",onCancel:o,onConfirm:async()=>{var e;t(!0);const n=await r(d({enquiry_id:null===l||void 0===l?void 0:l.enquiry_id}));var i,c,u,m;if(t(!1),!((null===(e=n.payload)||void 0===e?void 0:e.status)<300))return he("Unsuccessfully","danger",null===(i=n.payload)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.message);he("Successfully Deleted","success",null===(u=n.payload)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.message),o(),r(s(a))},confirmText:e?"Deleting...":"Confirm",confirmButtonColor:"red-600",children:(0,Y.jsx)("p",{children:"Are you sure you want to delete this Enquiry? This action cannot be undone."})})},ge={FOREIGN:{label:"Foreign",bgClass:"bg-emerald-100",textClass:"text-emerald-600"},DOMESTIC:{label:"Domestic",bgClass:"bg-pink-100",textClass:"text-pink-600"}},xe=e=>{let{row:t}=e;const{textTheme:a}=(0,b.A)(),n=(0,w.wA)();(0,q.Zp)();return(0,Y.jsxs)("div",{className:"flex justify-center gap-4 text-lg",children:[(0,Y.jsx)("span",{className:`cursor-pointer hover:${a}`,onClick:()=>{n(v(t)),n(x(!0))},children:(0,Y.jsx)(A.VUG,{})}),(0,Y.jsx)("span",{className:"cursor-pointer hover:text-red-500",onClick:()=>{n(v(t)),n(h(!0))},children:(0,Y.jsx)(A.yRo,{})})]})},fe=e=>{let{row:t}=e;const{textTheme:a}=(0,b.A)();return(0,Y.jsx)("div",{className:"items-center",children:(0,Y.jsx)(D.N_,{className:`hover:${a} font-semibold`,children:null===t||void 0===t?void 0:t.enq_number})})},je=()=>{const e=(0,w.wA)(),t=(0,w.d4)(e=>e.enquiry.data.enquiryList),a=(0,w.d4)(e=>e.enquiry.data.loading),r=[{header:"enq. number",accessorKey:"enq_number",cell:e=>{const t=e.row.original;return(0,Y.jsx)(fe,{row:t})}},{header:"customer",accessorKey:"",cell:e=>{var t;const a=e.row.original;return(0,Y.jsx)("div",{children:null===a||void 0===a||null===(t=a.Customer)||void 0===t?void 0:t.name})}},{header:"type",accessorKey:"enquiry_type",cell:e=>{var t,a,n;const r=e.row.original;return(0,Y.jsx)("div",{className:"mr-2",children:(0,Y.jsx)(N.vw,{className:`${null===(t=ge[null===r||void 0===r?void 0:r.enquiry_type])||void 0===t?void 0:t.bgClass} ${null===(a=ge[null===r||void 0===r?void 0:r.enquiry_type])||void 0===a?void 0:a.textClass} border-0`,children:null===(n=ge[null===r||void 0===r?void 0:r.enquiry_type])||void 0===n?void 0:n.label})})}},{header:"Person of contact name",accessorKey:"poc_name"},{header:"enquiry date",accessorKey:"enquiry_date",cell:e=>{const t=e.row.original;return(0,Y.jsx)("div",{className:"font-semibold",children:null===t||void 0===t?void 0:t.enquiry_date})}},{header:"action",accessorKey:"action",id:"t",cell:e=>{const t=e.row.original;return(0,Y.jsx)(xe,{row:t})}}],{pageIndex:l,pageSize:i,query:o,total:d}=(0,w.d4)(e=>e.enquiry.data.tableData),c=(0,n.useCallback)(()=>{e(s({pageIndex:l,pageSize:i,query:o}))},[l,i,o,e]);(0,n.useEffect)(()=>{c()},[c,l,i]);const m=(0,n.useMemo)(()=>({pageIndex:l,pageSize:i,query:o,total:d}),[l,i,o,d]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(S.A,{columns:r,data:t,loading:a,pagingData:{pageIndex:l,pageSize:i,query:o,total:d},onPaginationChange:t=>{const a=_()(m);a.pageIndex=t,e(u(a))},onSelectChange:t=>{const a=_()(m);a.pageSize=Number(t),a.pageIndex=1,e(u(a))}}),(0,Y.jsx)(ie,{}),(0,Y.jsx)(pe,{}),(0,Y.jsx)(ve,{})]})},we=()=>{const e=(0,w.wA)();(0,n.useRef)(),(0,w.d4)(e=>e.enquiry.data.tableData);return(0,Y.jsx)("div",{className:"md:flex items-center justify-end gap-2 mb-4",children:(0,Y.jsx)(N.$n,{size:"sm",variant:"solid",color:"purple-600",onClick:()=>{e(g(!0))},children:"Create Enquiry"})})};(0,r.Mh)("enquiry",j);const be=()=>(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(N.Zp,{className:"bg-purple-50",children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between","mb-3":!0,children:[(0,Y.jsx)("h3",{children:"Enquiry List"}),(0,Y.jsx)(we,{})]}),(0,Y.jsx)(je,{})]})})},83838:(e,t,a)=>{a.d(t,{F:()=>i,QM:()=>r,Y_:()=>l,dq:()=>o,lB:()=>s});var n=a(43971);async function r(e){return n.A.fetchData({url:"v1/web/company/enquiry/register",method:"post",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/enquiry/id",method:"post",data:e})}async function i(e){return n.A.fetchData({url:"v1/web/company/enquiry",method:"post",data:e})}async function o(e){return n.A.fetchData({url:"v1/web/company/enquiry/delete",method:"delete",data:e})}async function s(e){return n.A.fetchData({url:"v1/web/company/enquiry/update",method:"put",data:e})}},88705:(e,t,a)=>{a.d(t,{A:()=>q});var n=a(65043),r=a(98139),l=a.n(r),i=a(49934),o=a(70579);const{Tr:s,Td:d,TBody:c}=i.XI,u=e=>{const{columns:t,rows:a,avatarInColumns:n,avatarProps:r}=e;return(0,o.jsx)(c,{children:Array.from(new Array(a),(e,t)=>t+0).map(e=>(0,o.jsx)(s,{children:Array.from(new Array(t),(e,t)=>t+0).map(e=>(0,o.jsx)(d,{children:(0,o.jsxs)("div",{className:"flex flex-auto items-center gap-2",children:[n.includes(e)&&(0,o.jsx)("div",{children:(0,o.jsx)(i.EA,{variant:"circle",...r})}),(0,o.jsx)(i.EA,{})]})},`col-${e}`))},`row-${e}`))})};u.defaultProps={columns:1,rows:10,avatarInColumns:[]};const m=u;var y=a(6023),p=a(58931),h=a(47111);const{Tr:v,Th:g,Td:x,THead:f,TBody:j}=i.XI,w=e=>{const{indeterminate:t,onChange:a,onCheckBoxChange:r,onIndeterminateCheckBoxChange:l,...s}=e,d=(0,n.useRef)(null);(0,n.useEffect)(()=>{"boolean"===typeof t&&(d.current.indeterminate=!s.checked&&t)},[d,t]);return(0,o.jsx)(i.Sc,{className:"mb-0",ref:d,onChange:(e,t)=>(e=>{a(e),null===r||void 0===r||r(e),null===l||void 0===l||l(e)})(t),...s})},b=(0,n.forwardRef)((e,t)=>{const{skeletonAvatarColumns:a,columns:r,data:s,loading:d,onCheckBoxChange:c,onIndeterminateCheckBoxChange:u,onPaginationChange:b,onSelectChange:q,onSort:D,pageSizes:C,selectable:_,skeletonAvatarProps:S,pagingData:A,tableWidth:N="100%"}=e,{pageSize:z,pageIndex:E,total:I}=A,[P,R]=(0,n.useState)(null),k=(0,n.useMemo)(()=>C.map(e=>({value:e,label:`${e} / page`})),[C]);(0,n.useEffect)(()=>{if(Array.isArray(P)){const e=P.length>0?P[0].desc?"desc":"asc":"",t=P.length>0?P[0].id:"";null===D||void 0===D||D({order:e,key:t})}},[P]);const M=r.some(e=>e.Header||e.accessor||e.Cell),T=(0,n.useMemo)(()=>{const e=r.map(e=>({...e,size:e.size||void 0,minSize:e.minSize||100,maxSize:e.maxSize||300}));return _?[{id:"select",header:e=>{let{table:t}=e;return(0,o.jsx)(w,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:e=>{var a,n;a=e.target.checked,n=t.getRowModel().rows,d||null===u||void 0===u||u(a,n)}})},cell:e=>{let{row:t}=e;return(0,o.jsx)(w,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler(),onCheckBoxChange:e=>((e,t)=>{d||null===c||void 0===c||c(e,t)})(e.target.checked,t.original)})},size:50,minSize:50,maxSize:50},...e]:e},[r,_]),$=(0,p.N4)({data:s,columns:M?[]:T,getCoreRowModel:(0,h.HT)(),getFilteredRowModel:(0,h.hM)(),getPaginationRowModel:(0,h.kW)(),getSortedRowModel:(0,h.h5)(),manualPagination:!0,manualSorting:!0,onSortingChange:R,state:{sorting:P},columnResizeMode:"onChange"}),F=()=>{$.resetSorting()},B=()=>{$.toggleAllRowsSelected(!1)};if((0,n.useImperativeHandle)(t,()=>({resetSorting:F,resetSelected:B})),M){const e="You are using old react-table v7 column config, please use v8 column config instead, refer to our demo or https://tanstack.com/table/v8";return(0,o.jsx)(i.Fc,{children:e})}return(0,o.jsxs)(y.A,{loading:d&&0!==s.length,type:"cover",children:[(0,o.jsx)("div",{style:{width:N,overflowX:"auto"},children:(0,o.jsxs)(i.XI,{style:{width:"100%",tableLayout:"fixed"},children:[(0,o.jsx)(f,{children:$.getHeaderGroups().map(e=>(0,o.jsx)(v,{children:e.headers.map(e=>(0,o.jsx)(g,{colSpan:e.colSpan,style:{width:`${e.column.getSize()}px`},children:e.isPlaceholder?null:(0,o.jsx)("div",{className:l()(d&&"pointer-events-none"),children:(0,p.Kv)(e.column.columnDef.header,e.getContext())})},e.id))},e.id))}),d&&0===s.length?(0,o.jsx)(m,{columns:T.length,rows:A.pageSize,avatarInColumns:a,avatarProps:S}):(0,o.jsx)(j,{children:$.getRowModel().rows.slice(0,z).map(e=>(0,o.jsx)(v,{children:e.getVisibleCells().map(e=>(0,o.jsx)(x,{style:{width:`${e.column.getSize()}px`},children:(0,p.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,o.jsx)(i.dK,{pageSize:z,currentPage:E,total:I,onChange:e=>{d||null===b||void 0===b||b(e)}}),(0,o.jsx)("div",{style:{minWidth:130},children:(0,o.jsx)(i.l6,{size:"sm",menuPlacement:"top",isSearchable:!1,value:k.filter(e=>e.value===z),options:k,onChange:e=>{return t=e.value,void(d||null===q||void 0===q||q(Number(t)));var t}})})]})]})});b.defaultProps={pageSizes:[10,25,50,100],pagingData:{total:0,pageIndex:1,pageSize:10},data:[],columns:[],selectable:!1,loading:!1};const q=b},90642:(e,t,a)=>{a.d(t,{Ai:()=>s,Kz:()=>d,Wm:()=>u,ZS:()=>i,aQ:()=>m,eB:()=>o,jz:()=>r,k7:()=>l,lC:()=>c});var n=a(43971);async function r(){return n.A.fetchData({url:"v1/web/company/customer/statistic",method:"get"})}async function l(e){return n.A.fetchData({url:"v1/web/company/customer/update",method:"put",data:e})}async function i(e){return n.A.fetchData({url:"v1/web/company/customer/select",method:"get"})}async function o(e){return n.A.fetchData({url:"v1/web/company/customer/register",method:"post",data:e})}async function s(e){return n.A.fetchData({url:"v1/web/company/customer/update/id",method:"put",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/customer",method:"post",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/customer/details/id",method:"post",data:e})}async function u(){return n.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function m(e){return n.A.fetchData({url:"v1/web/company/customer/delete/id",method:"delete",data:e})}},98257:e=>{e.exports="object"===typeof self?self.FormData:window.FormData},99149:(e,t,a)=>{a.d(t,{Hx:()=>u,PD:()=>r,RU:()=>y,Sy:()=>l,dD:()=>s,ik:()=>i,j4:()=>d,jD:()=>o,qT:()=>c,th:()=>m});var n=a(43971);async function r(e){return n.A.fetchData({url:"v1/web/company/product/code/check",method:"post",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/product",method:"post",data:e})}async function i(e){return n.A.fetchData({url:"v1/web/company/product/register",method:"post",data:e})}async function o(e){return n.A.fetchData({url:"v1/web/company/product/update/id",method:"put",data:e})}async function s(e){return n.A.fetchData({url:"v1/web/company/product/delete/id",method:"delete",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/product/details/id",method:"post",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/product/drawing/select",method:"get"})}async function u(e){return n.A.fetchData({url:"v1/web/company/product/category/id",method:"post",data:e})}async function m(){return n.A.fetchData({url:"v1/web/company/product/itemCode/option",method:"get"})}async function y(e){return n.A.fetchData({url:"v1/web/company/product/option",method:"post",data:e})}}}]);
//# sourceMappingURL=1401.d7537cd1.chunk.js.map