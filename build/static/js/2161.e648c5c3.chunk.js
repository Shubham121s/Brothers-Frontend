"use strict";(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[2161],{6064:(e,i,t)=>{t.d(i,{EZ:()=>l,nL:()=>s,s2:()=>a,vZ:()=>o});var n=t(43971);async function s(e){return n.A.fetchData({url:"v1/web/company/customer/shipping-address/register",method:"post",data:e})}async function a(e){return n.A.fetchData({url:"v1/web/company/customer/shipping-address/delete",method:"delete",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/customer/shipping-address/update",method:"put",data:e})}async function o(e){return n.A.fetchData({url:"v1/web/company/customer/shipping-address/select/customer/id",method:"post",data:e})}},30505:(e,i,t)=>{t.d(i,{A:()=>o});var n=t(65043),s=t(48555),a=t.n(s),l=t(70579);const o=e=>{let{setContent:i,content:t,placeholder:s=""}=e;const o=(0,n.useRef)(null),d={readonly:!1,height:100,toolbar:!1,toolbarSticky:!1,placeholder:s,buttons:[],showCharsCounter:!1,showWordsCounter:!1,showXPathInStatusbar:!1,minHeight:"150px"};return(0,l.jsx)("div",{children:(0,l.jsx)(a(),{ref:o,value:t,config:d,onBlur:e=>i(e)})})}},60206:(e,i,t)=>{t.d(i,{XC:()=>o,gy:()=>a,oV:()=>l,x1:()=>s});var n=t(43971);async function s(e){return n.A.fetchData({url:"v1/web/company/customer/shipping-details/register",method:"post",data:e})}async function a(e){return n.A.fetchData({url:"v1/web/company/customer/shipping-details/delete",method:"delete",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/customer/shipping-details/update",method:"put",data:e})}async function o(e){return n.A.fetchData({url:"v1/web/company/customer/shipping-details/select/customer/id",method:"post",data:e})}},67600:(e,i,t)=>{t.d(i,{II:()=>f,L7:()=>D,NH:()=>_,Pp:()=>N,Ps:()=>s,Q$:()=>P,Q8:()=>y,RV:()=>l,TR:()=>A,Vf:()=>h,Wm:()=>O,XU:()=>d,c:()=>v,ef:()=>p,fd:()=>S,hv:()=>a,jd:()=>w,jt:()=>x,mF:()=>b,mj:()=>m,nT:()=>o,nd:()=>r,pW:()=>j,rQ:()=>L,rh:()=>c,uR:()=>g,xo:()=>u,z6:()=>I});var n=t(43971);async function s(e){return n.A.fetchData({url:"v1/web/company/po/Number/check",method:"post",data:e})}async function a(e){return n.A.fetchData({url:"v1/web/company/po/register",method:"post",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/po/update/id",method:"post",data:e})}async function o(e){return n.A.fetchData({url:"v1/web/company/po/delete/id",method:"delete",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/po/id",method:"post",data:e})}async function r(e){return n.A.fetchData({url:"v1/web/company/po",method:"post",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/po/dates",method:"post",data:e})}async function u(e){return n.A.fetchData({url:"v1/web/company/po/delivery/dates",method:"post",data:e})}async function h(e){return n.A.fetchData({url:"v1/web/company/po/accept/delivery/dates",method:"post",data:e})}async function p(e){return n.A.fetchData({url:"v1/web/company/po/raw/dates",method:"post",data:e})}async function v(e){return n.A.fetchData({url:"v1/web/company/po/machining/dates",method:"post",data:e})}async function m(e){return n.A.fetchData({url:"v1/web/company/po-list/id",method:"put",data:e})}async function x(e){return n.A.fetchData({url:"v1/web/company/po-list/list/id",method:"post",data:e})}async function g(e){return n.A.fetchData({url:"v1/web/company/po/select/customer/id",method:"post",data:e})}async function f(){return n.A.fetchData({url:"v1/web/company/po/Unique/number",method:"get"})}async function y(e){return n.A.fetchData({url:"v1/web/company/po/lists",method:"get",params:e})}async function j(e){return n.A.fetchData({url:"v1/web/company/po/number/po",method:"post",data:e})}async function D(){return n.A.fetchData({url:"v1/web/company/po/years",method:"get"})}async function b(e){return n.A.fetchData({url:"v1/web/company/po/months",method:"post",data:e})}async function _(e){return n.A.fetchData({url:"v1/web/company/po/month/dates",method:"post",data:e})}async function w(e){return n.A.fetchData({url:"v1/web/company/po/Number/po/option",method:"post",data:e})}async function A(e){return n.A.fetchData({url:"v1/web/company/po/poa/option",method:"post",data:e})}async function N(e){return n.A.fetchData({url:"v1/web/company/po-list/po/number",method:"post",data:e})}async function S(e){return n.A.fetchData({url:"v1/web/company/po-list/serial/number",method:"post",data:e})}async function I(e){return n.A.fetchData({url:"v1/web/company/po-list/attachment",method:"put",data:e})}async function L(e){return n.A.fetchData({url:"v1/web/company/po-list/attachment/delete",method:"put",data:e})}async function O(){return n.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function P(e){return n.A.fetchData({url:"v1/web/company/po-list/date/update",method:"post",data:e})}},82161:(e,i,t)=>{t.r(i),t.d(i,{default:()=>li});var n=t(65043),s=t(49934),a=t(80907),l=t(96396),o=t(90642),d=t(67600),r=(t(60206),t(6064));const c=(0,a.zD)("new/domestic/invoice/data/customer",async e=>{try{return await(0,o.ZS)(e)}catch(i){return null===i||void 0===i?void 0:i.response}}),u=(0,a.zD)("new/domestic/invoice/data/customer/address",async e=>{try{return await(0,r.vZ)(e)}catch(i){return null===i||void 0===i?void 0:i.response}}),h=(0,a.zD)("new/domestic/invoice/data/po/all",async e=>{try{return await(0,d.uR)(e)}catch(i){return null===i||void 0===i?void 0:i.response}}),p=(0,a.zD)("new/domestic/invoice/data/invoice/register",async e=>{try{return await(0,l.HH)(e)}catch(i){return null===i||void 0===i?void 0:i.response}}),v=(0,a.zD)("new/domestic/invoice/data/po/details",async e=>{try{return await(0,d.XU)(e)}catch(i){return null===i||void 0===i?void 0:i.response}}),m=(0,a.Z0)({name:"new/domestic/invoice/data",initialState:{customerList:[],poList:[],shippingAddressList:[],poDetails:{}},reducers:{},extraReducers:{[c.fulfilled]:(e,i)=>{var t;e.customerList=(null===(t=i.payload.data)||void 0===t?void 0:t.data)||[]},[c.pending]:(e,i)=>{e.customerList=[]},[h.fulfilled]:(e,i)=>{var t;e.poList=(null===(t=i.payload.data)||void 0===t?void 0:t.data)||[]},[h.pending]:(e,i)=>{e.poList=[]},[p.fulfilled]:e=>{},[u.fulfilled]:(e,i)=>{var t;e.shippingAddressList=(null===(t=i.payload.data)||void 0===t?void 0:t.data)||[]},[u.pending]:e=>{e.shippingAddressList=[]},[v.fulfilled]:(e,i)=>{var t;e.poDetails=(null===(t=i.payload.data)||void 0===t?void 0:t.data)||{}},[v.pending]:e=>{e.poDetails={}}}}).reducer;var x=t(79456),g=t(50805);const f=(0,a.Z0)({name:"new/foreign/invoice/state",initialState:{addDispatchItemDialog:{option:!1,locationIndex:null},deleteDispatchItemDialog:!1,newBoxDialog:!1,editBoxDialog:!1,deleteBoxDialog:!1,selectedBox:{},selectedDispatchItem:{}},reducers:{toggleAddDispatchItemDialog:(e,i)=>{e.addDispatchItemDialog=i.payload},toggleDeleteDispatchItemDialog:(e,i)=>{e.deleteDispatchItemDialog=i.payload},setSelectedDispatchItem:(e,i)=>{e.selectedDispatchItem=i.payload},toggleNewBoxDialog:(e,i)=>{e.newBoxDialog=i.payload},toggleDeleteBoxDialog:(e,i)=>{e.deleteBoxDialog=i.payload},toggleEditBoxDialog:(e,i)=>{e.editBoxDialog=i.payload},setSelectedBox:(e,i)=>{e.selectedBox=i.payload}}}),{setSelectedDispatchItem:y,toggleDeleteDispatchItemDialog:j,toggleAddDispatchItemDialog:D,setSelectedBox:b,toggleEditBoxDialog:_,toggleDeleteBoxDialog:w,toggleNewBoxDialog:A}=f.actions,N=f.reducer,S=(0,g.HY)({data:m,state:N});var I=t(24603),L=t(63516),O=t(80899),P=t(27176),C=t(56434),R=t.n(C),k=t(53536),q=t(70579);const F=e=>{const{errors:i,values:t,touched:a,customers:l=[],setFieldValue:o}=e,d=(0,x.wA)(),r=(0,n.useMemo)(()=>l.map(e=>({label:e.name,value:e})),[l]),c=(0,n.useCallback)(async()=>{null===o||void 0===o||o("DispatchShippingAddress",null),null===o||void 0===o||o("DispatchShippingDetails",null),t&&(d(h({customer_id:null===t||void 0===t?void 0:t.customer_id,currency_type:"INR"})),d(u({customer_id:(null===t||void 0===t?void 0:t.customer_id)||""})))},[t]);return(0,n.useEffect)(()=>{c()},[t]),(0,q.jsxs)(s.eI,{className:"mb-5 h-max",label:"Details of Receiver (Billed To)",invalid:i&&a,errorMessage:i,children:[(0,q.jsx)(L.D0,{name:"DispatchConsignee",children:e=>{let{field:i,form:n}=e;return(0,q.jsx)(s.l6,{field:i,form:n,options:r,value:r.filter(e=>{var i;return(null===(i=e.value)||void 0===i?void 0:i.customer_id)===(null===t||void 0===t?void 0:t.customer_id)}),onChange:e=>n.setFieldValue(i.name,e.value)})}}),(0,k.isEmpty)(t)?null:(0,q.jsxs)(s.Zp,{className:"mt-2",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Customer Code :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.customer_code)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Vender Code :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.vender_code)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Mobile :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.mobile)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Phone :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.phone)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Email :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.email)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"PAN No :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.pan)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"GST No :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.gst_no)||"-"})]})]})]})},T=(0,n.memo)(F),M=e=>{const{errors:i,values:t,touched:a,customers:l=[]}=e,o=(0,n.useMemo)(()=>l.map(e=>({label:e.name,value:e})),[l]);return(0,q.jsxs)(s.eI,{label:"Details of Recipient (Shipped To)",className:"mb-5 h-max",invalid:i&&a,errorMessage:i,children:[(0,q.jsx)(L.D0,{name:"DispatchBuyer",children:e=>{let{field:i,form:n}=e;return(0,q.jsx)(s.l6,{field:i,form:n,options:o,value:o.filter(e=>{var i;return(null===(i=e.value)||void 0===i?void 0:i.customer_id)===(null===t||void 0===t?void 0:t.customer_id)}),onChange:e=>n.setFieldValue(i.name,e.value)})}}),(0,k.isEmpty)(t)?null:(0,q.jsxs)(s.Zp,{className:"mt-2",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Customer Code :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.customer_code)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Vender Code :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.vender_code)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Mobile :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.mobile)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Phone :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.phone)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Email :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.email)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"PAN No :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.pan)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"GST No :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.gst_no)||"-"})]})]})]})},V=(0,n.memo)(M),B=e=>{const{errors:i,touched:t}=e;return(0,q.jsx)(s.eI,{className:"mb-0",invalid:i&&t,children:(0,q.jsx)(L.D0,{name:"invoice_date",children:e=>{let{field:i,form:t}=e;return(0,q.jsx)(s.lr,{style:{width:"160px"},placeholder:"Invoice Date",field:i,form:t,defaultValue:new Date,onChange:e=>{const n=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setFieldValue(i.name,n)}})}})})},E=(0,n.memo)(B),G=e=>{const{values:i,errors:t,touched:a}=e,l=(0,x.d4)(e=>{var i;return null===(i=e.new_domestic_invoice.data)||void 0===i?void 0:i.shippingAddressList}),o=(0,n.useMemo)(()=>l.map(e=>({label:e.address,value:e})),[l]);return console.log(i),(0,q.jsxs)(s.eI,{className:"mb-5 h-max",label:"Shipping Address",invalid:t&&a,errorMessage:t,children:[(0,q.jsx)(L.D0,{name:"DispatchShippingAddress",children:e=>{let{field:t,form:n}=e;return(0,q.jsx)(s.l6,{field:t,form:n,options:o,value:o.filter(e=>{var t;return(null===(t=e.value)||void 0===t?void 0:t.shipping_address_id)===(null===i||void 0===i?void 0:i.shipping_address_id)}),onChange:e=>n.setFieldValue(t.name,e.value)})}}),(0,k.isEmpty)(i)?null:(0,q.jsxs)(s.Zp,{className:"mt-2",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Country :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.country)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"State :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.state)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"City :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.city)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"ZIP Code :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.zip_code)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Contact Person :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.contact_person)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Contact Phone :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.contact_phone)||"-"})]})]})]})},H=(0,n.memo)(G),Z=e=>{const{values:i}=e;return(0,q.jsxs)(s.Zp,{className:"h-max",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Beneficiary :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.beneficiary_name)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Bank Name :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.bank_name)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Account No :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.account_no)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"IFSC Code :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.ifsc_code)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Swift Code :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.swift_code)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Bank Ad Code :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.bank_ad_code)||"-"})]})]})},Y=(0,n.memo)(Z),$=["BY ROAD","BY AIR"],K=["FROM DATE OF INVOICE"],z=[3,5,6,7,9,12,18,24],U=["IGST","GST","NON GST"],Q=e=>{const{values:i,errors:t,touched:n}=e,a=$.map(e=>({label:e,value:e}));return(0,q.jsx)(s.eI,{className:"mb-4",label:"Transport Mode",invalid:t&&n,errorMessage:t,children:(0,q.jsx)(L.D0,{name:"DispatchShippingAndOtherDetails.shipping_line",children:e=>{let{field:t,form:n}=e;return(0,q.jsx)(s.l6,{field:t,form:n,options:a,value:a.filter(e=>e.value===i),onChange:e=>n.setFieldValue(t.name,e.value)})}})})},W=(0,n.memo)(Q);var X=t(60446),J=t.n(X);const ee=e=>{const{errors:i,values:t,touched:a}=e,l=(0,x.d4)(e=>e.new_domestic_invoice.data.poList),o=(0,x.wA)(),d=(0,n.useMemo)(()=>null===l||void 0===l?void 0:l.map(e=>({label:e.number,value:e})),[l]);return(0,q.jsxs)(s.eI,{className:"mb-4",label:"PO Number",invalid:i&&a,errorMessage:i,children:[(0,q.jsx)(L.D0,{name:"Po",children:e=>{let{field:i,form:n}=e;return(0,q.jsx)(s.l6,{field:i,form:n,options:d,value:d.filter(e=>{var i;return(null===(i=e.value)||void 0===i?void 0:i.po_id)===(null===t||void 0===t?void 0:t.po_id)}),onChange:async e=>{var t;n.setFieldValue("PoList",null),n.setFieldValue(i.name,e.value),null!==(t=e.value)&&void 0!==t&&t.po_id&&await o(v({po_id:e.value.po_id}))}})}}),(0,k.isEmpty)(t)?null:(0,q.jsxs)(s.Zp,{className:"mt-2 bg-emerald-50",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"PO Number :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.number)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Currency Type :"})," ",(0,q.jsx)("span",{children:(null===t||void 0===t?void 0:t.currency_type)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"Po Date :"})," ",(0,q.jsx)("span",{children:J()(null===t||void 0===t?void 0:t.date).format("DD-MMM-YYYY")||"-"})]})]})]})},ie=(0,n.memo)(ee),te=e=>{var i,t,a,l;const{errors:o,values:d,Po:r,touched:c,dispatchList:u}=e,h=(0,x.d4)(e=>e.new_domestic_invoice.data.poDetails),p=(null===h||void 0===h||null===(i=h.PoLists)||void 0===i?void 0:i.find(e=>e.po_list_id===(null===d||void 0===d?void 0:d.po_list_id)))||d,v=(null===(t=u||[])||void 0===t||null===(a=t.flatMap(e=>e.poList))||void 0===a||null===(l=a.filter(e=>{var i;return(null===e||void 0===e||null===(i=e.PoList)||void 0===i?void 0:i.po_list_id)===(null===p||void 0===p?void 0:p.po_list_id)}))||void 0===l?void 0:l.reduce((e,i)=>e+parseInt(null===i||void 0===i?void 0:i.quantity),0))||0,m=Math.max(parseInt(null===p||void 0===p?void 0:p.quantity)-v,0),g=(0,n.useMemo)(()=>h&&h.PoLists?h.PoLists.map(e=>{var i;return{label:`${null===e||void 0===e?void 0:e.serial_number} : ${null===e||void 0===e||null===(i=e.Product)||void 0===i?void 0:i.name}`,value:e}}):[],[h]);return(0,q.jsxs)(s.eI,{className:"mb-4",label:"PO Serial Number",invalid:o&&c,errorMessage:o,children:[(0,q.jsx)(L.D0,{name:"PoList",children:e=>{let{field:i,form:t}=e;return(0,q.jsx)(s.l6,{field:i,form:t,options:g,value:g.filter(e=>{var i;return(null===(i=e.value)||void 0===i?void 0:i.po_list_id)===(null===d||void 0===d?void 0:d.po_list_id)}),onChange:e=>{t.setFieldValue("quantity",""),t.setFieldValue(i.name,e.value)}})}}),(0,k.isEmpty)(d)?null:(0,q.jsxs)(s.Zp,{className:"mt-2 bg-orange-50",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"PO Sr. No :"})," ",(0,q.jsx)("span",{children:(null===d||void 0===d?void 0:d.serial_number)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"PO Del Date :"})," ",(0,q.jsx)("span",{children:J()(null===d||void 0===d?void 0:d.delivery_date).format("DD-MMM-YYYY")||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsxs)("div",{children:[(0,q.jsx)("strong",{children:"Price :"})," ",(0,q.jsx)("span",{children:(null===d||void 0===d?void 0:d.unit_price)||"-"})]}),(0,q.jsxs)("div",{children:[(0,q.jsx)("strong",{children:"Qty :"})," ",(0,q.jsxs)("span",{children:[m," / ",(null===p||void 0===p?void 0:p.quantity)||"-"]})]})]})]})]})};var ne=t(93751);const se=e=>{var i,t,a;const{errors:l,values:o,touched:d,poList:r,dispatchList:c}=e,[u,h]=(0,n.useState)(o||0),p=(0,x.d4)(e=>e.new_domestic_invoice.data.poDetails),v=(null===p||void 0===p||null===(i=p.PoLists)||void 0===i?void 0:i.find(e=>e.po_list_id===(null===r||void 0===r?void 0:r.po_list_id)))||r,m=(null===(t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===e||void 0===e?void 0:e.reduce((e,i)=>null===e||void 0===e?void 0:e.concat(i.poList),[])}(c))||void 0===t||null===(a=t.filter(e=>{var i;return(null===e||void 0===e||null===(i=e.PoList)||void 0===i?void 0:i.po_list_id)===(null===v||void 0===v?void 0:v.po_list_id)}))||void 0===a||a.reduce((e,i)=>e+parseInt(null===i||void 0===i?void 0:i.quantity),0),(null===v||void 0===v?void 0:v.pending_quantity)||0),[g,f]=(0,n.useState)(m);return(0,n.useEffect)(()=>{f((null===v||void 0===v?void 0:v.pending_quantity)||0)},[r,c,v]),(0,q.jsx)(s.eI,{label:"Quantity",className:"mb-4",invalid:l&&d,errorMessage:l,children:(0,q.jsx)(L.D0,{name:"quantity",children:e=>{let{field:i,form:t}=e;return(0,q.jsxs)("div",{className:"grid grid-cols-4 gap-1",children:[(0,q.jsx)("div",{className:"col-span-1",children:(0,q.jsx)(s.$n,{className:"w-full",style:{borderRadius:"5px 0px 0px 5px"},type:"button",icon:(0,q.jsx)(ne.GRP,{}),disabled:o<1,onClick:()=>{h(+parseInt(u||0)-1),t.setFieldValue(i.name,+parseInt(o||0)-1)}})}),(0,q.jsxs)("div",{className:"col-span-2 grid grid-cols-2 gap-1",children:[(0,q.jsx)(s.Zp,{className:"flex justify-center items-center",bodyClass:"p-0 flex justify-center item-center",children:g}),(0,q.jsx)(s.pd,{className:"w-full",field:i,form:t,type:"number",autoComplete:"off",value:u||"",min:0,max:g,onChange:e=>{let n=parseInt(e.target.value);(isNaN(n)||n<0)&&(n=0),n>g&&(n=g),h(n),t.setFieldValue(i.name,n)},disabled:0===g})]}),r&&r.po_list_id&&0===g&&(0,q.jsx)("div",{className:"col-span-4 text-red-500 text-center",children:"No pending quantity left for this item."}),(0,q.jsx)("div",{className:"col-span-1",children:(0,q.jsx)(s.$n,{className:"w-full",style:{borderRadius:"0px 5px 5px 0px"},disabled:u===g,icon:(0,q.jsx)(ne.s00,{}),type:"button",onClick:()=>{t.setFieldValue(i.name,+parseInt(u||0)+1),h(+parseInt(u||0)+1)}})})]})}})})},ae=(0,n.memo)(se),le=e=>{const{quantity:i=0,row_charges:t=0,machining_charges:n=0,currency:a,unitPrice:l=0}=e;return(0,q.jsx)(s.eI,{label:"Total Amount",className:"mb-4",children:(0,q.jsx)(L.D0,{disabled:!0,placeholder:"Total Amount",prefix:a,value:(Number(l)*Number(i)+Number(t)+Number(n)).toFixed(2),component:s.pd})})},oe=(0,n.memo)(le);var de=t(30505);const re=O.Ik().shape({PoList:O.Ik().required("Required"),Po:O.Ik().required("Required"),quantity:O.ai().required("Required"),row_charges:O.ai().required("Required"),machining_charges:O.ai().required("Required")}),ce=(0,n.forwardRef)((e,i)=>{const{initialData:t,onDiscard:a,boxes:l=[],handleFormSubmit:o,type:d,dispatchList:r}=e,[c,u]=(0,n.useState)("");return(0,q.jsx)(L.l1,{innerRef:i,initialValues:{...t},validationSchema:re,onSubmit:e=>{null===o||void 0===o||o({...e,remarks:c.replace(/<p><br><\/p>/g,"")}),u("")},children:e=>{var i,t;let{values:n,touched:l,errors:o,setFieldValue:h}=e;return(0,q.jsx)(L.lV,{children:(0,q.jsxs)(s.MG,{children:[(0,q.jsxs)("h4",{children:["new"===d?"Add":"Update"," Item Information"]}),(0,q.jsx)("p",{className:"mb-3",children:"Section to config add item information"}),(0,q.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,q.jsx)(ie,{errors:o.Po,touched:l.Po,values:n.Po}),(0,q.jsx)(te,{errors:o.PoList,touched:l.PoList,values:n.PoList,Po:n.Po}),(0,q.jsx)(ae,{dispatchList:r,errors:o.quantity,touched:l.quantity,values:n.quantity,setFieldValue:h,poList:n.PoList}),(0,q.jsx)(oe,{currency:null===(i=n.Po)||void 0===i?void 0:i.po_currency_type,unitPrice:null===(t=n.PoList)||void 0===t?void 0:t.unit_price,quantity:n.quantity,row_charges:n.row_charges,machining_charges:n.machining_charges})]}),(0,q.jsx)("div",{className:"mt-3 mb-3",children:(0,q.jsx)(de.A,{content:c,setContent:u,placeholder:"Add Product Remarks"})}),(0,q.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,q.jsx)(s.$n,{size:"sm",type:"button",variant:"",onClick:()=>null===a||void 0===a?void 0:a(),children:"Discard"}),(0,q.jsxs)(s.$n,{size:"sm",variant:"solid",type:"submit",children:["new"===d?"Add":"Update"," Item"]})]})]})})}})});ce.defaultProps={initialData:{Po:null,quantity:0,PoList:null,weight:"",box_no:"",row_charges:0,machining_charges:0}};const ue=ce,he=e=>{const{boxes:i=[],locationIndex:t,setFieldValue:n,dispatchList:a=[],addNewItemInPoList:l,type:o="new"}=e,d=(0,x.wA)(),r=(0,x.d4)(e=>e.new_domestic_invoice.state.addDispatchItemDialog),c=()=>{d(D({option:!1,locationIndex:null}))};return(0,q.jsx)(s.lG,{isOpen:r.option&&t===r.locationIndex,onClose:c,onRequestClose:c,children:(0,q.jsx)(ue,{boxes:i,type:"new",dispatchList:a,handleFormSubmit:async e=>{var i;var o,d,r;if(null===(i=a[t])||void 0===i?void 0:i.poList.find(i=>{var t,n,s,a;if((null===i||void 0===i||null===(t=i.Po)||void 0===t?void 0:t.number)===(null===e||void 0===e||null===(n=e.Po)||void 0===n?void 0:n.number)&&(null===i||void 0===i||null===(s=i.PoList)||void 0===s?void 0:s.po_list_id)===(null===e||void 0===e||null===(a=e.PoList)||void 0===a?void 0:a.po_list_id))return i}))return((e,i,t)=>s.y8.push((0,q.jsx)(s.Eg,{title:t,type:i,duration:2500,children:e}),{placement:"top-center"}))(`PO ${null===e||void 0===e||null===(o=e.Po)||void 0===o?void 0:o.number} and ${null===e||void 0===e||null===(d=e.PoList)||void 0===d||null===(r=d.Product)||void 0===r?void 0:r.name} Already Added You Can Edit it.`,"danger","Error");null===l||void 0===l||l(a,e,t,n),c()},onDiscard:c})})},pe=(0,n.memo)(he);var ve=t(58931),me=t(47111);t(95799);const{Tr:xe,Th:ge,Td:fe,THead:ye,TBody:je,TFoot:De}=s.XI,be=e=>{const{dispatchList:i,handleDeleteItemInPoList:t,setFieldValue:n,locationIndex:s,index:a}=e;return(0,q.jsx)("div",{className:"flex justify-center text-lg gap-x-4",children:(0,q.jsx)("span",{className:"cursor-pointer hover:text-red-500",onClick:()=>{null===t||void 0===t||t(i,s,n,a)},children:(0,q.jsx)(ne.yRo,{})})})},_e=e=>{let{initialData:i=[],locationIndex:t,dispatchList:a,handleDeleteItemInPoList:l,setFieldValue:o}=e;const d=(0,n.useMemo)(()=>[{header:"POs details & Delivery Date",columns:[{header:"po no & sr no",accessorKey:"PoList",cell:e=>{var i;const t=e.row.original;return(0,q.jsx)("div",{className:"uppercase text-center",children:`${null===t||void 0===t?void 0:t.Po.number}-${null===t||void 0===t||null===(i=t.PoList)||void 0===i?void 0:i.serial_number}`})}},{header:"Delivery Date",accessorKey:"delivery_date",cell:e=>{var i;const t=e.row.original;return(0,q.jsx)("div",{className:"uppercase text-center",children:J()(null===t||void 0===t||null===(i=t.PoList)||void 0===i?void 0:i.delivery_date).format("DD-MM-YYYY")})}}]},{header:"Description of goods",columns:[{header:"product name",accessorKey:"name",cell:e=>{var i,t;const n=e.row.original;return(0,q.jsxs)("div",{className:"uppercase text-center",children:[null===n||void 0===n||null===(i=n.PoList)||void 0===i||null===(t=i.Product)||void 0===t?void 0:t.name,(0,q.jsx)("div",{className:"flex justify-center",children:(0,q.jsx)("div",{dangerouslySetInnerHTML:{__html:(null===n||void 0===n?void 0:n.remarks)||""}})})]})}},{header:"item code",accessorKey:"item_code",cell:e=>{var i,t;const n=e.row.original;return(0,q.jsx)("div",{className:"uppercase text-center",children:null===n||void 0===n||null===(i=n.PoList)||void 0===i||null===(t=i.Product)||void 0===t?void 0:t.item_code})}},{header:"hsn code",accessorKey:"hsn_code",cell:e=>{var i,t;const n=e.row.original;return(0,q.jsx)("div",{className:"uppercase text-center",children:null===n||void 0===n||null===(i=n.PoList)||void 0===i||null===(t=i.Product)||void 0===t?void 0:t.hsn_code})}},{header:"GST(%)",accessorKey:"gst_percentage",cell:e=>{var i,t;const n=e.row.original;return(0,q.jsx)("div",{className:"uppercase text-center",children:(null===n||void 0===n||null===(i=n.PoList)||void 0===i||null===(t=i.Product)||void 0===t?void 0:t.gst_percentage)||0})}}]},{header:"qty (No) & amount (INR)",columns:[{header:"qty",accessorKey:"PoList.quantity",cell:e=>{const i=e.row.original;return(0,q.jsx)("div",{className:"uppercase text-center",children:null===i||void 0===i?void 0:i.quantity})}},{header:"rate",accessorKey:"unit_price",cell:e=>{var i;const t=e.row.original;return(0,q.jsx)("div",{className:"uppercase text-center",children:Number(null===t||void 0===t||null===(i=t.PoList)||void 0===i?void 0:i.unit_price).toFixed(2)})}},{header:"total",accessorKey:"net_amount",cell:e=>{var i;const t=e.row.original,n=(null===t||void 0===t?void 0:t.row_charges)||0,s=(null===t||void 0===t?void 0:t.machining_charges)||0,a=(null===t||void 0===t||null===(i=t.PoList)||void 0===i?void 0:i.unit_price)*(null===t||void 0===t?void 0:t.quantity)+n+s;return(0,q.jsx)("div",{className:"uppercase text-center",children:Number(a).toFixed(2)})}}]},{header:"-",columns:[{header:"",accessorKey:"action",cell:e=>{const{index:i}=e.row;return(0,q.jsx)(be,{index:i,locationIndex:t,setFieldValue:o,dispatchList:a,handleDeleteItemInPoList:l})}}]}],[i,o,l,a]),r=(0,ve.N4)({data:i,columns:d,getCoreRowModel:(0,me.HT)()});return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(s.XI,{compact:!0,children:[(0,q.jsx)(ye,{children:r.getHeaderGroups().map(e=>(0,q.jsx)(xe,{children:e.headers.map(e=>(0,q.jsx)(ge,{style:{border:".5px solid #e0e0e0",textAlign:"center"},className:"select-none",colSpan:e.colSpan,children:(0,ve.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,q.jsx)(je,{children:r.getRowModel().rows.map(e=>(0,q.jsx)(xe,{children:e.getVisibleCells().map(e=>(0,q.jsx)(fe,{style:{border:".5px solid #e0e0e0"},className:"select-none",children:(0,ve.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})})},we=(0,n.memo)(_e),Ae=e=>{const{index:i,errors:t,touched:a,setFieldValue:l}=e,[o,d]=(0,L.Mt)({name:`DispatchList[${i}].location_code`}),[r,c]=(0,n.useState)(o.value),u=()=>{l(`DispatchList[${i}].location_code`,r)};return(0,q.jsx)(s.eI,{className:"mb-0",invalid:t&&a,errorMessage:t,children:(0,q.jsx)(L.D0,{name:o.name,children:e=>{let{field:i,form:t}=e;return(0,q.jsx)(s.pd,{form:t,field:i,placeholder:"Location Code",size:"sm",value:r,className:"uppercase",onBlur:u,onChange:e=>{c(e.target.value)}})}})})},Ne=(0,n.memo)(Ae),Se=e=>{const{values:i}=e;return(0,q.jsxs)(s.Zp,{className:"h-max mb-2",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"GSTIN :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.gstin)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"PAN :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.pan)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"STATE :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.state)||"-"})]}),(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("strong",{children:"STATE CODE :"})," ",(0,q.jsx)("span",{children:(null===i||void 0===i?void 0:i.state_code)||"-"})]})]})},Ie=(0,n.memo)(Se),Le=e=>{const{errors:i,values:t,touched:n}=e,a=K.map(e=>({label:e,value:e}));return(0,q.jsx)(s.eI,{className:"mb-4",label:"Payment Terms",invalid:i&&n,errorMessage:i,children:(0,q.jsx)(L.D0,{name:"DispatchShippingAndOtherDetails.payment_term",children:e=>{let{field:i,form:n}=e;return(0,q.jsx)(s.l6,{field:i,form:n,options:a,value:a.filter(e=>e.value===t),onChange:e=>n.setFieldValue(i.name,e.value)})}})})},Oe=(0,n.memo)(Le),Pe=e=>{const{errors:i,touched:t}=e;return(0,q.jsx)(s.eI,{className:"mb-4",label:"Vehicle No",invalid:i&&t,errorMessage:i,children:(0,q.jsx)(L.D0,{placeholder:"Vehicle Number",name:"DispatchShippingAndOtherDetails.vehicle_no",component:s.pd})})},Ce=(0,n.memo)(Pe),Re=e=>{const{errors:i,touched:t}=e;return(0,q.jsx)(s.eI,{className:"mb-4",label:"Remark",invalid:i&&t,errorMessage:i,children:(0,q.jsx)(L.D0,{component:s.pd,name:"DispatchShippingAndOtherDetails.remark",placeholder:"Remarks"})})},ke=(0,n.memo)(Re),qe=e=>{const{errors:i,touched:t}=e;return(0,q.jsx)(s.eI,{className:"mb-4",label:"E-Way Bill No",invalid:i&&t,errorMessage:i,children:(0,q.jsx)(L.D0,{component:s.pd,name:"DispatchShippingAndOtherDetails.e_way_bill_no",placeholder:"E-Way Bill No"})})},Fe=(0,n.memo)(qe),Te=e=>{const{errors:i,values:t,touched:n}=e,a=U.map(e=>({label:e,value:e}));return(0,q.jsx)(s.eI,{className:"mb-4",label:"Bill Type",invalid:i&&n,errorMessage:i,children:(0,q.jsx)(L.D0,{name:"DispatchShippingAndOtherDetails.bill_type",children:e=>{let{field:i,form:n}=e;return(0,q.jsx)(s.l6,{field:i,form:n,options:a,value:a.filter(e=>e.value===t),onChange:e=>{n.setFieldValue(i.name,e.value),n.setFieldValue("DispatchShippingAndOtherDetails.c_gst",""),n.setFieldValue("DispatchShippingAndOtherDetails.s_gst",""),n.setFieldValue("DispatchShippingAndOtherDetails.i_gst","")}})}})})},Me=(0,n.memo)(Te),Ve=e=>{const{errors:i,values:t,touched:n}=e,a=z.map(e=>({label:`${e} %`,value:e}));return(0,q.jsx)(s.eI,{className:"mb-4",label:"CGST",invalid:i&&n,errorMessage:i,children:(0,q.jsx)(L.D0,{name:"DispatchShippingAndOtherDetails.c_gst",children:e=>{let{field:i,form:n}=e;return(0,q.jsx)(s.l6,{field:i,form:n,options:a,value:a.filter(e=>e.value===t),onChange:e=>n.setFieldValue(i.name,e.value)})}})})},Be=(0,n.memo)(Ve),Ee=e=>{const{errors:i,values:t,touched:n}=e,a=z.map(e=>({label:`${e} %`,value:e}));return(0,q.jsx)(s.eI,{className:"mb-4",label:"IGST",invalid:i&&n,errorMessage:i,children:(0,q.jsx)(L.D0,{name:"DispatchShippingAndOtherDetails.i_gst",children:e=>{let{field:i,form:n}=e;return(0,q.jsx)(s.l6,{field:i,form:n,options:a,value:a.filter(e=>e.value===t),onChange:e=>n.setFieldValue(i.name,e.value)})}})})},Ge=(0,n.memo)(Ee),He=e=>{const{errors:i,values:t,touched:n}=e,a=z.map(e=>({label:`${e} %`,value:e}));return(0,q.jsx)(s.eI,{className:"mb-4",label:"SGST",invalid:i&&n,errorMessage:i,children:(0,q.jsx)(L.D0,{name:"DispatchShippingAndOtherDetails.s_gst",children:e=>{let{field:i,form:n}=e;return(0,q.jsx)(s.l6,{field:i,form:n,options:a,value:a.filter(e=>e.value===t),onChange:e=>n.setFieldValue(i.name,e.value)})}})})},Ze=(0,n.memo)(He),Ye=e=>{const{errors:i,touched:t,debouncedHandleCheck:n,isPOExist:a=!1,values:l="",handleChange:o}=e;return(0,q.jsx)(s.eI,{className:"mb-0 h-max",label:"",invalid:i&&t,errorMessage:i,children:(0,q.jsx)(L.D0,{name:"invoice_no",placeholder:"Invoice No.",component:s.pd,onChange:e=>{o(e),n(e)}})})},$e=(0,n.memo)(Ye),Ke=e=>{const{errors:i,touched:t}=e;return(0,q.jsx)(s.eI,{className:"mb-4",label:"P & F CHARGES",children:(0,q.jsx)(L.D0,{component:s.pd,name:"DispatchShippingAndOtherDetails.packing_charges",placeholder:"P & F CHARGES"})})},ze=(0,n.memo)(Ke),Ue=e=>{const{errors:i,touched:t}=e;return(0,q.jsx)(s.eI,{className:"mb-4",label:"OTHER CHARGES",children:(0,q.jsx)(L.D0,{component:s.pd,name:"DispatchShippingAndOtherDetails.other_charges",placeholder:"OTHER CHARGES",error:t&&i?i:void 0})})},Qe=(0,n.memo)(Ue),We=e=>{const{errors:i,touched:t}=e;return(0,q.jsx)(s.eI,{className:"mb-4",label:"FREIGHT CHARGES",children:(0,q.jsx)(L.D0,{component:s.pd,name:"DispatchShippingAndOtherDetails.fright_charges",placeholder:"FREIGHT CHARGES"})})},Xe=(0,n.memo)(We);var Je=!1;const ei=O.Ik().shape({DispatchConsignee:O.Ik().required("Required"),invoice_no:O.Yj().required("Required").test("isInvoiceNumberExist","Invoice Number Already Exists",function(e){return!Je||this.createError({message:"Invoice Number Already Exists"})}),DispatchBuyer:O.Ik().required("Required"),DispatchShippingAddress:O.Ik().required("Required"),DispatchList:O.YO(O.Ik({location_code:O.Yj().test((e,i)=>1===i.options.context.DispatchList.length||(void 0!==e&&null!==e&&""!==e||i.createError({message:"Required"})))})),DispatchCompanyDetails:O.Ik().shape({gstin:O.Yj().required("Required")}),invoice_date:O.p6().required("Required"),DispatchBankDetails:O.Ik().required("Required"),DispatchShippingAndOtherDetails:O.Ik().shape({payment_term:O.Yj().required("Required"),shipping_line:O.Yj().required("Required"),bill_type:O.Yj().required("Required"),c_gst:O.ai().test((e,i)=>{var t;return"GST"!==(null===(t=i.parent)||void 0===t?void 0:t.bill_type)||(!!e||i.createError({message:"Required"}))}),s_gst:O.ai().test((e,i)=>{var t;return"GST"!==(null===(t=i.parent)||void 0===t?void 0:t.bill_type)||(!!e||i.createError({message:"Required"}))}),i_gst:O.ai().test((e,i)=>{var t;return"IGST"!==(null===(t=i.parent)||void 0===t?void 0:t.bill_type)||(!!e||i.createError({message:"Required"}))})})}),ii=(0,n.forwardRef)((e,i)=>{const t=(0,x.wA)(),{initialData:a,onFormSubmit:o,customers:d=[],pushNotification:r,type:c="new"}=e,u=function(){let e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((i,t)=>t!==e);null===i||void 0===i||i("DispatchList",t)},h=(e,i,t,n)=>{n("DispatchList",[...e.slice(0,t),{...e[t],poList:[...e[t].poList,i]},...e.slice(t+1)])},p=function(){let e=arguments.length>1?arguments[1]:void 0;const i=[...arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{location_code:"",poList:[]}];null===e||void 0===e||e("DispatchList",i)},v=(e,i,t,n)=>{const s=[...e].map((e,t)=>t===i?{...e,poList:e.poList.filter((e,i)=>i!==n)}:e);null===t||void 0===t||t("DispatchList",s)},m=(0,k.debounce)(async e=>{try{200===(await(0,l.nV)({invoice_no:e.target.value})).status&&(Je=!1)}catch(i){Je=!0}},500);return(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(n.Suspense,{fallback:(0,q.jsx)(P.Rh,{loading:!0}),children:(0,q.jsx)(L.l1,{enableReinitialize:!0,innerRef:i,initialValues:{...a,DispatchShippingAddress:null===a||void 0===a?void 0:a.DispatchShippingAddress},validationSchema:ei,onSubmit:(e,i)=>{let{setSubmitting:t}=i;if(e.DispatchList.filter(e=>0===e.poList.length).length>0)return t(!1),null===r||void 0===r?void 0:r("Add items in list","danger","Required");const n=R()({...e});null===o||void 0===o||o(n,t)},children:e=>{var i,n,a,l,o,r,x,g,f,y,j,b,_,w,A,N,S,I,O,C,R,k,F,M,B,G,Z,$,K,z,U,Q;let{values:X,touched:J,errors:ee,setFieldValue:ie,isSubmitting:te,handleChange:ne}=e;return console.log(X),(0,q.jsx)(L.lV,{children:(0,q.jsxs)(s.MG,{children:[(0,q.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,q.jsxs)(s.Zp,{className:"bg-yellow-50 h-max",bodyClass:"pb-0",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsxs)("span",{children:[(0,q.jsx)("h5",{className:"font-semibold text-gray-700",children:"Receiver & Recipient Informations"}),(0,q.jsx)("p",{className:"mb-2",children:"Section to config receiver & recipient information"})]}),(0,q.jsx)(E,{touched:null===J||void 0===J?void 0:J.invoice_date,errors:null===ee||void 0===ee?void 0:ee.invoice_date})]}),(0,q.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,q.jsx)(T,{touched:null===J||void 0===J?void 0:J.DispatchConsignee,errors:null===ee||void 0===ee?void 0:ee.DispatchConsignee,values:null===X||void 0===X?void 0:X.DispatchConsignee,customers:d,setFieldValue:ie}),(0,q.jsx)(V,{touched:null===J||void 0===J?void 0:J.DispatchBuyer,errors:null===ee||void 0===ee?void 0:ee.DispatchBuyer,values:null===X||void 0===X?void 0:X.DispatchBuyer,customers:d})]})]}),(0,q.jsxs)(s.Zp,{className:"bg-blue-50 h-max",bodyClass:"pb-0",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsxs)("span",{children:[(0,q.jsx)("h5",{className:"font-semibold text-gray-700",children:"Shipping & Transport Information"}),(0,q.jsx)("p",{className:"mb-2",children:"Section to config shipping & transport information"})]}),(0,q.jsx)($e,{touched:null===J||void 0===J?void 0:J.invoice_no,errors:null===ee||void 0===ee?void 0:ee.invoice_no,debouncedHandleCheck:m,isInvoiceNumberExist:Je,handleChange:ne})]}),(0,q.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,q.jsx)(H,{touched:null===J||void 0===J?void 0:J.DispatchShippingAddress,errors:null===ee||void 0===ee?void 0:ee.DispatchShippingAddress,values:null===X||void 0===X?void 0:X.DispatchShippingAddress}),(0,q.jsxs)("div",{className:"h-full",children:[(0,q.jsx)(Oe,{errors:null===ee||void 0===ee||null===(i=ee.DispatchShippingAndOtherDetails)||void 0===i?void 0:i.payment_term,touched:null===J||void 0===J||null===(n=J.DispatchShippingAndOtherDetails)||void 0===n?void 0:n.payment_term,values:null===X||void 0===X||null===(a=X.DispatchShippingAndOtherDetails)||void 0===a?void 0:a.payment_term}),(0,q.jsx)(W,{touched:null===J||void 0===J||null===(l=J.DispatchShippingAndOtherDetails)||void 0===l?void 0:l.shipping_line,errors:null===ee||void 0===ee||null===(o=ee.DispatchShippingAndOtherDetails)||void 0===o?void 0:o.shipping_line,values:null===X||void 0===X||null===(r=X.DispatchShippingAndOtherDetails)||void 0===r?void 0:r.shipping_line}),(0,q.jsx)(Ce,{touched:null===J||void 0===J||null===(x=J.DispatchShippingAndOtherDetails)||void 0===x?void 0:x.vehicle_no,errors:null===ee||void 0===ee||null===(g=ee.DispatchShippingAndOtherDetails)||void 0===g?void 0:g.vehicle_no,values:null===X||void 0===X||null===(f=X.DispatchShippingAndOtherDetails)||void 0===f?void 0:f.vehicle_no})]})]})]}),(0,q.jsxs)(s.Zp,{className:"bg-blue-50 h-max",children:[(0,q.jsx)("h5",{className:"font-semibold text-gray-700",children:"Bank & Company Information"}),(0,q.jsx)("p",{className:"mb-2",children:"Section to config shipping & other information"}),(0,q.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,q.jsx)(Y,{touched:null===J||void 0===J?void 0:J.DispatchBankDetails,errors:null===ee||void 0===ee?void 0:ee.DispatchBankDetails,values:null===X||void 0===X?void 0:X.DispatchBankDetails}),(0,q.jsx)(Ie,{values:null===X||void 0===X?void 0:X.DispatchCompanyDetails})]})]}),(0,q.jsxs)(s.Zp,{className:"bg-blue-50 h-max",children:[(0,q.jsx)("h5",{className:"font-semibold text-gray-700",children:"GST & Other Information"}),(0,q.jsx)("p",{className:"mb-2",children:"Section to config GST & other information"}),(0,q.jsxs)("div",{className:"grid gap-2 md:grid-cols-5",children:[(0,q.jsxs)("div",{className:""+("IGST"===(null===X||void 0===X||null===(y=X.DispatchShippingAndOtherDetails)||void 0===y?void 0:y.bill_type)?"col-span-2 grid gap-2 grid-cols-2":"GST"===(null===X||void 0===X||null===(j=X.DispatchShippingAndOtherDetails)||void 0===j?void 0:j.bill_type)?"md:col-span-3 grid md:grid-cols-3 gap-2":"col-span-2"),children:[(0,q.jsx)(Me,{errors:null===ee||void 0===ee||null===(b=ee.DispatchShippingAndOtherDetails)||void 0===b?void 0:b.bill_type,touched:null===J||void 0===J||null===(_=J.DispatchShippingAndOtherDetails)||void 0===_?void 0:_.bill_type,values:null===X||void 0===X||null===(w=X.DispatchShippingAndOtherDetails)||void 0===w?void 0:w.bill_type}),"IGST"===(null===X||void 0===X||null===(A=X.DispatchShippingAndOtherDetails)||void 0===A?void 0:A.bill_type)?(0,q.jsx)(Ge,{errors:null===ee||void 0===ee||null===(N=ee.DispatchShippingAndOtherDetails)||void 0===N?void 0:N.i_gst,touched:null===J||void 0===J||null===(S=J.DispatchShippingAndOtherDetails)||void 0===S?void 0:S.i_gst,values:null===X||void 0===X||null===(I=X.DispatchShippingAndOtherDetails)||void 0===I?void 0:I.i_gst}):"GST"===(null===X||void 0===X||null===(O=X.DispatchShippingAndOtherDetails)||void 0===O?void 0:O.bill_type)?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(Ze,{errors:null===ee||void 0===ee||null===(C=ee.DispatchShippingAndOtherDetails)||void 0===C?void 0:C.s_gst,touched:null===J||void 0===J||null===(R=J.DispatchShippingAndOtherDetails)||void 0===R?void 0:R.s_gst,values:null===X||void 0===X||null===(k=X.DispatchShippingAndOtherDetails)||void 0===k?void 0:k.s_gst}),(0,q.jsx)(Be,{errors:null===ee||void 0===ee||null===(F=ee.DispatchShippingAndOtherDetails)||void 0===F?void 0:F.c_gst,touched:null===J||void 0===J||null===(M=J.DispatchShippingAndOtherDetails)||void 0===M?void 0:M.c_gst,values:null===X||void 0===X||null===(B=X.DispatchShippingAndOtherDetails)||void 0===B?void 0:B.c_gst})]}):null]}),(0,q.jsx)("div",{className:""+("IGST"===(null===X||void 0===X||null===(G=X.DispatchShippingAndOtherDetails)||void 0===G?void 0:G.bill_type)?"md:col-span-3":"GST"===(null===X||void 0===X||null===(Z=X.DispatchShippingAndOtherDetails)||void 0===Z?void 0:Z.bill_type)?"col-span-2":"md:col-span-3"),children:(0,q.jsx)(Fe,{errors:null===ee||void 0===ee||null===($=ee.DispatchShippingAndOtherDetails)||void 0===$?void 0:$.e_way_bill,touched:null===J||void 0===J||null===(K=J.DispatchShippingAndOtherDetails)||void 0===K?void 0:K.e_way_bill})})]}),(0,q.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,q.jsx)(ze,{}),(0,q.jsx)(Xe,{}),(0,q.jsx)(Qe,{})]}),(0,q.jsx)(ke,{errors:null===ee||void 0===ee||null===(z=ee.DispatchShippingAndOtherDetails)||void 0===z?void 0:z.remark,touched:null===J||void 0===J||null===(U=J.DispatchShippingAndOtherDetails)||void 0===U?void 0:U.remark})]})]}),(0,q.jsx)(s.Zp,{className:"my-4",children:null===X||void 0===X||null===(Q=X.DispatchList)||void 0===Q?void 0:Q.map((e,i)=>{var n,a,l,o,d,r,m;return(0,q.jsxs)("div",{className:(null===X||void 0===X||null===(n=X.DispatchList)||void 0===n?void 0:n.length)-1===i?"":"mb-5",children:[(0,q.jsxs)("div",{className:"flex justify-between",children:[0===i?(0,q.jsxs)("div",{children:[(0,q.jsx)("h5",{className:"font-semibold text-gray-700",children:"POs Information"}),(0,q.jsx)("p",{className:"mb-3",children:"Section to config POs list information"})]}):(0,q.jsx)("div",{}),(0,q.jsxs)("div",{className:"flex gap-2 justify-end mb-5",children:[1!==(null===X||void 0===X||null===(a=X.DispatchList)||void 0===a?void 0:a.length)&&(0,q.jsx)(Ne,{setFieldValue:ie,index:i,errors:null===ee||void 0===ee||null===(l=ee.DispatchList)||void 0===l||null===(o=l[i])||void 0===o?void 0:o.location_code,touched:null===ee||void 0===ee||null===(d=ee.DispatchList)||void 0===d||null===(r=d[i])||void 0===r?void 0:r.location_code}),1!==(null===X||void 0===X||null===(m=X.DispatchList)||void 0===m?void 0:m.length)&&(0,q.jsx)(s.$n,{type:"button",variant:"solid",color:"red-500",size:"sm",onClick:()=>{null===u||void 0===u||u(null===X||void 0===X?void 0:X.DispatchList,i,ie)},children:"Remove"}),(0,q.jsx)(s.$n,{type:"button",variant:"solid",color:"pink-500",size:"sm",onClick:()=>{t(D({option:!0,locationIndex:i}))},children:"Add Item"}),0===i?(0,q.jsx)(s.$n,{type:"button",variant:"solid",size:"sm",onClick:()=>{null===p||void 0===p||p(null===X||void 0===X?void 0:X.DispatchList,ie)},children:"New Location"}):null]})]}),(0,q.jsx)(we,{handleDeleteItemInPoList:v,locationIndex:i,initialData:e.poList,dispatchList:null===X||void 0===X?void 0:X.DispatchList,setFieldValue:ie}),(0,q.jsx)(pe,{boxes:null===X||void 0===X?void 0:X.DispatchBoxList,locationIndex:i,type:c,setFieldValue:ie,addNewItemInPoList:h,dispatchList:null===X||void 0===X?void 0:X.DispatchList})]})})}),(0,q.jsx)(P.NG,{className:"-mx-8 px-8 flex items-center justify-center p-3",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:(0,q.jsx)("div",{className:"md:flex items-center",children:(0,q.jsx)(s.$n,{variant:"solid",loading:te,type:"submit",children:"DISPATCH ORDER"})})})]},"invoiceFormContainer")},"invoiceForm")}})})})});ii.defaultProps={type:"new",initialData:{invoice_no:"",invoice_type:"domestic",invoice_date:new Date,DispatchConsignee:null,DispatchBuyer:null,DispatchShippingAddress:null,DispatchList:[{location_code:"",poList:[]}],DispatchCompanyDetails:{iec_code:"",gstin:"27GZUPS0011Q1ZK",itc_code:"",duty_drawback_serial_no:"",state:"MAHARASHTRA",pan:"GZUPS0011Q",state_code:27},DispatchBankDetails:{id:1,bank_name:"BANK OF MAHARASHTRA",account_no:60262968113,beneficiary_name:"BROTHERS INDUSTRIES",ifsc_code:"MAHBOOOOO3O",ifsc_code:"MAHBOOOOO3O",bank_ad_code:"0230067-6000009",swift_code:"MAHBINBBKOL"},DispatchShippingAndOtherDetails:{end_use_code:"",packing_details:"",excise_document:"",freight:"",shipping_term:"",payment_term:"",shipping_line:"",shipping_insurance:"",vehicle_no:"",bill_type:"NON GST",c_gst:"",s_gst:"",i_gst:"",e_way_bill_no:"",remark:"",convert_rate:"",packing_charges:"",fright_charges:"",other_charges:""}}};const ti=ii;var ni=t(73216);const si=e=>{let{isDialogOpen:i=!1,setIsDialogOpen:t,invoiceNo:n,handleDiscard:a,timeOutId:l}=e;const o=()=>{null===t||void 0===t||t(!1),null===a||void 0===a||a(),clearTimeout(l)};return(0,q.jsxs)(s.lG,{isOpen:i,onClose:o,onRequestClose:o,children:[(0,q.jsx)("h2",{className:"text-gray-500 text-center mb-4",children:"INVOICE NO"}),(0,q.jsxs)("h1",{className:"text-white mb-1 text-center bg-pink-300 p-3 rounded",children:["#",n]}),(0,q.jsx)("p",{className:"flex justify-end text-blue-500",children:"Please note this number"})]})};(0,I.Mh)("new_domestic_invoice",S);const ai=(e,i,t)=>s.y8.push((0,q.jsx)(s.Eg,{title:t,type:i,duration:2500,children:e}),{placement:"top-end"}),li=()=>{const e=(0,x.wA)(),i=(0,ni.Zp)(),[t,s]=(0,n.useState)(!1),[a,l]=(0,n.useState)(null),[o,d]=(0,n.useState)(null);(0,n.useEffect)(()=>{e(c())},[]);const r=(0,x.d4)(e=>e.new_domestic_invoice.data.customerList),u=()=>{i("/dispatch-list")};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(ti,{type:"new",onFormSubmit:async(i,t)=>{var n,a,o;const r=await(async i=>await e(p(i)))(i);if(t(!1),200===(null===r||void 0===r||null===(n=r.payload)||void 0===n?void 0:n.status)){var c,u,h,v;s(!0),l(null===(c=r.payload)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.invoice_no);const e=setTimeout(()=>{s(!1)},6e4);return d(e),ai(null===r||void 0===r||null===(h=r.payload)||void 0===h||null===(v=h.data)||void 0===v?void 0:v.message,"success","Successfully added")}return ai(null===r||void 0===r||null===(a=r.payload)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message,"danger","Unsuccessfully")},onDiscard:u,customers:r,pushNotification:ai}),(0,q.jsx)(si,{handleDiscard:u,isDialogOpen:t,invoiceNo:a,setIsDialogOpen:s,timeOutId:o})]})}},90642:(e,i,t)=>{t.d(i,{Ai:()=>d,Kz:()=>r,Wm:()=>u,ZS:()=>l,aQ:()=>h,eB:()=>o,jz:()=>s,k7:()=>a,lC:()=>c});var n=t(43971);async function s(){return n.A.fetchData({url:"v1/web/company/customer/statistic",method:"get"})}async function a(e){return n.A.fetchData({url:"v1/web/company/customer/update",method:"put",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/customer/select",method:"get"})}async function o(e){return n.A.fetchData({url:"v1/web/company/customer/register",method:"post",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/customer/update/id",method:"put",data:e})}async function r(e){return n.A.fetchData({url:"v1/web/company/customer",method:"post",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/customer/details/id",method:"post",data:e})}async function u(){return n.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function h(e){return n.A.fetchData({url:"v1/web/company/customer/delete/id",method:"delete",data:e})}},95799:(e,i,t)=>{t(70579)},96396:(e,i,t)=>{t.d(i,{D8:()=>r,F$:()=>y,FT:()=>j,H1:()=>d,HH:()=>a,K5:()=>P,Lb:()=>O,M:()=>c,O:()=>v,S9:()=>p,V1:()=>b,VA:()=>h,Wm:()=>I,Xd:()=>u,Z2:()=>f,c2:()=>x,cZ:()=>g,dg:()=>l,i7:()=>R,ic:()=>m,ko:()=>S,nV:()=>s,r6:()=>D,tt:()=>N,uM:()=>C,v8:()=>w,vq:()=>_,vv:()=>A,wb:()=>L,xs:()=>o});var n=t(43971);async function s(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/check/invoice/number",method:"post",data:e})}async function a(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/domestic/register",method:"post",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/foreign/register",method:"post",data:e})}async function o(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/foreign/invoice/date/update",method:"put",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/foreign/invoice/id",method:"post",data:e})}async function r(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/domestic/invoice/id",method:"post",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/domestic/packing/update",method:"put",data:e})}async function u(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch",method:"post",data:e})}async function h(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/details/id",method:"post",data:e})}async function p(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/id",method:"put",data:e})}async function v(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/delete/id",method:"delete",data:e})}async function m(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/raw/machining/date",method:"post",data:e})}async function x(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/add/product",method:"post",data:e})}async function g(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/add/box",method:"post",data:e})}async function f(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/delete/box",method:"delete",data:e})}async function y(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/update/box",method:"put",data:e})}async function j(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/delete",method:"delete",data:e})}async function D(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/pattern/register",method:"post",data:e})}async function b(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/pattern",method:"post",data:e})}async function _(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/Pattern/invoice/id",method:"post",data:e})}async function w(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/patternList/id",method:"put",data:e})}async function A(e){return n.A.fetchData({url:"v1/web/company/product/pattern/update/product",method:"put",data:e})}async function N(e){return n.A.fetchData({url:"v1/web/company/product/pattern/delete",method:"delete",data:e})}async function S(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/number",method:"get",data:e})}async function I(){return n.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function L(){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/date",method:"get"})}async function O(){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/years",method:"get"})}async function P(){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/months",method:"get"})}async function C(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/update/status",method:"put",data:e})}async function R(e){return console.log("data",e),n.A.fetchData({url:"v1/web/company/invoice/dispatch/patternInvoice/update/status",method:"put",data:e})}}}]);
//# sourceMappingURL=2161.e648c5c3.chunk.js.map