"use strict";(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[2061],{82061:(e,t,a)=>{a.r(t),a.d(t,{default:()=>le});var l=a(65043),n=a(27176),r=a(63516),i=a(72291),o=a(60605),s=a(49934),c=(a(53536),a(79456)),d=a(80907),u=a(43971);var m=a(90642);const p=(0,d.zD)("quality/lists/data/",async e=>{try{const t=await async function(e){return u.A.fetchData({url:"v1/web/company/quality/lists",method:"post",data:e})}(e);return t}catch(t){return t.response}}),h=(0,d.zD)("quality/lists/data/customer",async e=>{try{return await(0,m.ZS)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),_=(0,d.zD)("quality/product/data/customer/id",async e=>{try{const t=await async function(e){return u.A.fetchData({url:"v1/web/company/quality/select/customer/id",method:"post",data:e})}(e);return t}catch(t){return null===t||void 0===t?void 0:t.response}}),y=(0,d.Z0)({name:"po/lists/data",initialState:{customersList:[],qualityLists:[],productsList:[],loading:!1,tableData:{total:0,pageIndex:1,pageSize:10,query:"",customer:""},filterData:{status:""},attachmentDialog:!1,viewDialog:!1,selectedQuality:{}},reducers:{setTableData:(e,t)=>{e.tableData=t.payload},setFilterData:(e,t)=>{e.filterData=t.payload},toggleAttachmentDialog:(e,t)=>{e.attachmentDialog=t.payload},toggleViewDialog:(e,t)=>{e.viewDialog=t.payload},setSelectedQuality:(e,t)=>{e.selectedQuality=t.payload},setAllFilterData:(e,t)=>{e.customers=[]}},extraReducers:{[p.fulfilled]:(e,t)=>{var a;e.tableData.total=t.payload.data.total||0,e.loading=!1,e.qualityLists=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[]},[p.pending]:(e,t)=>{e.loading=!0},[h.fulfilled]:(e,t)=>{var a;e.tableData.total=t.payload.data.total||0,e.loading=!1,e.customersList=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[]},[h.pending]:(e,t)=>{e.loading=!0},[_.fulfilled]:(e,t)=>{var a;e.tableData.total=t.payload.data.total||0,e.loading=!1,e.productsList=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[]},[_.pending]:(e,t)=>{e.loading=!0}}}),{setFilterData:f,setTableData:v,toggleAttachmentDialog:x,setSelectedPoList:g,toggleViewDialog:b,setAllFilterData:j}=y.actions,w=y.reducer;var D=a(70579);const A=e=>{const{errors:t,values:a,touched:n,customers:i=[],setFieldValue:o}=e,d=(0,c.wA)(),u=(0,l.useMemo)(()=>i.map(e=>({label:e.name,value:e})),[i]),m=(0,l.useCallback)(async()=>{a&&d(_({customer_id:null===a||void 0===a?void 0:a.customer_id}))},[a]);return(0,l.useEffect)(()=>{null!==a&&void 0!==a&&a.customer_id&&m()},[null===a||void 0===a?void 0:a.customer_id]),(0,D.jsx)(s.eI,{className:"mb-5 h-max",label:(0,D.jsx)("span",{className:"text-gray-600 font-semibold mt-2",children:"Customer Information"}),invalid:t&&n,errorMessage:t,children:(0,D.jsx)(r.D0,{name:"CustomerDetails",children:e=>{let{field:t,form:a}=e;return(0,D.jsx)(s.l6,{field:t,form:a,options:u,value:u.find(e=>e.value===t.value),onChange:e=>a.setFieldValue(t.name,e.value),className:"text-gray-500 font-regular",styles:{control:e=>({...e,minHeight:"45px",height:"45px",fontFamily:"'Inter', sans-serif",color:"#576373"}),option:(e,t)=>({...e,fontSize:"14px",fontFamily:"'Inter', sans-serif",color:"#576373",backgroundColor:t.isFocused?"#F3F4F6":"white"}),singleValue:e=>({...e,fontSize:"14px",fontFamily:"'Inter', sans-serif",color:"#576373"}),menu:e=>({...e,fontFamily:"'Inter', sans-serif"}),placeholder:e=>({...e,color:"#576373",fontFamily:"'Inter', sans-serif"})}})}})})},S=(0,l.memo)(A),q=e=>{const{errors:t,values:a,touched:n,products:i=[],setFieldValue:o}=e,d=(0,c.wA)();console.log("products",i);(0,l.useCallback)(async()=>{d(p({product_id:null===a||void 0===a?void 0:a.product_id}))});const u=(0,l.useMemo)(()=>{const e=[];return i.forEach(t=>{t.Products.forEach(t=>{e.push({label:t.name,value:t.product_id})})}),e},[i]),m=(0,l.useMemo)(()=>{const e={};return i.forEach(t=>{var a;const l=null===(a=t.Customer)||void 0===a?void 0:a.customer_id;t.Products.forEach(t=>{e[t.product_id]=l})}),e},[i]);return(0,D.jsx)(s.eI,{className:"mb-5 h-max",label:(0,D.jsx)("span",{className:"text-gray-600 font-semibold mt-2",children:"Product Information"}),invalid:t&&n,errorMessage:t,children:(0,D.jsx)(r.D0,{name:"ProductDetails",children:e=>{let{field:t,form:a}=e;return(0,D.jsx)(s.l6,{field:t,form:a,options:u,value:u.find(e=>e.value===t.value),onChange:e=>{const l=m[e.value];a.setFieldValue(t.name,e.value),d(p({product_id:e.value,customer_id:l}))},className:"text-gray-500 font-regular",styles:{control:e=>({...e,minHeight:"45px",height:"45px",fontFamily:"'Inter', sans-serif",color:"#576373"}),option:(e,t)=>({...e,fontSize:"14px",fontFamily:"'Inter', sans-serif",color:"#576373",backgroundColor:t.isFocused?"#F3F4F6":"white"}),singleValue:e=>({...e,fontSize:"14px",fontFamily:"'Inter', sans-serif",color:"#576373"}),menu:e=>({...e,fontFamily:"'Inter', sans-serif"}),placeholder:e=>({...e,color:"#576373",fontFamily:"'Inter', sans-serif"})}})}})})},P=(0,l.memo)(q);const I=(0,a(50805).HY)({data:w});var k=a(24603),C=a(80899),N=a(33023),F=a(81911),z=a(78776),L=a(94842),V=a(53969),M=a(16677),T=a(79067),E=a(37171),R=a(42156),H=a(85877),O=a(94973);const Q=e=>{let{isOpen:t,onClose:a,onSubmit:n,data:r=[]}=e;const[i,o]=(0,l.useState)(""),[s,c]=(0,l.useState)(""),[d,u]=(0,l.useState)([]),m=[...new Set(r.map(e=>e.number))];return(0,D.jsxs)(N.A,{open:t,onClose:a,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{mt:"-100px",height:"350px",overflow:"hidden"}},children:[(0,D.jsx)(F.A,{sx:{fontWeight:600,fontSize:"1.25rem"},children:"Add Item Information"}),(0,D.jsxs)(z.A,{children:[(0,D.jsx)(L.A,{variant:"body2",sx:{mb:4},children:"Section to configure item information"}),(0,D.jsxs)(V.A,{display:"flex",gap:2,children:[(0,D.jsx)(V.A,{flex:1,children:(0,D.jsxs)(M.A,{fullWidth:!0,children:[(0,D.jsx)(T.A,{sx:{fontSize:"0.9rem",color:"#666"},children:"PO Number"}),(0,D.jsx)(E.A,{value:i,onChange:(e,t)=>{const a=e.target.value;o(a),c("");const l=r.filter(e=>e.number===a).map(e=>e.serial_number);u(l)},label:"PO Number",sx:{fontSize:"1rem",color:"#666",height:50,"& .MuiSelect-select":{padding:"10px 14px"}},MenuProps:{PaperProps:{style:{maxHeight:150}}},children:m.length>0?m.map(e=>(0,D.jsx)(R.A,{value:e,sx:{fontSize:"0.9rem",color:"#666"},children:e},e)):(0,D.jsx)(R.A,{disabled:!0,sx:{fontSize:"0.85rem",color:"#999"},children:"No options"})})]})}),(0,D.jsx)(V.A,{flex:1,children:(0,D.jsxs)(M.A,{fullWidth:!0,size:"medium",children:[(0,D.jsx)(T.A,{sx:{fontSize:"0.9rem",color:"#666"},children:"PO Serial Number"}),(0,D.jsx)(E.A,{value:s,onChange:(e,t)=>{const a=e.target.value;c(a)},label:"PO Serial Number",sx:{fontSize:"1rem",color:"#666",height:50,"& .MuiSelect-select":{padding:"10px 14px"}},MenuProps:{PaperProps:{style:{maxHeight:150}}},children:d.length>0?d.map(e=>(0,D.jsx)(R.A,{value:e,sx:{fontSize:"0.9rem",color:"#666"},children:e},e)):(0,D.jsx)(R.A,{disabled:!0,sx:{fontSize:"0.85rem",color:"#999"},children:"No options"})})]})})]})]}),(0,D.jsxs)(H.A,{sx:{px:3,pb:2},children:[(0,D.jsx)(O.A,{onClick:a,variant:"outlined",color:"inherit",children:"Discard"}),(0,D.jsx)(O.A,{type:"button",onClick:async e=>{try{if(e.preventDefault(),i&&s){const e=r.find(e=>e.number===i&&e.serial_number===s);if(e){const t={project_number:e.project_no,po_number:e.number,po_serial_number:e.serial_number,drawing_number:e.drawing_number,quantity:e.quantity};console.log("Submitting item:",t),n(t),o(""),c(""),u([]),a()}}}catch(t){console.error("Error in handleSubmit:",t),alert("Something went wrong!")}},variant:"contained",sx:{bgcolor:"#4A3AFF"},children:"Add Item"})]})]})};var G=a(58931),K=a(47111),B=(a(60446),a(93751));const{Tr:W,Th:U,Td:Z,THead:X,TBody:$,TFoot:Y}=s.XI,J=e=>{let{row:t,qualityItems:a,setQualityItems:l}=e;(0,c.wA)();return(0,D.jsx)("div",{className:"flex justify-center text-lg gap-x-4",children:a.length>1&&(0,D.jsx)("span",{className:"cursor-pointer hover:text-red-500 text-gray-600",onClick:()=>{const e=a.filter(e=>e!==t);l(e)},children:(0,D.jsx)(B.yRo,{})})})},ee=e=>{let{initialData:t=[],setQualityItems:a}=e;const n=(0,l.useMemo)(()=>[{header:(0,D.jsx)("span",{className:"text-gray-500",children:"Po no. and serial number"}),accessorKey:"PoList",cell:e=>{var t;const a=e.row.original;return(0,D.jsx)("div",{className:"uppercase text-center text-gray-500",children:`${null===a||void 0===a?void 0:a.Po.number}-${null===a||void 0===a||null===(t=a.PoList)||void 0===t?void 0:t.serial_number}`})}},{header:"Project number",accessorKey:"project_no",cell:e=>{const t=e.row.original;return(0,D.jsx)("div",{className:"uppercase text-center text-gray-500",children:null===t||void 0===t?void 0:t.project_no})}},{header:"Drawing number",accessorKey:"drawing_number",cell:e=>{const t=e.row.original;return(0,D.jsx)("div",{className:"uppercase text-center text-gray-500",children:null===t||void 0===t?void 0:t.drawing_number})}},{header:"Quantity",accessorKey:"PoList.quantity",cell:e=>{var t;const a=e.row.original;return(0,D.jsx)("div",{className:"uppercase text-center text-gray-500",children:null===a||void 0===a||null===(t=a.PoList)||void 0===t?void 0:t.quantity})}},{header:"",accessorKey:"action",cell:e=>{const l=e.row.original;return(0,D.jsx)(J,{row:l,qualityItems:t,setQualityItems:a})}}],[t]),r=(0,G.N4)({data:t,columns:n,getCoreRowModel:(0,K.HT)()});return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(s.XI,{compact:!0,children:[(0,D.jsx)(X,{children:r.getHeaderGroups().map(e=>(0,D.jsx)(W,{children:e.headers.map(e=>(0,D.jsx)(U,{style:{border:".5px solid #e0e0e0",textAlign:"center"},className:"select-none font-medium !text-gray-600",colSpan:e.colSpan,children:(0,G.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,D.jsx)($,{children:r.getRowModel().rows.map(e=>(0,D.jsx)(W,{children:e.getVisibleCells().map(e=>(0,D.jsx)(Z,{style:{border:".5px solid #e0e0e0"},className:"select-none font-normal !text-gray-600",children:(0,G.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})})},te=(0,l.memo)(ee);(0,k.Mh)("quality",I);const ae=C.Ik().shape({CustomerDetails:C.Ik().required("Required"),ProductDetails:C.Ik().required("Required")}),le=()=>{const e=(0,c.wA)(),[t,a]=(0,l.useState)(!1),[d,u]=(0,l.useState)([]);console.log("qualityItems",d);const m=(0,c.d4)(e=>{var t;return null===(t=e.quality.data)||void 0===t?void 0:t.customersList}),p=(0,c.d4)(e=>{var t;return null===(t=e.quality.data)||void 0===t?void 0:t.productsList}),_=((0,c.d4)(e=>{var t;return null===(t=e.quality.data)||void 0===t?void 0:t.qualityLists}),[{product_id:"d59a0d7f-0577-4a89-b5cf-f306c8c6bca1",customer_id:"e5e50d3a-01a2-408d-b7b7-20d33e22d017",material_grade_id:"e2e6901f-df8e-4799-9238-bab23be5f1ea",po_list_id:"17cb3a72-fc88-4c8f-849e-6f6c37b02b29",serial_number:11,quantity:1,delivery_date:"2025-07-15",accept_delivery_date:"2025-06-10",list_status:"accepted",project_no:"679119",product_name:"BEARING COVER;MACH;3VG",drawing_number:"3-204502283-001",revision_number:"g",material_grade:"GC300",item_code:"204502283002",number:"4502307091",status:"processing",DATE:"2025-04-12",poa:"25041802",customer_name:"SULZER PUMPS INDIA PVT LTD",material_tc_verify:null,internal_inspection:null,ndt_requirement:null,final_inspection:null,heat_treatment:null,other:null,item_quantity:0,material_tc_verify_check:1,internal_inspection_check:1,ndt_requirement_check:0,final_inspection_check:1,heat_treatment_check:0,other_check:0,pending_quantity:1,invoice_date:null,invoice_no:null,raw_lead_time:2,raw_lead_time_type:"weeks",machine_lead_time:2,machine_lead_time_type:"weeks",quality_lead_time:2,quality_lead_time_type:"weeks",standard_lead_time:6,standard_lead_time_type:"weeks",actual_raw_date:null,actual_quality_date:null,actual_machine_date:null},{product_id:"d60a8d0c-1c75-426b-b6fc-07953bb92c2b",customer_id:"f9b3a107-4f6e-41c1-b4a9-d6b9d6491d4c",material_grade_id:"1c869990-d13b-4296-8614-d85f2e0c00f3",po_list_id:"299b7f61-8490-4c5d-961b-356fa2f963fc",serial_number:12,quantity:2,delivery_date:"2025-08-20",accept_delivery_date:"2025-07-18",list_status:"pending",project_no:"679120",product_name:"BEARING COVER;MACH;3VG",drawing_number:"3-204502283-002",revision_number:"h",material_grade:"GC350",item_code:"204502283003",number:"4502307091",status:"processing",DATE:"2025-04-13",poa:"25041803",customer_name:"SULZER PUMPS INDIA PVT LTD",material_tc_verify:null,internal_inspection:null,ndt_requirement:null,final_inspection:null,heat_treatment:null,other:null,item_quantity:0,material_tc_verify_check:1,internal_inspection_check:1,ndt_requirement_check:0,final_inspection_check:1,heat_treatment_check:0,other_check:0,pending_quantity:2,invoice_date:null,invoice_no:null,raw_lead_time:2,raw_lead_time_type:"weeks",machine_lead_time:2,machine_lead_time_type:"weeks",quality_lead_time:2,quality_lead_time_type:"weeks",standard_lead_time:6,standard_lead_time_type:"weeks",actual_raw_date:null,actual_quality_date:null,actual_machine_date:null}]);(0,l.useEffect)(()=>{e(h())},[]);const y=e=>{if(d.some(t=>{var a,l;return(null===(a=t.Po)||void 0===a?void 0:a.number)===e.po_number&&(null===(l=t.PoList)||void 0===l?void 0:l.serial_number)===e.po_serial_number}))return;const t={Po:{number:e.po_number},PoList:{serial_number:e.po_serial_number,quantity:e.quantity},project_no:e.project_number,drawing_number:e.drawing_number};u(e=>[...e,t])};return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(l.Suspense,{fallback:(0,D.jsx)(n.Rh,{loading:!0}),children:(0,D.jsx)(r.l1,{initialValues:{CustomerDetails:null,ProductDetails:null},validationSchema:ae,onSubmit:(e,t)=>{let{setSubmitting:a}=t;console.log(e),a(!1)},children:e=>{let{values:l,touched:n,errors:c,setFieldValue:h,isSubmitting:f}=e;return console.log("values"),(0,D.jsx)(r.lV,{children:(0,D.jsx)(s.MG,{children:(0,D.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-4",children:[(0,D.jsxs)(i.A,{className:"bg-yellow-50 h-max",bodyClass:"pb-0",children:[(0,D.jsx)("div",{className:"flex justify-between",children:(0,D.jsx)("span",{children:(0,D.jsx)("h5",{className:"font-semibold text-gray-700",children:"Customer and Product Information"})})}),(0,D.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,D.jsx)(S,{touched:null===n||void 0===n?void 0:n.CustomerDetails,errors:null===c||void 0===c?void 0:c.CustomerDetails,values:null===l||void 0===l?void 0:l.CustomerDetails,customers:m,setFieldValue:h}),(0,D.jsx)(P,{touched:null===n||void 0===n?void 0:n.ProductDetails,errors:null===c||void 0===c?void 0:c.ProductDetails,values:null===l||void 0===l?void 0:l.ProductDetails,setFieldValue:h,products:p}),(0,D.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,D.jsx)("label",{htmlFor:"total-quantity",className:"text-gray-700 text-sm font-medium mb-2",style:{marginTop:"-15px"},children:"Total Qty"}),(0,D.jsx)(s.pd,{id:"total-quantity",type:"number",value:d.reduce((e,t)=>e+t.quantity,0),inputProps:{readOnly:!0},style:{width:"100%",fontSize:"0.95rem"},className:"text-gray-600",disableUnderline:!0,readOnly:!0})]})]})]}),(0,D.jsxs)(i.A,{children:[(0,D.jsx)("div",{className:"flex justify-end",children:(0,D.jsx)(o.Ay,{type:"button",variant:"solid",className:"bg-pink-500 text-white py-5 text-base mb-4",onClick:()=>a(!0),children:"Add Item"})}),(0,D.jsx)(Q,{isOpen:t,onClose:()=>a(!1),data:_,onSubmit:y}),(0,D.jsx)(te,{initialData:d,setQualityItems:u})]})]})},"")},"")}})})})}},90642:(e,t,a)=>{a.d(t,{Ai:()=>s,Kz:()=>c,Wm:()=>u,ZS:()=>i,aQ:()=>m,eB:()=>o,jz:()=>n,k7:()=>r,lC:()=>d});var l=a(43971);async function n(){return l.A.fetchData({url:"v1/web/company/customer/statistic",method:"get"})}async function r(e){return l.A.fetchData({url:"v1/web/company/customer/update",method:"put",data:e})}async function i(e){return l.A.fetchData({url:"v1/web/company/customer/select",method:"get"})}async function o(e){return l.A.fetchData({url:"v1/web/company/customer/register",method:"post",data:e})}async function s(e){return l.A.fetchData({url:"v1/web/company/customer/update/id",method:"put",data:e})}async function c(e){return l.A.fetchData({url:"v1/web/company/customer",method:"post",data:e})}async function d(e){return l.A.fetchData({url:"v1/web/company/customer/details/id",method:"post",data:e})}async function u(){return l.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function m(e){return l.A.fetchData({url:"v1/web/company/customer/delete/id",method:"delete",data:e})}}}]);
//# sourceMappingURL=2061.54f4956a.chunk.js.map