(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[2271],{4757:(e,t,a)=>{var r=a(56552);e.exports=function(){return r.Date.now()}},9696:(e,t,a)=>{"use strict";a.d(t,{$S:()=>u,Cb:()=>n,GK:()=>d,_Z:()=>s,gC:()=>l,hk:()=>c,v$:()=>g,yh:()=>i,ze:()=>o});var r=a(43971);async function o(){return r.A.fetchData({url:"v1/web/company/product/codes",method:"get"})}async function n(e){return r.A.fetchData({url:"v1/web/company/po-list/customer/id",method:"post",data:e})}async function i(e){return r.A.fetchData({url:"v1/web/company/stock",method:"get",params:e})}async function l(e){return r.A.fetchData({url:"v1/web/company/stock/delete/id",method:"delete",data:e})}async function s(e){return r.A.fetchData({url:"v1/web/company/stock/update/id",method:"put",data:e})}async function c(e){return r.A.fetchData({url:"v1/web/company/stock/register",method:"post",data:e})}async function d(e){return r.A.fetchData({url:"v1/web/company/purchase/order/register",method:"post",data:e})}async function u(e){return r.A.fetchData({url:"v1/web/company/purchase/order/update/id",method:"put",data:e})}async function g(e){return r.A.fetchData({url:"v1/web/company/purchase/order",method:"post",data:e})}},10143:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},12271:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>$});var r=a(65043),o=a(49934),n=a(79456),i=a(88705),l=a(56434),s=a.n(l),c=a(80907),d=a(9696);const u=(0,c.zD)("stock/data/all",async e=>{try{return await(0,d.yh)(e)}catch(t){return(null===t||void 0===t?void 0:t.response)||t.toString()}}),g=(0,c.zD)("stock/product/code/option",async()=>{try{return await(0,d.ze)()}catch(e){return(null===e||void 0===e?void 0:e.response)||e.toString()}}),p=(0,c.zD)("stock/data/put",async e=>{try{return await(0,d._Z)(e)}catch(t){return(null===t||void 0===t?void 0:t.response)||t.toString()}}),h=(0,c.zD)("stock/data/post",async e=>{try{return await(0,d.hk)(e)}catch(t){return(null===t||void 0===t?void 0:t.response)||t.toString()}}),m=(0,c.zD)("Stock/data/delete",async e=>{try{return await(0,d.gC)(e)}catch(t){return(null===t||void 0===t?void 0:t.response)||t.toString()}}),v=(0,c.Z0)({name:"stock/data",initialState:{loading:!0,stock:[],productCodes:[],tableData:{query:"",pageIndex:1,pageSize:10,total:0},filterData:{status:""}},reducers:{setTableData:(e,t)=>{e.tableData=t.payload},setFilterData:(e,t)=>{e.filterData=t.payload}},extraReducers:{[g.fulfilled]:(e,t)=>{var a;e.productCodes=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[]},[u.fulfilled]:(e,t)=>{var a,r,o;e.stock=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[],e.tableData.total=(null===t||void 0===t||null===(r=t.payload)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.total)||0,e.loading=!1},[g.pending]:e=>{e.loading=!0},[h.fulfilled]:e=>{},[m.fulfilled]:e=>{},[p.fulfilled]:e=>{}}}),{setTableData:f,setFilterData:x}=v.actions,y=v.reducer;a(23533);const S=(0,c.Z0)({name:"stock/state",initialState:{deleteConfirmation:!1,addDialog:!1,editDialog:!1,selectedStock:{}},reducers:{toggleDeleteConfirmation:(e,t)=>{e.deleteConfirmation=t.payload},toggleAddDialog:(e,t)=>{e.addDialog=t.payload},toggleEditDialog:(e,t)=>{e.editDialog=t.payload},setSelectedStock:(e,t)=>{e.selectedStock=t.payload}}}),{toggleDeleteConfirmation:k,setSelectedStock:w,toggleAddDialog:C,toggleEditDialog:D}=S.actions,j=S.reducer;var b=a(27176),z=a(70579);var A=a(80899);a(60446);A.Ik().shape({vendor_id:A.ai().required("Vendor is required"),category_id:A.ai().required("Category is required"),product_id:A.ai().required("Product is required"),stock_default_mrp:A.ai().required("Default MRP is required"),stock_expiry_date:A.p6().required("Expiry date is required"),stock_retailer_price:A.ai().required("Retailer price is required"),stock_wholesaler_price:A.ai().required("Wholesaler price is required"),stock_purchase_price:A.ai().required("price is required"),stock_discount_type:A.Yj().required("Discount type is required"),stock_discount:A.ai().required("Discount is required")});const I=()=>{const e=(0,n.wA)(),t=(0,r.useMemo)(()=>[{header:"p.Code",accessorKey:"Product",cell:e=>{var t;const a=e.row.original;return(0,z.jsx)("div",{className:"flex items-center",children:null===a||void 0===a||null===(t=a.Product)||void 0===t?void 0:t.product_code})}},{header:"product ",accessorKey:"Product",cell:e=>{var t;const a=e.row.original;return(0,z.jsx)("div",{className:"flex items-center",children:null===a||void 0===a||null===(t=a.Product)||void 0===t?void 0:t.name})}},{header:"category",accessorKey:"Product",cell:e=>{var t,a;const r=e.row.original;return(0,z.jsxs)("div",{className:"flex items-center",children:[" ",null===r||void 0===r||null===(t=r.Product)||void 0===t||null===(a=t.Category)||void 0===a?void 0:a.name]})}},{header:"current Stock",accessorKey:"",cell:e=>{const t=e.row.original;return(0,z.jsxs)("div",{className:"flex items-center",children:[" ",null===t||void 0===t?void 0:t.current_stock]})}}],[]),a=(0,n.d4)(e=>e.stock.data.stock),o=(0,n.d4)(e=>e.stock.data.loading),{status:l}=(0,n.d4)(e=>e.stock.data.filterData),{pageIndex:c,pageSize:d,query:g,total:p}=(0,n.d4)(e=>e.stock.data.tableData);console.log(p);const h=(0,r.useCallback)(()=>{e(u({pageIndex:c,pageSize:d,query:g,status:l}))},[c,d,g,l,p]);(0,r.useEffect)(()=>{h()},[c,d,g,l,p]);const m=(0,r.useMemo)(()=>({pageIndex:c,pageSize:d,query:g,total:p,status:l}),[c,d,g,p,l]);return(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(i.A,{columns:t,data:a,loading:o,pagingData:{pageIndex:c,pageSize:d,query:g,total:p,status:l},onPaginationChange:t=>{const a=s()(m);a.pageIndex=t,e(f(a))},onSelectChange:t=>{const a=s()(m);a.pageSize=Number(t),a.pageIndex=1,e(f(a))}})})};var q=a(93751),_=a(93950),N=a.n(_);const P=()=>{const e=(0,n.wA)(),t=(0,r.useRef)(),a=(0,n.d4)(e=>e.stock.data.tableData);console.log(a);const i=N()(function(e){const t=s()(a);t.query=e,t.pageIndex=1,"string"===typeof e&&e.length>0&&l(t);"string"===typeof e&&0===e.length&&l(t)},500);const l=t=>{e(u(t)),e(f(t))};return(0,z.jsx)(o.pd,{ref:t,className:"max-w-lg md:w-52",size:"sm",placeholder:"Search Stock",prefix:(0,z.jsx)(q.oF9,{className:"text-lg"}),onChange:e=>{i(e.target.value)}})};var T=a(72234);const{Control:R}=T.c,M=()=>{(0,n.wA)();return(0,z.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:(0,z.jsx)(P,{})})};var B=a(24603);const E=(0,a(50805).HY)({data:y,state:j});(0,B.Mh)("stock",E);const $=()=>(0,z.jsxs)(b.r5,{className:"h-full",bodyClass:"h-full",children:[(0,z.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,z.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Stock"}),(0,z.jsx)(M,{})]}),(0,z.jsx)(I,{})]})},40801:(e,t,a)=>{var r=a(61141),o=a(46686),n=a(19841),i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=l.test(e);return a||s.test(e)?c(e.slice(2),a?2:8):i.test(e)?NaN:+e}},61141:(e,t,a)=>{var r=a(10143),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},88705:(e,t,a)=>{"use strict";a.d(t,{A:()=>C});var r=a(65043),o=a(98139),n=a.n(o),i=a(49934),l=a(70579);const{Tr:s,Td:c,TBody:d}=i.XI,u=e=>{const{columns:t,rows:a,avatarInColumns:r,avatarProps:o}=e;return(0,l.jsx)(d,{children:Array.from(new Array(a),(e,t)=>t+0).map(e=>(0,l.jsx)(s,{children:Array.from(new Array(t),(e,t)=>t+0).map(e=>(0,l.jsx)(c,{children:(0,l.jsxs)("div",{className:"flex flex-auto items-center gap-2",children:[r.includes(e)&&(0,l.jsx)("div",{children:(0,l.jsx)(i.EA,{variant:"circle",...o})}),(0,l.jsx)(i.EA,{})]})},`col-${e}`))},`row-${e}`))})};u.defaultProps={columns:1,rows:10,avatarInColumns:[]};const g=u;var p=a(6023),h=a(58931),m=a(47111);const{Tr:v,Th:f,Td:x,THead:y,TBody:S}=i.XI,k=e=>{const{indeterminate:t,onChange:a,onCheckBoxChange:o,onIndeterminateCheckBoxChange:n,...s}=e,c=(0,r.useRef)(null);(0,r.useEffect)(()=>{"boolean"===typeof t&&(c.current.indeterminate=!s.checked&&t)},[c,t]);return(0,l.jsx)(i.Sc,{className:"mb-0",ref:c,onChange:(e,t)=>(e=>{a(e),null===o||void 0===o||o(e),null===n||void 0===n||n(e)})(t),...s})},w=(0,r.forwardRef)((e,t)=>{const{skeletonAvatarColumns:a,columns:o,data:s,loading:c,onCheckBoxChange:d,onIndeterminateCheckBoxChange:u,onPaginationChange:w,onSelectChange:C,onSort:D,pageSizes:j,selectable:b,skeletonAvatarProps:z,pagingData:A,tableWidth:I="100%"}=e,{pageSize:q,pageIndex:_,total:N}=A,[P,T]=(0,r.useState)(null),R=(0,r.useMemo)(()=>j.map(e=>({value:e,label:`${e} / page`})),[j]);(0,r.useEffect)(()=>{if(Array.isArray(P)){const e=P.length>0?P[0].desc?"desc":"asc":"",t=P.length>0?P[0].id:"";null===D||void 0===D||D({order:e,key:t})}},[P]);const M=o.some(e=>e.Header||e.accessor||e.Cell),B=(0,r.useMemo)(()=>{const e=o.map(e=>({...e,size:e.size||void 0,minSize:e.minSize||100,maxSize:e.maxSize||300}));return b?[{id:"select",header:e=>{let{table:t}=e;return(0,l.jsx)(k,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:e=>{var a,r;a=e.target.checked,r=t.getRowModel().rows,c||null===u||void 0===u||u(a,r)}})},cell:e=>{let{row:t}=e;return(0,l.jsx)(k,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler(),onCheckBoxChange:e=>((e,t)=>{c||null===d||void 0===d||d(e,t)})(e.target.checked,t.original)})},size:50,minSize:50,maxSize:50},...e]:e},[o,b]),E=(0,h.N4)({data:s,columns:M?[]:B,getCoreRowModel:(0,m.HT)(),getFilteredRowModel:(0,m.hM)(),getPaginationRowModel:(0,m.kW)(),getSortedRowModel:(0,m.h5)(),manualPagination:!0,manualSorting:!0,onSortingChange:T,state:{sorting:P},columnResizeMode:"onChange"}),$=()=>{E.resetSorting()},H=()=>{E.toggleAllRowsSelected(!1)};if((0,r.useImperativeHandle)(t,()=>({resetSorting:$,resetSelected:H})),M){const e="You are using old react-table v7 column config, please use v8 column config instead, refer to our demo or https://tanstack.com/table/v8";return(0,l.jsx)(i.Fc,{children:e})}return(0,l.jsxs)(p.A,{loading:c&&0!==s.length,type:"cover",children:[(0,l.jsx)("div",{style:{width:I,overflowX:"auto"},children:(0,l.jsxs)(i.XI,{style:{width:"100%",tableLayout:"fixed"},children:[(0,l.jsx)(y,{children:E.getHeaderGroups().map(e=>(0,l.jsx)(v,{children:e.headers.map(e=>(0,l.jsx)(f,{colSpan:e.colSpan,style:{width:`${e.column.getSize()}px`},children:e.isPlaceholder?null:(0,l.jsx)("div",{className:n()(c&&"pointer-events-none"),children:(0,h.Kv)(e.column.columnDef.header,e.getContext())})},e.id))},e.id))}),c&&0===s.length?(0,l.jsx)(g,{columns:B.length,rows:A.pageSize,avatarInColumns:a,avatarProps:z}):(0,l.jsx)(S,{children:E.getRowModel().rows.slice(0,q).map(e=>(0,l.jsx)(v,{children:e.getVisibleCells().map(e=>(0,l.jsx)(x,{style:{width:`${e.column.getSize()}px`},children:(0,h.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,l.jsx)(i.dK,{pageSize:q,currentPage:_,total:N,onChange:e=>{c||null===w||void 0===w||w(e)}}),(0,l.jsx)("div",{style:{minWidth:130},children:(0,l.jsx)(i.l6,{size:"sm",menuPlacement:"top",isSearchable:!1,value:R.filter(e=>e.value===q),options:R,onChange:e=>{return t=e.value,void(c||null===C||void 0===C||C(Number(t)));var t}})})]})]})});w.defaultProps={pageSizes:[10,25,50,100],pagingData:{total:0,pageIndex:1,pageSize:10},data:[],columns:[],selectable:!1,loading:!1};const C=w},93950:(e,t,a)=>{var r=a(46686),o=a(4757),n=a(40801),i=Math.max,l=Math.min;e.exports=function(e,t,a){var s,c,d,u,g,p,h=0,m=!1,v=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var a=s,r=c;return s=c=void 0,h=t,u=e.apply(r,a)}function y(e){var a=e-p;return void 0===p||a>=t||a<0||v&&e-h>=d}function S(){var e=o();if(y(e))return k(e);g=setTimeout(S,function(e){var a=t-(e-p);return v?l(a,d-(e-h)):a}(e))}function k(e){return g=void 0,f&&s?x(e):(s=c=void 0,u)}function w(){var e=o(),a=y(e);if(s=arguments,c=this,p=e,a){if(void 0===g)return function(e){return h=e,g=setTimeout(S,t),m?x(e):u}(p);if(v)return clearTimeout(g),g=setTimeout(S,t),x(p)}return void 0===g&&(g=setTimeout(S,t)),u}return t=n(t)||0,r(a)&&(m=!!a.leading,d=(v="maxWait"in a)?i(n(a.maxWait)||0,t):d,f="trailing"in a?!!a.trailing:f),w.cancel=function(){void 0!==g&&clearTimeout(g),h=0,s=p=c=g=void 0},w.flush=function(){return void 0===g?u:k(o())},w}}}]);
//# sourceMappingURL=2271.a640418b.chunk.js.map