(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[7010],{4757:(e,t,a)=>{var n=a(56552);e.exports=function(){return n.Date.now()}},10143:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},40801:(e,t,a)=>{var n=a(61141),s=a(46686),r=a(19841),o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var a=l.test(e);return a||i.test(e)?c(e.slice(2),a?2:8):o.test(e)?NaN:+e}},57010:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>G});var n=a(65043),s=a(49934),r=a(80907),o=a(90642);const l=(0,r.zD)("customers/data/getCustomers",async e=>{try{return await(0,o.Kz)(e)}catch(t){}}),i=(0,r.zD)("customers/data/statistic",async()=>{try{return await(0,o.jz)()}catch(e){}}),c=(0,r.zD)("customers/data/delete",async e=>{try{return await(0,o.aQ)(e)}catch(t){}}),d=(0,r.Z0)({name:"customers/data",initialState:{loading:!1,customerList:[],statisticData:{},statisticLoading:!1,tableData:{total:0,pageIndex:1,pageSize:10,query:""},filterData:{type:""}},reducers:{setTableData:(e,t)=>{e.tableData=t.payload},setCustomerList:(e,t)=>{e.customerList=t.payload},setFilterData:(e,t)=>{e.filterData=t.payload}},extraReducers:{[l.fulfilled]:(e,t)=>{var a,n,s;e.customerList=null===(a=t.payload.data)||void 0===a?void 0:a.data,e.tableData.total=null===(n=t.payload)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.total,e.loading=!1},[l.pending]:e=>{e.loading=!0},[i.fulfilled]:(e,t)=>{var a,n;e.statisticLoading=!1,e.statisticData=(null===(a=t.payload)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.data)||{}},[i.pending]:e=>{e.statisticLoading=!0},[c.fulfilled]:e=>{}}}),{setTableData:u,setCustomerList:m,setFilterData:g}=d.actions,p=d.reducer;var h=a(93751),v=a(93950),x=a.n(v),f=a(70579);const y=(0,n.forwardRef)((e,t)=>{const{onInputChange:a}=e,n=x()(function(e){null===a||void 0===a||a(e)},500);return(0,f.jsx)(s.pd,{ref:t,className:"max-w-md md:w-52",size:"sm",placeholder:"Search",prefix:(0,f.jsx)(h.oF9,{className:"text-lg"}),onChange:e=>{n(e.target.value)}})});var C=a(79456),b=a(72234);const{Control:j}=b.c,w=[{value:"",label:"All",color:"bg-gray-500"},{value:"customer",label:"Customer",color:"bg-red-600"},{value:"supplier",label:"Supplier",color:"bg-emerald-600"},{value:"both",label:"Both",color:"bg-yellow-600"}],S=e=>{let{innerProps:t,label:a,data:n,isSelected:r}=e;return(0,f.jsxs)("div",{className:"flex items-center justify-between p-2 cursor-pointer "+(r?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"),...t,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(s.Ex,{innerClass:n.color}),(0,f.jsx)("span",{children:a})]}),r&&(0,f.jsx)(h.q9z,{className:"text-emerald-500 text-xl"})]})},D=e=>{let{children:t,...a}=e;const n=a.getValue()[0];return(0,f.jsxs)(j,{...a,children:[n&&(0,f.jsx)(s.Ex,{className:"ltr:ml-4 rtl:mr-4",innerClass:n.color}),t]})},A=()=>{const e=(0,C.wA)(),{type:t}=(0,C.d4)(e=>e.customer.data.filterData);return(0,f.jsx)(s.l6,{options:w,size:"sm",className:"min-w-[130px]",onChange:t=>{e(g({type:t.value}))},components:{Option:S,Control:D},value:w.filter(e=>e.value===t)})};var z=a(56434),N=a.n(z),I=a(35475);const k=()=>(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(I.N_,{to:"/data/product-list.csv",target:"_blank",download:!0,children:(0,f.jsx)(s.$n,{block:!0,variant:"solid",size:"sm",icon:(0,f.jsx)(h.cIQ,{}),children:"Export"})})}),T=()=>{const e=(0,C.wA)(),t=(0,n.useRef)(),a=(0,C.d4)(e=>e.customer.data.tableData),r=t=>{e(u(t)),e(l(t))};return(0,f.jsx)("div",{className:"md:flex items-center justify-end mb-4",children:(0,f.jsxs)("div",{className:"md:flex items-center gap-2",children:[(0,f.jsx)(y,{ref:t,onInputChange:e=>{const t=N()(a);t.query=e,t.pageIndex=1,"string"===typeof e&&e.length>1&&r(t),"string"===typeof e&&0===e.length&&r(t)}}),(0,f.jsx)(A,{}),(0,f.jsx)(s.$n,{size:"sm",onClick:()=>{const n=N()(a);n.pageIndex=1,n.query="",t.current.value="",e(g({type:""})),r(n)},children:"Clear All"}),(0,f.jsx)(k,{})]})})};var R=a(24603),M=a(23533),$=a(60446),B=a.n($),K=a(88705);const P=(0,r.Z0)({name:"customers/data",initialState:{deleteConfirmation:!1,selectedCustomer:{}},reducers:{togglDeleteConfirmationDialog:(e,t)=>{e.deleteConfirmation=t.payload},setSelectedCustomer:(e,t)=>{e.selectedCustomer=t.payload}}}),{setSelectedCustomer:E,togglDeleteConfirmationDialog:L}=P.actions,_=P.reducer;var q=a(27176);const F=(e,t,a)=>s.y8.push((0,f.jsx)(s.Eg,{title:e,type:t,duration:2500,children:a}),{placement:"top-center"}),H=()=>{const[e,t]=(0,n.useState)(!1),a=(0,C.d4)(e=>e.customer.data.tableData),s=(0,C.wA)(),r=(0,C.d4)(e=>e.customer.state.selectedCustomer),o=(0,C.d4)(e=>e.customer.state.deleteConfirmation),i=()=>{s(L(!1))};return(0,f.jsx)(q.TM,{isOpen:o,onClose:i,onRequestClose:i,type:"danger",title:"Delete Customer",onCancel:i,onConfirm:async()=>{var e;t(!0);const n=await s(c({customer_id:null===r||void 0===r?void 0:r.customer_id}));var o,d,u,m;if(t(!1),!((null===(e=n.payload)||void 0===e?void 0:e.status)<300))return F("Unsuccessfully","danger",null===(o=n.payload)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.message);F("Successfully Deleted","success",null===(u=n.payload)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.message),i(),s(l(a))},confirmText:e?"Deleting...":"Confirm",confirmButtonColor:"red-600",children:(0,f.jsx)("p",{children:"Are you sure you want to delete this Customer? This action cannot be undone."})})},W={true:{label:"Active",dotClass:"bg-emerald-500",textClass:"text-emerald-500"},false:{label:"In-Active",dotClass:"bg-red-500",textClass:"text-red-500"}},Y={supplier:{label:"Supplier",bgClass:"bg-emerald-100",textClass:"text-emerald-600"},customer:{label:"Customer",bgClass:"bg-red-100",textClass:"text-red-600"},both:{label:"Both",bgClass:"bg-yellow-100",textClass:"text-yellow-600"}},O=e=>{let{row:t}=e;const{textTheme:a}=(0,M.A)(),n=(0,C.wA)();return(0,f.jsxs)("div",{className:"flex justify-between text-lg",children:[(0,f.jsxs)("span",{className:"mr-2",children:[" ",(0,f.jsx)(I.N_,{className:`cursor-pointer hover:${a}`,to:`/customer-details/${null===t||void 0===t?void 0:t.customer_id}`,children:(0,f.jsx)(h.VUG,{})})]}),(0,f.jsx)("span",{className:"cursor-pointer",onClick:()=>{n(E(t)),n(L(!0))},children:(0,f.jsx)(h.yRo,{})})]})},X=e=>{let{row:t}=e;const{textTheme:a}=(0,M.A)();return(0,f.jsx)("div",{className:"items-center uppercase",children:t.name})},Z=[{header:"Name",accessorKey:"name",cell:e=>{const t=e.row.original;return(0,f.jsx)(X,{row:t})}},{header:"c. code",accessorKey:"customer_code"},{header:"v. code",cell:e=>{const t=e.row.original;return(0,f.jsx)("span",{className:"uppercase",children:(null===t||void 0===t?void 0:t.vender_code)||"-"})}},{header:"mobile",accessorKey:"mobile",cell:e=>{const t=e.row.original;return(0,f.jsx)("span",{children:t.mobile||"-"})}},{header:"email",accessorKey:"email",cell:e=>{const t=e.row.original;return(0,f.jsx)("span",{className:"lowercase",children:t.email||"-"})}},{header:"Status",accessorKey:"status",cell:e=>{var t,a,n;const r=e.row.original;return(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(s.Ex,{className:null===(t=W[r.status])||void 0===t?void 0:t.dotClass}),(0,f.jsx)("span",{className:`ml-2 font-semibold capitalize ${null===(a=W[r.status])||void 0===a?void 0:a.textClass}`,children:null===(n=W[r.status])||void 0===n?void 0:n.label})]})}},{header:"Type",accessorKey:"type",cell:e=>{var t,a,n;const r=e.row.original;return(0,f.jsx)("div",{className:"mr-2",children:(0,f.jsx)(s.vw,{className:`${null===(t=Y[null===r||void 0===r?void 0:r.type])||void 0===t?void 0:t.bgClass} ${null===(a=Y[null===r||void 0===r?void 0:r.type])||void 0===a?void 0:a.textClass} border-0`,children:null===(n=Y[null===r||void 0===r?void 0:r.type])||void 0===n?void 0:n.label})})}},{header:"Reg. Date",accessorKey:"createdAt",cell:e=>{const t=e.row.original;return(0,f.jsx)("div",{className:"flex items-center",children:B()(null===t||void 0===t?void 0:t.createdAt).format("DD/MM/YYYY")})}},{header:"",accessorKey:"id",size:60,cell:e=>{const t=e.row.original;return(0,f.jsx)(O,{row:t})}}],Q=()=>{const e=(0,C.wA)(),t=(0,C.d4)(e=>e.customer.data.customerList),a=(0,C.d4)(e=>e.customer.data.loading),{type:s}=(0,C.d4)(e=>e.customer.data.filterData),{pageIndex:r,pageSize:o,sort:i,query:c,total:d}=(0,C.d4)(e=>e.customer.data.tableData),m=(0,n.useCallback)(()=>{e(l({pageIndex:r,pageSize:o,sort:i,query:c,type:s}))},[r,o,i,c,s,e]);(0,n.useEffect)(()=>{m()},[m,r,o,i,s]);const g=(0,n.useMemo)(()=>({pageIndex:r,pageSize:o,sort:i,query:c,total:d}),[r,o,i,c,d]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(K.A,{columns:Z,data:t,loading:a,pagingData:{pageIndex:r,pageSize:o,query:c,total:d},onPaginationChange:t=>{const a=N()(g);a.pageIndex=t,e(u(a))},onSelectChange:t=>{const a=N()(g);a.pageSize=Number(t),a.pageIndex=1,e(u(a))}}),(0,f.jsx)(H,{})]})};const V=(0,a(50805).HY)({data:p,state:_});(0,R.Mh)("customer",V);const G=()=>(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(s.Zp,{className:"bg-purple-50",children:[(0,f.jsx)(T,{}),(0,f.jsx)(Q,{})]})})},61141:(e,t,a)=>{var n=a(10143),s=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(s,""):e}},88705:(e,t,a)=>{"use strict";a.d(t,{A:()=>w});var n=a(65043),s=a(98139),r=a.n(s),o=a(49934),l=a(70579);const{Tr:i,Td:c,TBody:d}=o.XI,u=e=>{const{columns:t,rows:a,avatarInColumns:n,avatarProps:s}=e;return(0,l.jsx)(d,{children:Array.from(new Array(a),(e,t)=>t+0).map(e=>(0,l.jsx)(i,{children:Array.from(new Array(t),(e,t)=>t+0).map(e=>(0,l.jsx)(c,{children:(0,l.jsxs)("div",{className:"flex flex-auto items-center gap-2",children:[n.includes(e)&&(0,l.jsx)("div",{children:(0,l.jsx)(o.EA,{variant:"circle",...s})}),(0,l.jsx)(o.EA,{})]})},`col-${e}`))},`row-${e}`))})};u.defaultProps={columns:1,rows:10,avatarInColumns:[]};const m=u;var g=a(6023),p=a(58931),h=a(47111);const{Tr:v,Th:x,Td:f,THead:y,TBody:C}=o.XI,b=e=>{const{indeterminate:t,onChange:a,onCheckBoxChange:s,onIndeterminateCheckBoxChange:r,...i}=e,c=(0,n.useRef)(null);(0,n.useEffect)(()=>{"boolean"===typeof t&&(c.current.indeterminate=!i.checked&&t)},[c,t]);return(0,l.jsx)(o.Sc,{className:"mb-0",ref:c,onChange:(e,t)=>(e=>{a(e),null===s||void 0===s||s(e),null===r||void 0===r||r(e)})(t),...i})},j=(0,n.forwardRef)((e,t)=>{const{skeletonAvatarColumns:a,columns:s,data:i,loading:c,onCheckBoxChange:d,onIndeterminateCheckBoxChange:u,onPaginationChange:j,onSelectChange:w,onSort:S,pageSizes:D,selectable:A,skeletonAvatarProps:z,pagingData:N,tableWidth:I="100%"}=e,{pageSize:k,pageIndex:T,total:R}=N,[M,$]=(0,n.useState)(null),B=(0,n.useMemo)(()=>D.map(e=>({value:e,label:`${e} / page`})),[D]);(0,n.useEffect)(()=>{if(Array.isArray(M)){const e=M.length>0?M[0].desc?"desc":"asc":"",t=M.length>0?M[0].id:"";null===S||void 0===S||S({order:e,key:t})}},[M]);const K=s.some(e=>e.Header||e.accessor||e.Cell),P=(0,n.useMemo)(()=>{const e=s.map(e=>({...e,size:e.size||void 0,minSize:e.minSize||100,maxSize:e.maxSize||300}));return A?[{id:"select",header:e=>{let{table:t}=e;return(0,l.jsx)(b,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:e=>{var a,n;a=e.target.checked,n=t.getRowModel().rows,c||null===u||void 0===u||u(a,n)}})},cell:e=>{let{row:t}=e;return(0,l.jsx)(b,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler(),onCheckBoxChange:e=>((e,t)=>{c||null===d||void 0===d||d(e,t)})(e.target.checked,t.original)})},size:50,minSize:50,maxSize:50},...e]:e},[s,A]),E=(0,p.N4)({data:i,columns:K?[]:P,getCoreRowModel:(0,h.HT)(),getFilteredRowModel:(0,h.hM)(),getPaginationRowModel:(0,h.kW)(),getSortedRowModel:(0,h.h5)(),manualPagination:!0,manualSorting:!0,onSortingChange:$,state:{sorting:M},columnResizeMode:"onChange"}),L=()=>{E.resetSorting()},_=()=>{E.toggleAllRowsSelected(!1)};if((0,n.useImperativeHandle)(t,()=>({resetSorting:L,resetSelected:_})),K){const e="You are using old react-table v7 column config, please use v8 column config instead, refer to our demo or https://tanstack.com/table/v8";return(0,l.jsx)(o.Fc,{children:e})}return(0,l.jsxs)(g.A,{loading:c&&0!==i.length,type:"cover",children:[(0,l.jsx)("div",{style:{width:I,overflowX:"auto"},children:(0,l.jsxs)(o.XI,{style:{width:"100%",tableLayout:"fixed"},children:[(0,l.jsx)(y,{children:E.getHeaderGroups().map(e=>(0,l.jsx)(v,{children:e.headers.map(e=>(0,l.jsx)(x,{colSpan:e.colSpan,style:{width:`${e.column.getSize()}px`},children:e.isPlaceholder?null:(0,l.jsx)("div",{className:r()(c&&"pointer-events-none"),children:(0,p.Kv)(e.column.columnDef.header,e.getContext())})},e.id))},e.id))}),c&&0===i.length?(0,l.jsx)(m,{columns:P.length,rows:N.pageSize,avatarInColumns:a,avatarProps:z}):(0,l.jsx)(C,{children:E.getRowModel().rows.slice(0,k).map(e=>(0,l.jsx)(v,{children:e.getVisibleCells().map(e=>(0,l.jsx)(f,{style:{width:`${e.column.getSize()}px`},children:(0,p.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,l.jsx)(o.dK,{pageSize:k,currentPage:T,total:R,onChange:e=>{c||null===j||void 0===j||j(e)}}),(0,l.jsx)("div",{style:{minWidth:130},children:(0,l.jsx)(o.l6,{size:"sm",menuPlacement:"top",isSearchable:!1,value:B.filter(e=>e.value===k),options:B,onChange:e=>{return t=e.value,void(c||null===w||void 0===w||w(Number(t)));var t}})})]})]})});j.defaultProps={pageSizes:[10,25,50,100],pagingData:{total:0,pageIndex:1,pageSize:10},data:[],columns:[],selectable:!1,loading:!1};const w=j},90642:(e,t,a)=>{"use strict";a.d(t,{Ai:()=>i,Kz:()=>c,Wm:()=>u,ZS:()=>o,aQ:()=>m,eB:()=>l,jz:()=>s,k7:()=>r,lC:()=>d});var n=a(43971);async function s(){return n.A.fetchData({url:"v1/web/company/customer/statistic",method:"get"})}async function r(e){return n.A.fetchData({url:"v1/web/company/customer/update",method:"put",data:e})}async function o(e){return n.A.fetchData({url:"v1/web/company/customer/select",method:"get"})}async function l(e){return n.A.fetchData({url:"v1/web/company/customer/register",method:"post",data:e})}async function i(e){return n.A.fetchData({url:"v1/web/company/customer/update/id",method:"put",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/customer",method:"post",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/customer/details/id",method:"post",data:e})}async function u(){return n.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function m(e){return n.A.fetchData({url:"v1/web/company/customer/delete/id",method:"delete",data:e})}},93950:(e,t,a)=>{var n=a(46686),s=a(4757),r=a(40801),o=Math.max,l=Math.min;e.exports=function(e,t,a){var i,c,d,u,m,g,p=0,h=!1,v=!1,x=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var a=i,n=c;return i=c=void 0,p=t,u=e.apply(n,a)}function y(e){var a=e-g;return void 0===g||a>=t||a<0||v&&e-p>=d}function C(){var e=s();if(y(e))return b(e);m=setTimeout(C,function(e){var a=t-(e-g);return v?l(a,d-(e-p)):a}(e))}function b(e){return m=void 0,x&&i?f(e):(i=c=void 0,u)}function j(){var e=s(),a=y(e);if(i=arguments,c=this,g=e,a){if(void 0===m)return function(e){return p=e,m=setTimeout(C,t),h?f(e):u}(g);if(v)return clearTimeout(m),m=setTimeout(C,t),f(g)}return void 0===m&&(m=setTimeout(C,t)),u}return t=r(t)||0,n(a)&&(h=!!a.leading,d=(v="maxWait"in a)?o(r(a.maxWait)||0,t):d,x="trailing"in a?!!a.trailing:x),j.cancel=function(){void 0!==m&&clearTimeout(m),p=0,i=g=c=m=void 0},j.flush=function(){return void 0===m?u:b(s())},j}}}]);
//# sourceMappingURL=7010.c4c7f9fc.chunk.js.map