(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[3938],{4757:(e,t,a)=>{var r=a(56552);e.exports=function(){return r.Date.now()}},9696:(e,t,a)=>{"use strict";a.d(t,{$S:()=>u,Cb:()=>s,GK:()=>c,_Z:()=>i,gC:()=>o,hk:()=>d,v$:()=>h,yh:()=>l,ze:()=>n});var r=a(43971);async function n(){return r.A.fetchData({url:"v1/web/company/product/codes",method:"get"})}async function s(e){return r.A.fetchData({url:"v1/web/company/po-list/customer/id",method:"post",data:e})}async function l(e){return r.A.fetchData({url:"v1/web/company/stock",method:"get",params:e})}async function o(e){return r.A.fetchData({url:"v1/web/company/stock/delete/id",method:"delete",data:e})}async function i(e){return r.A.fetchData({url:"v1/web/company/stock/update/id",method:"put",data:e})}async function d(e){return r.A.fetchData({url:"v1/web/company/stock/register",method:"post",data:e})}async function c(e){return r.A.fetchData({url:"v1/web/company/purchase/order/register",method:"post",data:e})}async function u(e){return r.A.fetchData({url:"v1/web/company/purchase/order/update/id",method:"put",data:e})}async function h(e){return r.A.fetchData({url:"v1/web/company/purchase/order",method:"post",data:e})}},10143:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},13938:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Y});var r=a(65043),n=a(24603),s=a(49934),l=a(79456),o=a(80907),i=a(9696),d=a(87106);const c=(0,o.zD)("purchase/order/data/all",async e=>{try{return await(0,i.v$)(e)}catch(t){return t.response}}),u=(0,o.zD)("purchase/order/data/delete",async e=>{try{return await(0,d.Tr)(e)}catch(t){return t.response}}),h=(0,o.Z0)({name:"purchase/order/data/list",initialState:{loading:!1,poList:[],tableData:{total:0,pageIndex:1,pageSize:10,query:""},filterData:{status:""}},reducers:{setTableData:(e,t)=>{e.tableData=t.payload},setFilterData:(e,t)=>{e.filterData=t.payload}},extraReducers:{[c.fulfilled]:(e,t)=>{var a;e.poList=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[],e.tableData.table=t.payload.data.total||0,e.loading=!1},[c.pending]:(e,t)=>{e.loading=!0},[u.fulfilled]:(e,t)=>{}}}),{setTableData:p,setFilterData:g}=h.actions,m=h.reducer;var v=a(23533),x=a(73216),f=a(35475),b=a(60446),j=a.n(b),y=a(56434),C=a.n(y),w=a(88705),S=a(93751);const D=(0,o.Z0)({name:"purchase/order/data/list",initialState:{deleteConfirmation:!1,deletePoItemDialog:!1,openDialog:!1,selectedPurchase:{}},reducers:{toggleDeletePoItemDialog:(e,t)=>{e.deletePoItemDialog=t.payload},toggleDeleteConfirmation:(e,t)=>{e.deleteConfirmation=t.payload},toggleDialog:(e,t)=>{e.openDialog=t.payload},setSelectedPurchase:(e,t)=>{e.selectedPurchase=t.payload}}}),{toggleDialog:A,setSelectedPurchase:N,toggleDeleteConfirmation:_}=D.actions,k=D.reducer;var I=a(27176),z=a(70579);const T=(e,t,a)=>s.y8.push((0,z.jsx)(s.Eg,{title:e,type:t,duration:2500,children:a}),{placement:"top-center"}),P=()=>{const[e,t]=(0,r.useState)(!1),a=(0,l.d4)(e=>e.purchase_order_list.data.tableData),n=(0,l.wA)(),s=(0,l.d4)(e=>e.purchase_order_list.state.selectedPurchase),o=(0,l.d4)(e=>e.purchase_order_list.state.deleteConfirmation),i=()=>{n(_(!1))};return(0,z.jsx)(I.TM,{isOpen:o,onClose:i,onRequestClose:i,type:"danger",title:"Delete Purchase Order",onCancel:i,onConfirm:async()=>{var e;t(!0);const r=await n(u({purchase_order_id:null===s||void 0===s?void 0:s.purchase_order_id}));var l,o,d,h;if(t(!1),!((null===(e=r.payload)||void 0===e?void 0:e.status)<300))return T("Unsuccessfully","danger",null===(l=r.payload)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message);T("Successfully Deleted","success",null===(d=r.payload)||void 0===d||null===(h=d.data)||void 0===h?void 0:h.message),i(),n(c(a))},confirmText:e?"Deleting...":"Confirm",confirmButtonColor:"red-600",children:(0,z.jsx)("p",{children:"Are you sure you want to delete this Purchase Order? This action cannot be undone."})})},R={delivered:{label:"Delivered",bgClass:"bg-emerald-100",textClass:"text-emerald-600"},accepted:{label:"Accepted",bgClass:"bg-emerald-100",textClass:"text-emerald-600"},received:{label:"Received",bgClass:"bg-emerald-100",textClass:"text-emerald-600"},rejected:{label:"Rejected",bgClass:"bg-red-100",textClass:"text-red-600"},processing:{label:"Processing",bgClass:"bg-yellow-100",textClass:"text-yellow-600"},pending:{label:"Pending",bgClass:"bg-blue-100",textClass:"text-blue-600"}},M=e=>{let{row:t}=e;const{textTheme:a}=(0,v.A)(),r=(0,l.wA)(),n=(0,x.Zp)();return(0,z.jsx)("div",{className:"flex justify-center text-lg gap-x-4",children:"pending"===(null===t||void 0===t?void 0:t.status)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{className:`cursor-pointer hover:${a}`,onClick:()=>{n(`/purchaseOrder/edit/${t.purchase_order_id}`)},children:(0,z.jsx)(S.VUG,{})}),(0,z.jsx)("span",{className:"cursor-pointer hover:text-red-500",onClick:()=>{r(_(!0)),r(N(t))},children:(0,z.jsx)(S.yRo,{})})]})})},$=e=>{let{row:t}=e;const{textTheme:a}=(0,v.A)();return(0,z.jsx)(s.m_,{title:(0,z.jsxs)("div",{children:["View ",(0,z.jsx)("strong",{className:"text-yellow-400",children:"Purchase"})," Order"]}),children:(0,z.jsx)(f.N_,{className:`hover:${a} font-semibold`,to:`/purchase/order/details/${null===t||void 0===t?void 0:t.purchase_order_id}`,children:null===t||void 0===t?void 0:t.number})})},K=e=>{let{status:t}=e;const a=(0,l.wA)(),n=(0,l.d4)(e=>e.purchase_order_list.data.poList),o=(0,l.d4)(e=>e.purchase_order_list.data.loading),i=[{header:"PO Number",accessorKey:"number",cell:e=>{const t=e.row.original;return(0,z.jsx)($,{row:t})}},{header:"Customer",accessorKey:"Customer.name",cell:e=>{const{Customer:t}=e.row.original,a=(null===t||void 0===t?void 0:t.name.split(" ")).map(e=>e.charAt(0).toUpperCase()).join("");return(0,z.jsx)("div",{className:"uppercase",children:a})}},{header:"C. Code",accessorKey:"Customer.customer_code",cell:e=>{const t=e.row.original;return(0,z.jsx)("div",{children:null===t||void 0===t?void 0:t.Customer.customer_code})}},{header:"C. Type",accessorKey:"Customer.type",cell:e=>{const t=e.row.original;return(0,z.jsx)("div",{className:"capitalize",children:null===t||void 0===t?void 0:t.Customer.type})}},{header:"Mobile",accessorKey:"",cell:e=>{var t,a;const r=e.row.original;return(0,z.jsx)("div",{children:(null===r||void 0===r||null===(t=r.Customer)||void 0===t?void 0:t.mobile)||(null===r||void 0===r||null===(a=r.Customer)||void 0===a?void 0:a.phone)})}},{header:"Status",accessorKey:"status",cell:e=>{var t,a,r;const n=e.row.original;return(0,z.jsx)("div",{className:"mr-2",children:(0,z.jsx)(s.vw,{className:`${null===(t=R[null===n||void 0===n?void 0:n.status])||void 0===t?void 0:t.bgClass} ${null===(a=R[null===n||void 0===n?void 0:n.status])||void 0===a?void 0:a.textClass} border-0`,children:null===(r=R[null===n||void 0===n?void 0:n.status])||void 0===r?void 0:r.label})})}},{header:"PO Date",accessorKey:"po_date",cell:e=>{const t=e.row.original;return(0,z.jsx)("div",{children:j()(t.date).format("DD-MMM-YYYY")})}},{header:"action",accessorKey:"action",cell:e=>{const t=e.row.original;return(0,z.jsx)(M,{row:t})}}];"pending"!==t&&i.splice(i.length-1,0,{header:`${"processing"===t||"received"===t?"Accepted":t.toUpperCase()} Remark`,accessorKey:"status_remark",cell:e=>{const t=e.row.original;return(0,z.jsx)("div",{children:null===t||void 0===t?void 0:t.status_remark})}});const{pageIndex:d,pageSize:u,sort:h,query:g,total:m}=(0,l.d4)(e=>e.purchase_order_list.data.tableData),v=(0,r.useCallback)(()=>{a(c({pageIndex:d,pageSize:u,sort:h,query:g,status:t}))},[d,u,h,g,t,a]);(0,r.useEffect)(()=>{v()},[v,d,u,h,t]);const x=(0,r.useMemo)(()=>({pageIndex:d,pageSize:u,sort:h,query:g,total:m}),[d,u,h,g,m]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(w.A,{columns:i,data:n,loading:o,pagingData:{pageIndex:d,pageSize:u,sort:h,query:g,total:m},onPaginationChange:e=>{const t=C()(x);t.pageIndex=e,a(p(t))},onSelectChange:e=>{const t=C()(x);t.pageSize=Number(e),t.pageIndex=1,a(p(t))}}),(0,z.jsx)(P,{})]})};const B=(0,a(50805).HY)({data:m,state:k});var O=a(93950),Z=a.n(O);const q=(0,r.forwardRef)((e,t)=>{const{onInputChange:a}=e,r=Z()(function(e){null===a||void 0===a||a(e)},500);return(0,z.jsx)(s.pd,{ref:t,className:"max-w-md md:w-52",size:"sm",placeholder:"Search",prefix:(0,z.jsx)(S.oF9,{className:"text-lg"}),onChange:e=>{r(e.target.value)}})}),E=()=>{const e=(0,l.wA)(),t=(0,r.useRef)(),a=(0,l.d4)(e=>e.purchase_order_list.data.tableData),n=t=>{e(p(t)),e(c(t))};return(0,z.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4",children:[(0,z.jsx)("h3",{children:"Purchase Orders"}),(0,z.jsxs)("div",{className:"flex gap-4",children:[(0,z.jsx)(q,{ref:t,onInputChange:e=>{const t=C()(a);t.query=e,t.pageIndex=1,"string"===typeof e&&e.length>1&&n(t),"string"===typeof e&&0===e.length&&n(t)}}),(0,z.jsx)(s.$n,{size:"sm",onClick:()=>{const e=C()(a);e.query="",t.current.value="",n(e)},children:"Clear All"})]})]})};(0,n.Mh)("purchase_order_list",B);const{TabNav:F,TabList:H,TabContent:U}=s.tU,Y=()=>(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(s.tU,{defaultValue:"tab1",children:[(0,z.jsxs)(H,{children:[(0,z.jsx)(F,{value:"tab1",children:(0,z.jsx)(s.vw,{className:"bg-blue-100 text-blue-600\n              } border-0",children:"Pending"})}),(0,z.jsx)(F,{value:"tab2",children:(0,z.jsx)(s.vw,{className:"bg-emerald-100 text-emerald-600\n              } border-0",children:"Accepted"})}),(0,z.jsx)(F,{value:"tab3",children:(0,z.jsx)(s.vw,{className:"bg-yellow-100 text-yellow-600\n              } border-0",children:"Processing"})}),(0,z.jsx)(F,{value:"tab4",children:(0,z.jsx)(s.vw,{className:"bg-red-100 text-red-600\n              } border-0",children:"Rejected"})}),(0,z.jsx)(F,{value:"tab5",children:(0,z.jsx)(s.vw,{className:"bg-emerald-100 text-emerald-600\n              } border-0",children:"Received"})}),(0,z.jsx)(F,{value:"tab6",children:(0,z.jsx)(s.vw,{className:"bg-purple-100 text-purple-600\n              } border-0",children:"Cancelled"})})]}),(0,z.jsxs)("div",{className:"p-4",children:[(0,z.jsxs)(U,{value:"tab1",children:[(0,z.jsx)(E,{}),(0,z.jsx)(s.Zp,{children:(0,z.jsx)(K,{status:"pending"})})]}),(0,z.jsxs)(U,{value:"tab2",children:[(0,z.jsx)(E,{}),(0,z.jsx)(s.Zp,{children:(0,z.jsx)(K,{status:"accepted"})})]}),(0,z.jsxs)(U,{value:"tab3",children:[(0,z.jsx)(E,{}),(0,z.jsx)(s.Zp,{children:(0,z.jsx)(K,{status:"processing"})})]}),(0,z.jsxs)(U,{value:"tab4",children:[(0,z.jsx)(E,{}),(0,z.jsx)(s.Zp,{children:(0,z.jsx)(K,{status:"rejected"})})]}),(0,z.jsxs)(U,{value:"tab5",children:[(0,z.jsx)(E,{}),(0,z.jsx)(s.Zp,{children:(0,z.jsx)(K,{status:"received"})})]}),(0,z.jsxs)(U,{value:"tab6",children:[(0,z.jsx)(E,{}),(0,z.jsx)(s.Zp,{children:(0,z.jsx)(K,{status:"cancelled"})})]})]})]})})},40801:(e,t,a)=>{var r=a(61141),n=a(46686),s=a(19841),l=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=o.test(e);return a||i.test(e)?d(e.slice(2),a?2:8):l.test(e)?NaN:+e}},61141:(e,t,a)=>{var r=a(10143),n=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(n,""):e}},87106:(e,t,a)=>{"use strict";a.d(t,{DI:()=>n,Ju:()=>s,Tr:()=>l,xO:()=>o});var r=a(43971);async function n(e){return r.A.fetchData({url:"v1/web/company/purchase/order/id",method:"post",data:e})}async function s(e){return r.A.fetchData({url:"v1/web/company/purchase/order/status",method:"post",data:e})}async function l(e){return r.A.fetchData({url:"v1/web/company/purchase/order/delete/id",method:"delete",data:e})}async function o(e){return r.A.fetchData({url:"v1/web/company/purchase/order/check/number",method:"post",data:e})}},88705:(e,t,a)=>{"use strict";a.d(t,{A:()=>w});var r=a(65043),n=a(98139),s=a.n(n),l=a(49934),o=a(70579);const{Tr:i,Td:d,TBody:c}=l.XI,u=e=>{const{columns:t,rows:a,avatarInColumns:r,avatarProps:n}=e;return(0,o.jsx)(c,{children:Array.from(new Array(a),(e,t)=>t+0).map(e=>(0,o.jsx)(i,{children:Array.from(new Array(t),(e,t)=>t+0).map(e=>(0,o.jsx)(d,{children:(0,o.jsxs)("div",{className:"flex flex-auto items-center gap-2",children:[r.includes(e)&&(0,o.jsx)("div",{children:(0,o.jsx)(l.EA,{variant:"circle",...n})}),(0,o.jsx)(l.EA,{})]})},`col-${e}`))},`row-${e}`))})};u.defaultProps={columns:1,rows:10,avatarInColumns:[]};const h=u;var p=a(6023),g=a(58931),m=a(47111);const{Tr:v,Th:x,Td:f,THead:b,TBody:j}=l.XI,y=e=>{const{indeterminate:t,onChange:a,onCheckBoxChange:n,onIndeterminateCheckBoxChange:s,...i}=e,d=(0,r.useRef)(null);(0,r.useEffect)(()=>{"boolean"===typeof t&&(d.current.indeterminate=!i.checked&&t)},[d,t]);return(0,o.jsx)(l.Sc,{className:"mb-0",ref:d,onChange:(e,t)=>(e=>{a(e),null===n||void 0===n||n(e),null===s||void 0===s||s(e)})(t),...i})},C=(0,r.forwardRef)((e,t)=>{const{skeletonAvatarColumns:a,columns:n,data:i,loading:d,onCheckBoxChange:c,onIndeterminateCheckBoxChange:u,onPaginationChange:C,onSelectChange:w,onSort:S,pageSizes:D,selectable:A,skeletonAvatarProps:N,pagingData:_,tableWidth:k="100%"}=e,{pageSize:I,pageIndex:z,total:T}=_,[P,R]=(0,r.useState)(null),M=(0,r.useMemo)(()=>D.map(e=>({value:e,label:`${e} / page`})),[D]);(0,r.useEffect)(()=>{if(Array.isArray(P)){const e=P.length>0?P[0].desc?"desc":"asc":"",t=P.length>0?P[0].id:"";null===S||void 0===S||S({order:e,key:t})}},[P]);const $=n.some(e=>e.Header||e.accessor||e.Cell),K=(0,r.useMemo)(()=>{const e=n.map(e=>({...e,size:e.size||void 0,minSize:e.minSize||100,maxSize:e.maxSize||300}));return A?[{id:"select",header:e=>{let{table:t}=e;return(0,o.jsx)(y,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:e=>{var a,r;a=e.target.checked,r=t.getRowModel().rows,d||null===u||void 0===u||u(a,r)}})},cell:e=>{let{row:t}=e;return(0,o.jsx)(y,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler(),onCheckBoxChange:e=>((e,t)=>{d||null===c||void 0===c||c(e,t)})(e.target.checked,t.original)})},size:50,minSize:50,maxSize:50},...e]:e},[n,A]),B=(0,g.N4)({data:i,columns:$?[]:K,getCoreRowModel:(0,m.HT)(),getFilteredRowModel:(0,m.hM)(),getPaginationRowModel:(0,m.kW)(),getSortedRowModel:(0,m.h5)(),manualPagination:!0,manualSorting:!0,onSortingChange:R,state:{sorting:P},columnResizeMode:"onChange"}),O=()=>{B.resetSorting()},Z=()=>{B.toggleAllRowsSelected(!1)};if((0,r.useImperativeHandle)(t,()=>({resetSorting:O,resetSelected:Z})),$){const e="You are using old react-table v7 column config, please use v8 column config instead, refer to our demo or https://tanstack.com/table/v8";return(0,o.jsx)(l.Fc,{children:e})}return(0,o.jsxs)(p.A,{loading:d&&0!==i.length,type:"cover",children:[(0,o.jsx)("div",{style:{width:k,overflowX:"auto"},children:(0,o.jsxs)(l.XI,{style:{width:"100%",tableLayout:"fixed"},children:[(0,o.jsx)(b,{children:B.getHeaderGroups().map(e=>(0,o.jsx)(v,{children:e.headers.map(e=>(0,o.jsx)(x,{colSpan:e.colSpan,style:{width:`${e.column.getSize()}px`},children:e.isPlaceholder?null:(0,o.jsx)("div",{className:s()(d&&"pointer-events-none"),children:(0,g.Kv)(e.column.columnDef.header,e.getContext())})},e.id))},e.id))}),d&&0===i.length?(0,o.jsx)(h,{columns:K.length,rows:_.pageSize,avatarInColumns:a,avatarProps:N}):(0,o.jsx)(j,{children:B.getRowModel().rows.slice(0,I).map(e=>(0,o.jsx)(v,{children:e.getVisibleCells().map(e=>(0,o.jsx)(f,{style:{width:`${e.column.getSize()}px`},children:(0,g.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,o.jsx)(l.dK,{pageSize:I,currentPage:z,total:T,onChange:e=>{d||null===C||void 0===C||C(e)}}),(0,o.jsx)("div",{style:{minWidth:130},children:(0,o.jsx)(l.l6,{size:"sm",menuPlacement:"top",isSearchable:!1,value:M.filter(e=>e.value===I),options:M,onChange:e=>{return t=e.value,void(d||null===w||void 0===w||w(Number(t)));var t}})})]})]})});C.defaultProps={pageSizes:[10,25,50,100],pagingData:{total:0,pageIndex:1,pageSize:10},data:[],columns:[],selectable:!1,loading:!1};const w=C},93950:(e,t,a)=>{var r=a(46686),n=a(4757),s=a(40801),l=Math.max,o=Math.min;e.exports=function(e,t,a){var i,d,c,u,h,p,g=0,m=!1,v=!1,x=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var a=i,r=d;return i=d=void 0,g=t,u=e.apply(r,a)}function b(e){var a=e-p;return void 0===p||a>=t||a<0||v&&e-g>=c}function j(){var e=n();if(b(e))return y(e);h=setTimeout(j,function(e){var a=t-(e-p);return v?o(a,c-(e-g)):a}(e))}function y(e){return h=void 0,x&&i?f(e):(i=d=void 0,u)}function C(){var e=n(),a=b(e);if(i=arguments,d=this,p=e,a){if(void 0===h)return function(e){return g=e,h=setTimeout(j,t),m?f(e):u}(p);if(v)return clearTimeout(h),h=setTimeout(j,t),f(p)}return void 0===h&&(h=setTimeout(j,t)),u}return t=s(t)||0,r(a)&&(m=!!a.leading,c=(v="maxWait"in a)?l(s(a.maxWait)||0,t):c,x="trailing"in a?!!a.trailing:x),C.cancel=function(){void 0!==h&&clearTimeout(h),g=0,i=p=d=h=void 0},C.flush=function(){return void 0===h?u:y(n())},C}}}]);
//# sourceMappingURL=3938.0eb6a907.chunk.js.map