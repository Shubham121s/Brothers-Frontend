"use strict";(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[9500],{49500:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ke});var n=i(65043),o=i(49934),s=i(70579);const a=e=>{const{data:t,address:i,title:n}=e;return(0,s.jsxs)(o.Zp,{className:"h-full",bodyClass:"pt-2",children:[(0,s.jsx)("h6",{className:"font-normal text-center text-gray-500 uppercase mb-1",children:n}),(0,s.jsx)("h6",{className:"text-gray-600 font-semibold uppercase",children:null===t||void 0===t?void 0:t.name}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Vender Code :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.vender_code)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Mobile :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.mobile)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Email :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.email)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"PAN No :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.pan)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"GST No :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.gst_no)||"-"})]})]})},l=e=>{const{data:t}=e;return(0,s.jsxs)(o.Zp,{className:"h-full",bodyClass:"pt-2",children:[(0,s.jsx)("h6",{className:"font-normal text-center text-gray-500 uppercase mb-1",children:"Shipping Address"}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Country :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.country)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"State :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.state)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"City :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.city)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"ZIP Code :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.zip_code)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Contact Person :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.contact_person)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Contact Phone :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.contact_phone)||"-"})]})]})},d=e=>{const{data:t}=e;return(0,s.jsxs)(o.Zp,{bodyClass:"pt-2",className:"h-fill",children:[(0,s.jsx)("h6",{className:"font-normal text-center text-gray-500 uppercase mb-1",children:"Shipping Details"}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Place of receipt :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.place_of_receipt)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Port of discharge :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.port_of_discharge)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Port of loading :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.port_of_loading)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Country of goods :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.country_of_goods)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Country of destination :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.country_of_destination)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Final destination :"})," ",(0,s.jsx)("span",{children:(null===t||void 0===t?void 0:t.final_destination)||"-"})]})]})};var r=i(79456),c=i(80899),u=i(63516),h=i(60446),v=i.n(h);const p=()=>{var e,t,i;const n=(0,r.d4)(e=>e.edit_foreign_dispatch.state.selectedDispatchItem);return(0,s.jsxs)(o.Zp,{className:"mt-2 bg-emerald-50",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"PO Number :"})," ",(0,s.jsx)("span",{children:(null===n||void 0===n||null===(e=n.Po)||void 0===e?void 0:e.number)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Currency Type :"})," ",(0,s.jsx)("span",{children:(null===n||void 0===n||null===(t=n.Po)||void 0===t?void 0:t.currency_type)||"USD"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Po Date :"})," ",(0,s.jsx)("span",{children:v()(null===n||void 0===n||null===(i=n.Po)||void 0===i?void 0:i.date).format("DD-MMM-YYYY")||"-"})]})]})},m=(0,n.memo)(p),x=e=>{var t,i,n,a;const l=(0,r.d4)(e=>e.edit_foreign_dispatch.state.selectedDispatchItem);return(0,s.jsxs)(o.Zp,{className:"mt-2 bg-orange-50",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"PO Sr. No :"})," ",(0,s.jsx)("span",{children:(null===l||void 0===l||null===(t=l.PoList)||void 0===t?void 0:t.serial_number)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"PO Del Date :"})," ",(0,s.jsx)("span",{children:v()(null===l||void 0===l||null===(i=l.PoList)||void 0===i?void 0:i.delivery_date).format("DD-MMM-YYYY")||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Item Co. :"})," ",(0,s.jsx)("span",{children:null===l||void 0===l?void 0:l.item_code})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Price :"})," ",(0,s.jsx)("span",{children:(null===l||void 0===l||null===(n=l.PoList)||void 0===n?void 0:n.unit_price)||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Qty :"})," ",(0,s.jsx)("span",{children:(null===l||void 0===l||null===(a=l.PoList)||void 0===a?void 0:a.quantity)||"-"})]})]})]})};var f=i(93751);const y=e=>{const{dispatchList:t}=e,i=(0,r.d4)(e=>e.edit_foreign_dispatch.state.selectedDispatchItem),[a,l]=(0,n.useState)((null===i||void 0===i?void 0:i.item_quantity)||0),[d,c]=(0,n.useState)(0);return(0,n.useEffect)(()=>{var e,n,o;c((null===i||void 0===i||null===(e=i.PoList)||void 0===e?void 0:e.quantity)-(null===(n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===e||void 0===e?void 0:e.reduce((e,t)=>null===e||void 0===e?void 0:e.concat(t.DispatchLists),[])}(t))||void 0===n||null===(o=n.filter(e=>{var t,n;return(null===e||void 0===e||null===(t=e.PoList)||void 0===t?void 0:t.po_list_id)===(null===i||void 0===i||null===(n=i.PoList)||void 0===n?void 0:n.po_list_id)}))||void 0===o?void 0:o.reduce((e,t)=>e+parseInt(null===t||void 0===t?void 0:t.item_quantity),0)))},[i]),(0,s.jsx)(o.eI,{label:"Quantity",className:"mb-4",children:(0,s.jsx)(u.D0,{name:"quantity",children:e=>{let{field:t,form:i}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-1",children:[(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)(o.$n,{className:"w-full",style:{borderRadius:"5px 0px 0px 5px"},type:"button",icon:(0,s.jsx)(f.GRP,{}),disabled:1===a||""===a,onClick:()=>{c(1+d),l(+parseInt(a||0)-1),i.setFieldValue("item_quantity",a-1)}})}),(0,s.jsxs)("div",{className:"col-span-2 grid grid-cols-2 gap-1",children:[(0,s.jsx)(o.Zp,{className:"flex justify-center items-center",bodyClass:"p-0 flex justify-center item-center",children:d}),(0,s.jsx)(o.Zp,{className:"flex justify-center items-center",bodyClass:"p-0 flex justify-center item-center",children:a})]}),(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)(o.$n,{className:"w-full",style:{borderRadius:"0px 5px 5px 0px"},disabled:0===d,icon:(0,s.jsx)(f.s00,{}),type:"button",onClick:()=>{c(d-1),l(+parseInt(a||0)+1),i.setFieldValue("item_quantity",a+1)}})})]})}})})},g=(0,n.memo)(y),j=e=>{var t,i;const{quantity:n=0,currency:a,unitPrice:l=0}=e,d=(0,r.d4)(e=>e.edit_foreign_dispatch.state.selectedDispatchItem);return(0,s.jsx)(o.eI,{label:"Total Amount",className:"mb-4",children:(0,s.jsx)(u.D0,{disabled:!0,placeholder:"Total Amount",prefix:null===d||void 0===d||null===(t=d.Po)||void 0===t?void 0:t.currency_type,value:(Number(null===d||void 0===d||null===(i=d.PoList)||void 0===i?void 0:i.unit_price)*Number(n)).toFixed(2),component:o.pd})})},b=(0,n.memo)(j),_=c.Ik().shape({item_quantity:c.ai().required("Required")}),D=(0,n.forwardRef)((e,t)=>{const{initialData:i,onDiscard:n,handleFormSubmit:a,dispatchList:l}=e;return(0,s.jsx)(u.l1,{innerRef:t,initialValues:{...i},validationSchema:_,onSubmit:(e,t)=>{let{setSubmitting:i}=t;null===a||void 0===a||a(e,i)},children:e=>{let{values:t,setFieldValue:i,isSubmitting:a}=e;return(0,s.jsx)(u.lV,{children:(0,s.jsxs)(o.MG,{children:[(0,s.jsx)("h4",{children:"Update Item Information"}),(0,s.jsx)("p",{className:"mb-3",children:"Section to config add item information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(m,{}),(0,s.jsx)(x,{}),(0,s.jsx)(g,{dispatchList:l,setFieldValue:i}),(0,s.jsx)(b,{quantity:t.item_quantity})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end mt-4",children:[(0,s.jsx)(o.$n,{size:"sm",type:"button",variant:"",onClick:()=>null===n||void 0===n?void 0:n(),children:"Discard"}),(0,s.jsx)(o.$n,{size:"sm",variant:"solid",type:"submit",loading:a,children:"Update"})]})]})})}})});D.defaultProps={initialData:{item_quantity:0,PoList:null,Po:null,item_weight:""}};const w=D;const N=(0,i(80907).Z0)({name:"edit/foreign/invoice/state",initialState:{editDispatchItemDialog:!1,addDispatchItemDialog:{option:!0,locationIndex:null},deleteConfirmation:!1,selectedDispatchItem:{},newBoxDialog:!1,editBoxDialog:!1,deleteBoxDialog:!1,selectedBox:{}},reducers:{toggleEditDispatchItemDialog:(e,t)=>{e.editDispatchItemDialog=t.payload},togglDeleteConfirmationDialog:(e,t)=>{e.deleteConfirmation=t.payload},setSelectedDispatchItem:(e,t)=>{e.selectedDispatchItem=t.payload},toggleNewBoxDialog:(e,t)=>{e.newBoxDialog=t.payload},toggleDeleteBoxDialog:(e,t)=>{e.deleteBoxDialog=t.payload},toggleEditBoxDialog:(e,t)=>{e.editBoxDialog=t.payload},setSelectedBox:(e,t)=>{e.selectedBox=t.payload},toggleAddDispatchItemDialog:(e,t)=>{e.addDispatchItemDialog=t.payload}}}),{setSelectedDispatchItem:I,toggleEditDispatchItemDialog:P,togglDeleteConfirmationDialog:A,setSelectedBox:C,toggleEditBoxDialog:L,toggleDeleteBoxDialog:B,toggleNewBoxDialog:S,toggleAddDispatchItemDialog:q}=N.actions,M=N.reducer;var F=i(49836);const R=(e,t,i)=>o.y8.push((0,s.jsx)(o.Eg,{title:i,type:t,duration:2500,children:e}),{placement:"top-center"}),E=e=>{const{dispatchList:t=[],fetchData:i}=e,n=(0,r.wA)(),a=(0,r.d4)(e=>e.edit_foreign_dispatch.state.editDispatchItemDialog),l=(0,r.d4)(e=>e.edit_foreign_dispatch.state.selectedDispatchItem),d=()=>{n(P(!1))};return(0,s.jsx)(o.lG,{isOpen:a,onClose:d,onRequestClose:d,children:(0,s.jsx)(w,{initialData:l,dispatchList:t,handleFormSubmit:async(e,t)=>{var o,s,a;t(!0);const l=await n((0,F.OW)(e));var r,c;return t(!1),200===(null===(o=l.payload)||void 0===o?void 0:o.status)?(R(null===l||void 0===l||null===(r=l.payload)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message,"success","Successfully updated"),null===i||void 0===i||i(),d()):R(null===l||void 0===l||null===(s=l.payload)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message,"danger","Unsuccessfully updated")},onDiscard:d})})},z=(0,n.memo)(E);var T=i(24603);const V=(0,i(50805).HY)({data:F.Ay,state:M});var k=i(27176),O=i(54320),Y=i.n(O),K=i(73216),$=i(58931),Z=i(47111),U=(i(52157),i(23533));const{Tr:H,Th:G,Td:W,THead:X,TBody:Q,TFoot:J}=o.XI,ee=e=>{let{row:t,initialData:i}=e;const{textTheme:n}=(0,U.A)(),o=(0,r.wA)();return(0,s.jsxs)("div",{className:"flex justify-center text-lg gap-x-4",children:[(0,s.jsx)("span",{className:`cursor-pointer hover:${n}`,onClick:()=>{o(P(!0)),o(I(t))},children:(0,s.jsx)(f.VUG,{})}),i.length>1&&(0,s.jsx)("span",{className:`cursor-pointer hover:${n}`,onClick:()=>{o(A(!0)),o(I(t))},children:(0,s.jsx)(f.yRo,{})})]})},te=function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(i=>i[e]===t)},ie=e=>{let{initialData:t=[],dispatchList:i,boxes:a}=e;console.log(a);const l=(0,n.useMemo)(()=>[{header:"POs details & Delivery Date",columns:[{header:"project no",accessorKey:"project_no",cell:e=>{var t;const i=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:`${(null===i||void 0===i||null===(t=i.PoList)||void 0===t?void 0:t.project_no)||"-"}`})}},{header:"po no & sr no",accessorKey:"PoList",cell:e=>{var t,i;const n=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:`${null===n||void 0===n||null===(t=n.Po)||void 0===t?void 0:t.number}-${null===n||void 0===n||null===(i=n.PoList)||void 0===i?void 0:i.serial_number}`})}},{header:"Delivery Date",accessorKey:"delivery_date",cell:e=>{var t;const i=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:v()(null===i||void 0===i||null===(t=i.PoList)||void 0===t?void 0:t.delivery_date).format("DD-MM-YYYY")})}}]},{header:"Description of goods",columns:[{header:"product name",accessorKey:"name",cell:e=>{const t=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:null===t||void 0===t?void 0:t.item_name})}},{header:"item code",accessorKey:"item_code",cell:e=>{const t=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:null===t||void 0===t?void 0:t.item_code})}},{header:"hsn code",accessorKey:"hsn_code",cell:e=>{const t=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:null===t||void 0===t?void 0:t.hsn_code})}}]},{header:"qty (No) & amount (USD)",columns:[{header:"qty",accessorKey:"PoList.quantity",cell:e=>{const t=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:null===t||void 0===t?void 0:t.item_quantity})}},{header:"rate",accessorKey:"unit_price",cell:e=>{var t;const i=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:Number(null===i||void 0===i||null===(t=i.PoList)||void 0===t?void 0:t.unit_price).toFixed(2)})}},{header:"total",accessorKey:"net_amount",cell:e=>{var t;const i=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:Number((null===i||void 0===i||null===(t=i.PoList)||void 0===t?void 0:t.unit_price)*(null===i||void 0===i?void 0:i.item_quantity)).toFixed(2)})}}]},{header:"Box & Weight (Kg)",columns:[{header:"Box",accessorKey:"DispatchBox.box_no",cell:e=>{var t;const i=e.row.original;return(0,s.jsx)("div",{className:"text-center",children:`BOX NO ${null===(t=te(a,"dispatch_box_list_id",null===i||void 0===i?void 0:i.dispatch_box_id))||void 0===t?void 0:t.box_no}`})}},{header:"weight",accessorKey:"weight",cell:e=>{const t=e.row.original;return console.log(t.item_weight),(0,s.jsx)("div",{className:"uppercase text-center",children:Number(null===t||void 0===t?void 0:t.item_weight).toFixed(3)})}},{header:"total",accessorKey:"total_weight",cell:e=>{const t=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:Number((null===t||void 0===t?void 0:t.item_weight)*(null===t||void 0===t?void 0:t.item_quantity)).toFixed(3)})}}]},{header:"-",columns:[{header:"",accessorKey:"action",cell:e=>{const i=e.row.original;return(0,s.jsx)(ee,{row:i,initialData:t})}}]}],[t,i]);console.log(t);const d=(0,$.N4)({data:t,columns:l,getCoreRowModel:(0,Z.HT)()});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.XI,{compact:!0,children:[(0,s.jsx)(X,{children:d.getHeaderGroups().map(e=>(0,s.jsx)(H,{children:e.headers.map(e=>(0,s.jsx)(G,{style:{border:".5px solid #e0e0e0",textAlign:"center"},className:"select-none",colSpan:e.colSpan,children:(0,$.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(Q,{children:d.getRowModel().rows.map(e=>(0,s.jsx)(H,{children:e.getVisibleCells().map(e=>(0,s.jsx)(W,{style:{border:".5px solid #e0e0e0"},className:"select-none",children:(0,$.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})})},ne=(0,n.memo)(ie),oe=(e,t,i)=>o.y8.push((0,s.jsx)(o.Eg,{title:e,type:t,duration:2500,children:i}),{placement:"top-center"}),se=e=>{let{fetchData:t}=e;const[i,o]=(0,n.useState)(!1),a=(0,r.wA)(),l=(0,r.d4)(e=>e.edit_foreign_dispatch.state.selectedDispatchItem),d=(0,r.d4)(e=>e.edit_foreign_dispatch.state.deleteConfirmation),c=()=>{a(A(!1))};return(0,s.jsx)(k.TM,{isOpen:d,onClose:c,onRequestClose:c,type:"danger",title:"Delete Drawing",onCancel:c,onConfirm:async()=>{var e;o(!0);const i=await a((0,F.g0)({dispatch_list_id:null===l||void 0===l?void 0:l.dispatch_list_id}));var n,s,d,r;return o(!1),200===(null===(e=i.payload)||void 0===e?void 0:e.status)?(oe("Successfully Deleted","success",null===(n=i.payload)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message),null===t||void 0===t||t(),c()):oe("Unsuccessfully","danger",null===(d=i.payload)||void 0===d||null===(r=d.data)||void 0===r?void 0:r.message)},confirmText:i?"Deleting...":"Confirm",confirmButtonColor:"red-600",children:(0,s.jsx)("p",{children:"Are you sure you want to delete this Product? This action cannot be undone."})})},ae=[{label:"MILLIMETER (MM)",value:"mm"},{label:"CENTIMETER (CM)",value:"cm"},{label:"INCH (INCH)",value:"inch"},{label:"METER (M)",value:"m"}],le=e=>{const{touched:t,errors:i,values:n,index:a}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(o.eI,{className:"mb-4",label:"Box no",children:(0,s.jsx)(u.D0,{type:"text",name:"box_no",placeholder:"No of box",component:o.pd})}),(0,s.jsx)(o.eI,{className:"mb-4",label:"Box size type",invalid:(null===i||void 0===i?void 0:i.box_size_type)&&(null===t||void 0===t?void 0:t.box_size_type),errorMessage:null===i||void 0===i?void 0:i.box_size_type,children:(0,s.jsx)(u.D0,{name:"box_size_type",children:e=>{let{field:t,form:i}=e;return(0,s.jsx)(o.l6,{field:t,form:i,options:ae,value:ae.filter(e=>e.value===n.box_size_type),onChange:e=>i.setFieldValue(t.name,e.value)})}})}),(0,s.jsx)(o.eI,{className:"mb-4",label:"Length",invalid:(null===i||void 0===i?void 0:i.box_length)&&(null===t||void 0===t?void 0:t.box_length),errorMessage:null===i||void 0===i?void 0:i.box_length,children:(0,s.jsx)(u.D0,{type:"number",name:"box_length",placeholder:"Box Length",component:o.pd,suffix:n.box_size_type})}),(0,s.jsx)(o.eI,{className:"mb-4",label:"Breadth",invalid:(null===i||void 0===i?void 0:i.box_breadth)&&(null===t||void 0===t?void 0:t.box_breadth),errorMessage:null===i||void 0===i?void 0:i.box_breadth,children:(0,s.jsx)(u.D0,{type:"number",name:"box_breadth",placeholder:"Box Breadth",component:o.pd,suffix:n.box_size_type})}),(0,s.jsx)(o.eI,{className:"mb-4",label:"Height",invalid:(null===i||void 0===i?void 0:i.box_height)&&(null===t||void 0===t?void 0:t.box_height),errorMessage:null===i||void 0===i?void 0:i.box_height,children:(0,s.jsx)(u.D0,{type:"number",name:"box_height",placeholder:"Box Height",component:o.pd,suffix:n.box_size_type})}),(0,s.jsx)(o.eI,{className:"mb-4",label:"BOX weight",invalid:(null===i||void 0===i?void 0:i.tare_weight)&&(null===t||void 0===t?void 0:t.tare_weight),errorMessage:null===i||void 0===i?void 0:i.tare_weight,children:(0,s.jsx)(u.D0,{type:"number",name:"tare_weight",placeholder:"Box weight",component:o.pd,suffix:"Kg"})})]})},de=(0,n.memo)(le),re=c.Ik().shape({box_length:c.ai().required("Required"),box_breadth:c.ai().required("Required"),box_height:c.ai().required("Required"),tare_weight:c.ai().required("Required"),box_size_type:c.Yj().required("Required")}),ce=(0,n.forwardRef)((e,t)=>{const{initialData:i,handleFormSubmit:n,onDiscard:a,index:l,type:d}=e;return(0,s.jsx)(u.l1,{innerRef:t,initialValues:{...i},validationSchema:re,onSubmit:(e,t)=>{let{setSubmitting:i}=t;null===n||void 0===n||n(e,i)},children:e=>{let{values:t,touched:i,errors:n,isSubmitting:r}=e;return(0,s.jsx)(u.lV,{children:(0,s.jsxs)(o.MG,{children:[(0,s.jsxs)("h4",{children:["new"===d?"New":"Update"," Box Information"]}),(0,s.jsx)("p",{className:"mb-4",children:"Section to config new box information"}),(0,s.jsx)(de,{index:l,values:t,errors:n,touched:i}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)(o.$n,{size:"sm",onClick:()=>null===a||void 0===a?void 0:a(),type:"button",variant:"",children:"Discard"}),(0,s.jsx)(o.$n,{size:"sm",variant:"solid",type:"submit",loading:r,children:"edit"===d?"Update Box":"Add Box"})]})]})})}})});ce.defaultProps={type:"edit",initialData:{index:"",box_length:"",box_breadth:"",box_height:"",box_size_type:"",tare_weight:"",box_no:""}};const ue=ce,he=e=>{const{handleNewBox:t,boxNo:i=1,invoiceId:n,boxes:a}=e,l=(0,r.wA)(),d=(0,r.d4)(e=>e.edit_foreign_dispatch.state.newBoxDialog),c=(e,t,i)=>o.y8.push((0,s.jsx)(o.Eg,{title:i,type:t,duration:2500,children:e}),{placement:"top-center"}),u=()=>{l(S(!1))};return(0,s.jsx)(o.lG,{isOpen:d,onClose:u,onRequestClose:u,children:(0,s.jsx)(ue,{index:i,type:"new",handleFormSubmit:async(e,o)=>{o(!0);const s=await l((0,F.lc)({...e,box_no:i,dispatch_invoice_id:n}));if(200===s.payload.status){var a,d,r,h;o(!1),c("Box Successfully Added","success","Success");let i={...e,box_no:null===(a=s.payload.data)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.box_no,dispatch_box_list_id:null===(r=s.payload.data)||void 0===r||null===(h=r.data)||void 0===h?void 0:h.dispatch_box_list_id};null===t||void 0===t||t(i),u()}else c("Box Not Added","danger","Error"),o(!1)},onDiscard:u})})},ve=e=>{const{handleEditBoxs:t,boxNo:i=1,boxes:n}=e,a=(0,r.wA)(),l=(e,t,i)=>o.y8.push((0,s.jsx)(o.Eg,{title:i,type:t,duration:2500,children:e}),{placement:"top-center"}),d=(0,r.d4)(e=>e.edit_foreign_dispatch.state.editBoxDialog),c=(0,r.d4)(e=>e.edit_foreign_dispatch.state.selectedBox),u=()=>{a(L(!1))};return(0,s.jsx)(o.lG,{isOpen:d,onClose:u,onRequestClose:u,children:(0,s.jsx)(ue,{index:i,type:"edit",initialData:c,handleFormSubmit:async(e,i)=>{i(!0);let n=e;200===(await a((0,F.rj)({...n}))).payload.status?(l("Box Edited Successfully","success","Success"),i(!1),null===t||void 0===t||t(n),u()):(l("Box Not Edited","danger","Error"),i(!1))},onDiscard:u})})},{Tr:pe,Th:me,Td:xe,THead:fe,TBody:ye,TFoot:ge}=o.XI,je=e=>{let{row:t,index:i,handleDeleteBox:n,values:a,dispatchList:l}=e;const d=(0,r.wA)();return(0,s.jsxs)("div",{className:"flex text-lg",children:[(0,s.jsx)("span",{className:"cursor-pointer p-1",onClick:()=>{d(L(!0)),d(C({...t,index:i+1}))},children:(0,s.jsx)(f.VUG,{})}),a.length>1&&(0,s.jsx)("span",{className:"cursor-pointer p-1 hover:text-red-500",onClick:()=>{if(console.log(l),console.log(t),l.some(e=>e.DispatchLists.some(e=>e.dispatch_box_id===(null===t||void 0===t?void 0:t.dispatch_box_list_id))))return e="Cannot Delete Box Already Added In Product Delete Product First",i="danger",n="Error",o.y8.push((0,s.jsx)(o.Eg,{title:n,type:i,duration:2500,children:e}),{placement:"top-center"});var e,i,n;d(C(t)),d(B(!0))},children:(0,s.jsx)(f.yRo,{})})]})},be=e=>{const{handleNewBoxAdd:t,handleDeleteBox:i,className:n,values:a=[],dispatchList:l,handleEditBox:d,invoiceId:r}=e,c=[{header:"Box no",accessorKey:"box",cell:e=>{const t=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:`BOX NO ${(null===t||void 0===t?void 0:t.box_no)||"-"}`})}},{header:"length",accessorKey:"box_length",cell:e=>{var t;const i=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:null===(t=Number(null===i||void 0===i?void 0:i.box_length))||void 0===t?void 0:t.toFixed(2)})}},{header:"breadth",accessorKey:"box_breadth",cell:e=>{var t;const i=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:null===(t=Number(null===i||void 0===i?void 0:i.box_breadth))||void 0===t?void 0:t.toFixed(2)})}},{header:"height",accessorKey:"box_height",cell:e=>{var t;const i=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:null===(t=Number(null===i||void 0===i?void 0:i.box_height))||void 0===t?void 0:t.toFixed(2)})}},{header:"size in",accessorKey:"box_size_type",cell:e=>{const t=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:null===t||void 0===t?void 0:t.box_size_type})}},{header:"box wt. (kg)",accessorKey:"tare_weight",cell:e=>{var t;const i=e.row.original;return(0,s.jsx)("div",{className:"uppercase text-center",children:null===(t=Number(null===i||void 0===i?void 0:i.tare_weight))||void 0===t?void 0:t.toFixed(3)})}},{header:"",accessorKey:"action",cell:e=>{const{original:t,index:n}=e.row;return(0,s.jsx)(je,{row:t,index:n,values:a,handleDeleteBox:i,dispatchList:l})}}],u=(0,$.N4)({data:a,columns:c,getCoreRowModel:(0,Z.HT)()});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.XI,{compact:!0,className:"mb-5",children:[(0,s.jsx)(fe,{className:n,children:u.getHeaderGroups().map(e=>(0,s.jsx)(pe,{children:e.headers.map(e=>(0,s.jsx)(me,{style:{border:".5px solid #e0e0e0",textAlign:"center"},colSpan:e.colSpan,children:(0,$.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(ye,{children:u.getRowModel().rows.map(e=>(0,s.jsx)(pe,{children:e.getVisibleCells().map(e=>(0,s.jsx)(xe,{style:{border:".5px solid #e0e0e0"},children:(0,$.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]}),(0,s.jsx)(he,{handleNewBox:e=>{t(a,e)},boxNo:a.length+1,invoiceId:r,boxes:a}),(0,s.jsx)(ve,{boxNo:a.length+1,handleEditBoxs:e=>{d(a,e)},invoiceId:r,boxes:a})]})},_e=(0,n.memo)(be);var De=i(53536);const we=e=>{const{errors:t,values:i,touched:a}=e,l=(0,r.d4)(e=>e.edit_foreign_dispatch.data.poList),d=(0,n.useMemo)(()=>null===l||void 0===l?void 0:l.map(e=>({label:e.number,value:e})),[l]);return(0,s.jsxs)(o.eI,{className:"mb-4",label:"PO Number",invalid:t&&a,errorMessage:t,children:[(0,s.jsx)(u.D0,{name:"Po",children:e=>{let{field:t,form:n}=e;return(0,s.jsx)(o.l6,{field:t,form:n,options:d,value:d.filter(e=>{var t;return(null===(t=e.value)||void 0===t?void 0:t.po_id)===(null===i||void 0===i?void 0:i.po_id)}),onChange:e=>{n.setFieldValue("PoList",null),n.setFieldValue(t.name,e.value)}})}}),(0,De.isEmpty)(i)?null:(0,s.jsxs)(o.Zp,{className:"mt-2 bg-emerald-50",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"PO Number :"})," ",(0,s.jsx)("span",{children:(null===i||void 0===i?void 0:i.number)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Currency Type :"})," ",(0,s.jsx)("span",{children:(null===i||void 0===i?void 0:i.currency_type)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Po Date :"})," ",(0,s.jsx)("span",{children:v()(null===i||void 0===i?void 0:i.date).format("DD-MMM-YYYY")||"-"})]})]})]})},Ne=(0,n.memo)(we),Ie=e=>{const{errors:t,values:i,Po:a,touched:l}=e,d=(0,n.useMemo)(()=>{var e;return a&&null!==a&&void 0!==a&&a.PoLists?null===a||void 0===a||null===(e=a.PoLists)||void 0===e?void 0:e.map(e=>{var t;return{label:`${null===e||void 0===e?void 0:e.serial_number} : ${null===e||void 0===e||null===(t=e.Product)||void 0===t?void 0:t.name}`,value:e}}):[]},[a]);return(0,s.jsxs)(o.eI,{className:"mb-4",label:"PO Serial Number",invalid:t&&l,errorMessage:t,children:[(0,s.jsx)(u.D0,{name:"PoList",children:e=>{let{field:t,form:n}=e;return(0,s.jsx)(o.l6,{field:t,form:n,options:d,value:null===d||void 0===d?void 0:d.filter(e=>{var t;return(null===(t=e.value)||void 0===t?void 0:t.po_list_id)===(null===i||void 0===i?void 0:i.po_list_id)}),onChange:e=>{n.setFieldValue("quantity",""),n.setFieldValue(t.name,e.value)}})}}),(0,De.isEmpty)(i)?null:(0,s.jsxs)(o.Zp,{className:"mt-2 bg-orange-50",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"PO Sr. No :"})," ",(0,s.jsx)("span",{children:(null===i||void 0===i?void 0:i.serial_number)||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"PO Del Date :"})," ",(0,s.jsx)("span",{children:v()(null===i||void 0===i?void 0:i.delivery_date).format("DD-MMM-YYYY")||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Price :"})," ",(0,s.jsx)("span",{children:(null===i||void 0===i?void 0:i.unit_price)||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Qty :"})," ",(0,s.jsx)("span",{children:(null===i||void 0===i?void 0:i.quantity)||"-"})]})]})]})]})},Pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===e||void 0===e?void 0:e.reduce((e,t)=>null===e||void 0===e?void 0:e.concat(t.poList),[])},Ae=e=>{var t,i;const{errors:a,values:l,touched:d,poList:r,dispatchList:c}=e,[h,v]=(0,n.useState)(l||0),[p,m]=(0,n.useState)(parseInt(null===r||void 0===r?void 0:r.quantity)-parseInt(null===(t=Pe(c))||void 0===t||null===(i=t.filter(e=>{var t;return(null===e||void 0===e||null===(t=e.PoList)||void 0===t?void 0:t.po_list_id)===(null===r||void 0===r?void 0:r.po_list_id)}))||void 0===i?void 0:i.reduce((e,t)=>e+parseInt(null===t||void 0===t?void 0:t.quantity),0))||0);return(0,n.useEffect)(()=>{var e,t;m(parseInt(null===r||void 0===r?void 0:r.quantity)-parseInt(null===(e=Pe(c))||void 0===e||null===(t=e.filter(e=>{var t;return(null===e||void 0===e||null===(t=e.PoList)||void 0===t?void 0:t.po_list_id)===(null===r||void 0===r?void 0:r.po_list_id)}))||void 0===t?void 0:t.reduce((e,t)=>e+parseInt(null===t||void 0===t?void 0:t.quantity),0))||0)},[r]),(0,s.jsx)(o.eI,{label:"Quantity",className:"mb-4",invalid:a&&d,errorMessage:a,children:(0,s.jsx)(u.D0,{name:"quantity",children:e=>{let{field:t,form:i}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-1",children:[(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)(o.$n,{className:"w-full",style:{borderRadius:"5px 0px 0px 5px"},type:"button",icon:(0,s.jsx)(f.GRP,{}),disabled:l<1,onClick:()=>{v(+parseInt(h||0)-1),i.setFieldValue(t.name,+parseInt(l||0)-1)}})}),(0,s.jsxs)("div",{className:"col-span-2 grid grid-cols-2 gap-1",children:[(0,s.jsx)(o.Zp,{className:"flex justify-center items-center",bodyClass:"p-0 flex justify-center item-center",children:p}),(0,s.jsx)(o.pd,{className:"w-full",field:t,form:i,type:"number",autoComplete:"off",value:h||"",onChange:e=>{if(e.target.value>p||""===e.target.value||e.target.value<0)return v(0),i.setFieldValue(t.name,0);v(parseInt(e.target.value)),i.setFieldValue(t.name,+parseInt(e.target.value))}})]}),(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)(o.$n,{className:"w-full",style:{borderRadius:"0px 5px 5px 0px"},disabled:h===p,icon:(0,s.jsx)(f.s00,{}),type:"button",onClick:()=>{i.setFieldValue(t.name,+parseInt(h||0)+1),v(+parseInt(h||0)+1)}})})]})}})})},Ce=(0,n.memo)(Ae),Le=e=>{const{quantity:t=0,currency:i,unitPrice:n=0}=e;return console.log(t),(0,s.jsx)(o.eI,{label:"Total Amount",className:"mb-4",children:(0,s.jsx)(u.D0,{disabled:!0,placeholder:"Total Amount",prefix:i,value:(Number(n)*Number(t)).toFixed(2),component:o.pd})})},Be=(0,n.memo)(Le),Se=e=>{const{errors:t,touched:i,values:a,boxes:l=[]}=e,d=(0,n.useMemo)(()=>l.map((e,t)=>({label:`BOX NO ${t+1}`,value:t+1})),[l]);return(0,s.jsx)(o.eI,{label:"Box No",invalid:t&&i,errorMessage:t,children:(0,s.jsx)(u.D0,{name:"box_no",children:e=>{let{field:t,form:i}=e;return(0,s.jsx)(o.l6,{field:t,form:i,options:d,value:d.filter(e=>e.value===a),onChange:e=>i.setFieldValue(t.name,e.value)})}})})},qe=(0,n.memo)(Se),Me=e=>{const{errors:t,touched:i,values:a}=e;return(0,n.useEffect)(()=>{var e,t;a.PoList&&(a.weight=null===a||void 0===a||null===(e=a.PoList)||void 0===e||null===(t=e.Product)||void 0===t?void 0:t.Drawings[0].finish_weight)},[a.PoList]),(0,s.jsx)(o.eI,{label:"Weight",invalid:t&&i,errorMessage:t,children:(0,s.jsx)(u.D0,{type:"number",name:"weight",autoComplete:"off",placeholder:"Individual Weight",value:a.weight*a.quantity,disabled:!0,component:o.pd})})},Fe=(0,n.memo)(Me),Re=c.Ik().shape({PoList:c.Ik().required("Required"),Po:c.Ik().required("Required"),quantity:c.ai().required("Required"),weight:c.ai().required("Required"),box_no:c.Yj().required("Required")}),Ee=(0,n.forwardRef)((e,t)=>{const{initialData:i,onDiscard:n,boxes:a=[],handleFormSubmit:l,type:d,dispatchList:r}=e;return(0,s.jsx)(u.l1,{innerRef:t,initialValues:{...i},validationSchema:Re,onSubmit:(e,t)=>{let{setSubmitting:i}=t;null===l||void 0===l||l(e,i)},children:e=>{var t,i;let{values:l,touched:c,errors:h,setFieldValue:v,isSubmitting:p}=e;return(0,s.jsx)(u.lV,{children:(0,s.jsxs)(o.MG,{children:[(0,s.jsxs)("h4",{children:["new"===d?"Add":"Update"," Item Information"]}),(0,s.jsx)("p",{className:"mb-3",children:"Section to config add item information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(Ne,{errors:h.Po,touched:c.Po,values:l.Po}),(0,s.jsx)(Ie,{errors:h.PoList,touched:c.PoList,values:l.PoList,Po:l.Po}),(0,s.jsx)(Ce,{dispatchList:r,errors:h.quantity,touched:c.quantity,values:l.quantity,setFieldValue:v,poList:l.PoList}),(0,s.jsx)(Be,{currency:null===(t=l.Po)||void 0===t?void 0:t.po_currency_type,unitPrice:null===(i=l.PoList)||void 0===i?void 0:i.unit_price,quantity:l.quantity}),(0,s.jsx)(qe,{errors:h.box_no,touched:c.box_no,values:l.box_no,boxes:a}),(0,s.jsx)(Fe,{errors:h.weight,touched:c.weight,values:l})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)(o.$n,{size:"sm",type:"button",variant:"",onClick:()=>null===n||void 0===n?void 0:n(),children:"Discard"}),(0,s.jsxs)(o.$n,{size:"sm",variant:"solid",type:"submit",loading:p,children:["new"===d?"Add":"Update"," Item"]})]})]})})}})});Ee.defaultProps={initialData:{Po:null,quantity:0,PoList:null,weight:"",box_no:""}};const ze=Ee,Te=e=>{const{boxes:t=[],locationIndex:i,dispatchList:n=[],addNewItemInPoList:a,invoiceId:l}=e,d=(0,r.wA)(),c=(0,r.d4)(e=>e.edit_foreign_dispatch.state.addDispatchItemDialog),u=(e,t,i)=>o.y8.push((0,s.jsx)(o.Eg,{title:i,type:t,duration:2500,children:e}),{placement:"top-center"}),h=()=>{d(q({option:!1,locationIndex:null}))};return(0,s.jsx)(o.lG,{isOpen:c.option&&i===c.locationIndex,onClose:h,onRequestClose:h,children:(0,s.jsx)(ze,{boxes:t,type:"new",dispatchList:n,handleFormSubmit:async(e,o)=>{var s,r,c,v,p,m,x,f,y,g,j,b,_,D,w,N;o(!0);var I,P,A;if(null===(s=n[i])||void 0===s?void 0:s.DispatchLists.find(t=>{var i,n,o,s;if((null===t||void 0===t||null===(i=t.Po)||void 0===i?void 0:i.number)===(null===e||void 0===e||null===(n=e.Po)||void 0===n?void 0:n.number)&&(null===t||void 0===t||null===(o=t.PoList)||void 0===o?void 0:o.po_list_id)===(null===e||void 0===e||null===(s=e.PoList)||void 0===s?void 0:s.po_list_id))return t}))return o(!1),u(`PO ${null===e||void 0===e||null===(I=e.Po)||void 0===I?void 0:I.number} and ${null===e||void 0===e||null===(P=e.PoList)||void 0===P||null===(A=P.Product)||void 0===A?void 0:A.name} Already Added You Can Edit it.`,"danger","Error");const C=t.find(t=>t.box_no===e.box_no),L=await d((0,F.b5)({item:e,dispatch_location_id:null===(r=n[i])||void 0===r?void 0:r.dispatch_location_id,dispatch_invoice_id:l,dispatch_box_list_id:C.dispatch_box_list_id}));var B,S;if(L.payload.status>300)return o(!1),u(null===L||void 0===L||null===(B=L.payload)||void 0===B||null===(S=B.data)||void 0===S?void 0:S.message,"danger","Error");u("Product Added Successfully","success","Successfull");const q=[...n];q[i]={...q[i],DispatchLists:[...q[i].DispatchLists||[],{...e,item_name:null===e||void 0===e||null===(c=e.PoList)||void 0===c||null===(v=c.Product)||void 0===v?void 0:v.name,item_code:null===e||void 0===e||null===(p=e.PoList)||void 0===p||null===(m=p.Product)||void 0===m?void 0:m.item_code,hsn_code:null===e||void 0===e||null===(x=e.PoList)||void 0===x||null===(f=x.Product)||void 0===f?void 0:f.hsn_code,product_id:null===e||void 0===e||null===(y=e.PoList)||void 0===y||null===(g=y.Product)||void 0===g?void 0:g.product_id,gst_percentage:0,item_quantity:null===e||void 0===e?void 0:e.quantity,dispatch_list_id:null===(j=L.payload.data)||void 0===j||null===(b=j.data)||void 0===b?void 0:b.dispatch_list_id,dispatch_box_id:null===(_=L.payload.data)||void 0===_||null===(D=_.data)||void 0===D?void 0:D.dispatch_box_id,item_weight:null===(w=L.payload.data)||void 0===w||null===(N=w.data)||void 0===N?void 0:N.item_weight}]},null===a||void 0===a||a(q),o(!1),h()},onDiscard:h})})},Ve=(0,n.memo)(Te),ke=(e,t,i)=>o.y8.push((0,s.jsx)(o.Eg,{title:e,type:t,duration:2500,children:i}),{placement:"top-center"}),Oe=e=>{let{fetchData:t}=e;const[i,o]=(0,n.useState)(!1),a=(0,r.wA)(),l=(0,r.d4)(e=>e.edit_foreign_dispatch.state.selectedBox),d=(0,r.d4)(e=>e.edit_foreign_dispatch.state.deleteBoxDialog),c=()=>{a(B(!1))};return(0,s.jsx)(k.TM,{isOpen:d,onClose:c,onRequestClose:c,type:"danger",title:"Delete Box",onCancel:c,onConfirm:async()=>{var e;o(!0);const i=await a((0,F.fW)({dispatch_box_list_id:null===l||void 0===l?void 0:l.dispatch_box_list_id}));var n,s,d,r;return o(!1),200===(null===(e=i.payload)||void 0===e?void 0:e.status)?(ke("Successfully Deleted","success",null===(n=i.payload)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message),null===t||void 0===t||t(),c()):ke("Unsuccessfully","danger",null===(d=i.payload)||void 0===d||null===(r=d.data)||void 0===r?void 0:r.message)},confirmText:i?"Deleting...":"Confirm",confirmButtonColor:"red-600",children:(0,s.jsx)("p",{children:"Are you sure you want to delete this Box? This action cannot be undone."})})};(0,T.Mh)("edit_foreign_dispatch",V);const Ye=(e,t,i)=>o.y8.push((0,s.jsx)(o.Eg,{title:i,type:t,duration:2500,children:e}),{placement:"top-center"}),Ke=()=>{var e;const[t,i]=(0,n.useState)(""),c=(0,K.zy)(),u=(0,r.wA)(),[h,p]=(0,n.useState)(null),m=(0,r.d4)(e=>e.edit_foreign_dispatch.data.invoiceDetails),[x,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{y()},[]),(0,n.useEffect)(()=>{m&&p(m)},[m]),(0,n.useEffect)(()=>{(async()=>{if(t&&"Invalid Date"!==t){(await u((0,F.Zz)({invoice_date:v()(t).format("YYYY-MM-DD"),dispatch_invoice_id:m.dispatch_invoice_id}))).payload.status<300?(Ye("Invoice Date Successfully Updated","success","Successfully Updated"),y()):Ye("Invoice Date Not Updated","danger","error")}})()},[t]);const y=async()=>{const e=c.pathname.substring(c.pathname.lastIndexOf("/")+1);if(e){var t,i;const n=await u((0,F.jq)({dispatch_invoice_id:e}));u((0,F.AV)({customer_id:null===(t=n.payload.data.data)||void 0===t||null===(i=t.DispatchConsignee)||void 0===i?void 0:i.customer_id,currency_type:"USD"}))}},g=new Date(m.invoice_date),j=async e=>{p(t=>({...t,DispatchLocations:e}))};return(0,s.jsxs)(k.mc,{className:"h-full",children:[(0,s.jsx)(k.Rh,{loading:x,children:!Y()(h)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,s.jsxs)(o.Zp,{className:"bg-yellow-50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-700",children:"Consignee & Buyer Information"}),(0,s.jsx)("p",{className:"mb-2",children:"Section to config consignee & buyer information"})]}),(0,s.jsx)("div",{children:(0,s.jsx)(o.lr,{style:{width:"160px"},placeholder:"Invoice Date",value:g,onChange:e=>{i(e)}})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(a,{title:"Consignee",data:null===h||void 0===h?void 0:h.DispatchConsignee,address:null===h||void 0===h||null===(e=h.DispatchConsignee)||void 0===e?void 0:e.DispatchConsigneeAddress}),(0,s.jsx)(a,{title:"Buyer",data:null===h||void 0===h?void 0:h.DispatchBuyer,address:null===h||void 0===h?void 0:h.DispatchShippingAddress})]})]}),(0,s.jsxs)(o.Zp,{className:"bg-blue-50 h-max",children:[(0,s.jsxs)("div",{className:"flex  justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-700",children:"Address & Shipping Information"}),(0,s.jsx)("p",{className:"mb-2",children:"Section to config address & shipping information"})]}),(0,s.jsx)("div",{className:"float-right",children:(0,s.jsx)(o.pd,{type:"text",placeholer:"Freight Charges",value:m.invoice_no,style:{width:"160px"},disabled:!0})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(l,{data:null===h||void 0===h?void 0:h.DispatchShippingAddress}),(0,s.jsx)(d,{data:null===h||void 0===h?void 0:h.DispatchShippingDetail})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mt-4",children:(0,s.jsxs)(o.Zp,{className:"bg-yellow-50 h-max",bodyClass:"pb-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-700",children:"Box Information"}),(0,s.jsx)("p",{className:"mb-2",children:"Section to config box information"})]}),(0,s.jsx)(o.$n,{type:"button",size:"sm",variant:"solid",onClick:()=>{u(S(!0))},children:"Add Box"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-2",children:(0,s.jsx)(_e,{values:null===h||void 0===h?void 0:h.DispatchBoxLists,handleNewBoxAdd:function(){const e=[...arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}];console.log(e),p(t=>({...t,DispatchBoxLists:e}))},handleDeleteBox:function(e){},handleEditBox:()=>{y()},invoiceId:null===h||void 0===h?void 0:h.dispatch_invoice_id,dispatchList:h.DispatchLocations})})]})}),(0,s.jsxs)(o.Zp,{className:"my-4",children:[h.DispatchLocations.map((e,t)=>(0,s.jsxs)("div",{className:h.DispatchLocations.length-1===t?"":"mb-5",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center h-full mb-2",children:[0===t?(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-700",children:"POs Information"}),(0,s.jsx)("p",{children:"Section to config POs list information"})]}):(0,s.jsx)("div",{}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end items-center h-full",children:[(0,s.jsx)("h2",{className:"text-gray-500",children:null===e||void 0===e?void 0:e.location_code}),(0,s.jsx)(o.$n,{type:"button",variant:"solid",color:"pink-500",size:"sm",onClick:()=>{u(q({option:!0,locationIndex:t}))},children:"Add Item"})]})]}),(0,s.jsx)(ne,{initialData:e.DispatchLists,boxes:null===h||void 0===h?void 0:h.DispatchBoxLists}),(0,s.jsx)(Ve,{locationIndex:t,addNewItemInPoList:j,dispatchList:h.DispatchLocations,boxes:null===h||void 0===h?void 0:h.DispatchBoxLists,invoiceId:null===h||void 0===h?void 0:h.dispatch_invoice_id})]})),(0,s.jsx)(z,{dispatchList:h.DispatchLocations,fetchData:y}),(0,s.jsx)(se,{fetchData:y}),(0,s.jsx)(Oe,{fetchData:y})]})]})}),!x&&Y()(h)&&(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center",children:[(0,s.jsx)(k.Sl,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No invoice found!"}),(0,s.jsx)("h3",{className:"mt-8",children:"No Invoice found!"})]})]})}},49836:(e,t,i)=>{i.d(t,{AV:()=>c,Ay:()=>m,OW:()=>l,Zz:()=>r,b5:()=>u,fW:()=>v,g0:()=>d,jq:()=>a,lc:()=>h,rj:()=>p});var n=i(80907),o=i(96396),s=i(67600);const a=(0,n.zD)("edit/foreign/invoice/data/details",async e=>{try{return await(0,o.H1)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),l=(0,n.zD)("edit/foreign/invoice/data/list/update",async e=>{try{return await(0,o.S9)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),d=(0,n.zD)("edit/foreign/invoice/data/list/delete",async e=>{try{return await(0,o.O)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),r=(0,n.zD)("edit/foreign/invoice/date/update",async e=>{try{return await(0,o.xs)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),c=(0,n.zD)("edit/foreign/invoice/data/po/all",async e=>{try{return await(0,s.uR)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),u=(0,n.zD)("edit/foreign/invoice/data/add/product",async e=>{try{return await(0,o.c2)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),h=(0,n.zD)("edit/foreign/invoice/data/add/box",async e=>{try{return await(0,o.cZ)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),v=(0,n.zD)("edit/foreign/invoice/data/delete/box",async e=>{try{return await(0,o.Z2)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),p=(0,n.zD)("edit/foreign/invoice/data/update/box",async e=>{try{return await(0,o.F$)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),m=(0,n.Z0)({name:"edit/foreign/invoice/data",initialState:{invoiceDetails:{},loading:!1,poList:[]},reducers:{},extraReducers:{[a.fulfilled]:(e,t)=>{var i;e.invoiceDetails=(null===(i=t.payload.data)||void 0===i?void 0:i.data)||{},e.loading=!1},[a.pending]:e=>{e.invoiceDetails={},e.loading=!0},[l.fulfilled]:(e,t)=>{},[d.fulfilled]:(e,t)=>{},[r.fulfilled]:(e,t)=>{},[c.fulfilled]:(e,t)=>{var i,n;e.poList=(null===(i=t.payload)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.data)||[]},[u.fulfilled]:(e,t)=>{},[h.fulfilled]:(e,t)=>{},[v.fulfilled]:(e,t)=>{},[p.fulfilled]:(e,t)=>{}}}).reducer},52157:(e,t,i)=>{i(70579)},67600:(e,t,i)=>{i.d(t,{II:()=>y,L7:()=>b,NH:()=>D,Pp:()=>I,Ps:()=>o,Q$:()=>B,Q8:()=>g,RV:()=>a,TR:()=>N,Vf:()=>h,Wm:()=>L,XU:()=>d,c:()=>p,ef:()=>v,fd:()=>P,hv:()=>s,jd:()=>w,jt:()=>x,mF:()=>_,mj:()=>m,nT:()=>l,nd:()=>r,pW:()=>j,rQ:()=>C,rh:()=>c,uR:()=>f,xo:()=>u,z6:()=>A});var n=i(43971);async function o(e){return n.A.fetchData({url:"v1/web/company/po/Number/check",method:"post",data:e})}async function s(e){return n.A.fetchData({url:"v1/web/company/po/register",method:"post",data:e})}async function a(e){return n.A.fetchData({url:"v1/web/company/po/update/id",method:"post",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/po/delete/id",method:"delete",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/po/id",method:"post",data:e})}async function r(e){return n.A.fetchData({url:"v1/web/company/po",method:"post",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/po/dates",method:"post",data:e})}async function u(e){return n.A.fetchData({url:"v1/web/company/po/delivery/dates",method:"post",data:e})}async function h(e){return n.A.fetchData({url:"v1/web/company/po/accept/delivery/dates",method:"post",data:e})}async function v(e){return n.A.fetchData({url:"v1/web/company/po/raw/dates",method:"post",data:e})}async function p(e){return n.A.fetchData({url:"v1/web/company/po/machining/dates",method:"post",data:e})}async function m(e){return n.A.fetchData({url:"v1/web/company/po-list/id",method:"put",data:e})}async function x(e){return n.A.fetchData({url:"v1/web/company/po-list/list/id",method:"post",data:e})}async function f(e){return n.A.fetchData({url:"v1/web/company/po/select/customer/id",method:"post",data:e})}async function y(){return n.A.fetchData({url:"v1/web/company/po/Unique/number",method:"get"})}async function g(e){return n.A.fetchData({url:"v1/web/company/po/lists",method:"get",params:e})}async function j(e){return n.A.fetchData({url:"v1/web/company/po/number/po",method:"post",data:e})}async function b(){return n.A.fetchData({url:"v1/web/company/po/years",method:"get"})}async function _(e){return n.A.fetchData({url:"v1/web/company/po/months",method:"post",data:e})}async function D(e){return n.A.fetchData({url:"v1/web/company/po/month/dates",method:"post",data:e})}async function w(e){return n.A.fetchData({url:"v1/web/company/po/Number/po/option",method:"post",data:e})}async function N(e){return n.A.fetchData({url:"v1/web/company/po/poa/option",method:"post",data:e})}async function I(e){return n.A.fetchData({url:"v1/web/company/po-list/po/number",method:"post",data:e})}async function P(e){return n.A.fetchData({url:"v1/web/company/po-list/serial/number",method:"post",data:e})}async function A(e){return n.A.fetchData({url:"v1/web/company/po-list/attachment",method:"put",data:e})}async function C(e){return n.A.fetchData({url:"v1/web/company/po-list/attachment/delete",method:"put",data:e})}async function L(){return n.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function B(e){return n.A.fetchData({url:"v1/web/company/po-list/date/update",method:"post",data:e})}},96396:(e,t,i)=>{i.d(t,{D8:()=>r,F$:()=>g,FT:()=>j,H1:()=>d,HH:()=>s,K5:()=>B,Lb:()=>L,M:()=>c,O:()=>p,S9:()=>v,V1:()=>_,VA:()=>h,Wm:()=>A,Xd:()=>u,Z2:()=>y,c2:()=>x,cZ:()=>f,dg:()=>a,i7:()=>q,ic:()=>m,ko:()=>P,nV:()=>o,r6:()=>b,tt:()=>I,uM:()=>S,v8:()=>w,vq:()=>D,vv:()=>N,wb:()=>C,xs:()=>l});var n=i(43971);async function o(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/check/invoice/number",method:"post",data:e})}async function s(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/domestic/register",method:"post",data:e})}async function a(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/foreign/register",method:"post",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/foreign/invoice/date/update",method:"put",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/foreign/invoice/id",method:"post",data:e})}async function r(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/domestic/invoice/id",method:"post",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/domestic/packing/update",method:"put",data:e})}async function u(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch",method:"post",data:e})}async function h(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/details/id",method:"post",data:e})}async function v(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/id",method:"put",data:e})}async function p(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/delete/id",method:"delete",data:e})}async function m(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/raw/machining/date",method:"post",data:e})}async function x(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/add/product",method:"post",data:e})}async function f(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/add/box",method:"post",data:e})}async function y(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/delete/box",method:"delete",data:e})}async function g(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch-list/update/box",method:"put",data:e})}async function j(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/delete",method:"delete",data:e})}async function b(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/pattern/register",method:"post",data:e})}async function _(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/pattern",method:"post",data:e})}async function D(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/Pattern/invoice/id",method:"post",data:e})}async function w(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/patternList/id",method:"put",data:e})}async function N(e){return n.A.fetchData({url:"v1/web/company/product/pattern/update/product",method:"put",data:e})}async function I(e){return n.A.fetchData({url:"v1/web/company/product/pattern/delete",method:"delete",data:e})}async function P(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/number",method:"get",data:e})}async function A(){return n.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function C(){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/date",method:"get"})}async function L(){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/years",method:"get"})}async function B(){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/invoice/months",method:"get"})}async function S(e){return n.A.fetchData({url:"v1/web/company/invoice/dispatch/update/status",method:"put",data:e})}async function q(e){return console.log("data",e),n.A.fetchData({url:"v1/web/company/invoice/dispatch/patternInvoice/update/status",method:"put",data:e})}}}]);
//# sourceMappingURL=9500.dd0ffb13.chunk.js.map