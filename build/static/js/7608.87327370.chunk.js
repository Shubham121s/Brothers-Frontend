"use strict";(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[7608],{83838:(e,t,a)=>{a.d(t,{F:()=>s,QM:()=>r,Y_:()=>o,dq:()=>l,lB:()=>i});var n=a(43971);async function r(e){return n.A.fetchData({url:"v1/web/company/enquiry/register",method:"post",data:e})}async function o(e){return n.A.fetchData({url:"v1/web/company/enquiry/id",method:"post",data:e})}async function s(e){return n.A.fetchData({url:"v1/web/company/enquiry",method:"post",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/enquiry/delete",method:"delete",data:e})}async function i(e){return n.A.fetchData({url:"v1/web/company/enquiry/update",method:"put",data:e})}},88705:(e,t,a)=>{a.d(t,{A:()=>_});var n=a(65043),r=a(98139),o=a.n(r),s=a(49934),l=a(70579);const{Tr:i,Td:d,TBody:c}=s.XI,u=e=>{const{columns:t,rows:a,avatarInColumns:n,avatarProps:r}=e;return(0,l.jsx)(c,{children:Array.from(new Array(a),(e,t)=>t+0).map(e=>(0,l.jsx)(i,{children:Array.from(new Array(t),(e,t)=>t+0).map(e=>(0,l.jsx)(d,{children:(0,l.jsxs)("div",{className:"flex flex-auto items-center gap-2",children:[n.includes(e)&&(0,l.jsx)("div",{children:(0,l.jsx)(s.EA,{variant:"circle",...r})}),(0,l.jsx)(s.EA,{})]})},`col-${e}`))},`row-${e}`))})};u.defaultProps={columns:1,rows:10,avatarInColumns:[]};const m=u;var p=a(6023),h=a(58931),x=a(47111);const{Tr:y,Th:g,Td:v,THead:j,TBody:f}=s.XI,b=e=>{const{indeterminate:t,onChange:a,onCheckBoxChange:r,onIndeterminateCheckBoxChange:o,...i}=e,d=(0,n.useRef)(null);(0,n.useEffect)(()=>{"boolean"===typeof t&&(d.current.indeterminate=!i.checked&&t)},[d,t]);return(0,l.jsx)(s.Sc,{className:"mb-0",ref:d,onChange:(e,t)=>(e=>{a(e),null===r||void 0===r||r(e),null===o||void 0===o||o(e)})(t),...i})},w=(0,n.forwardRef)((e,t)=>{const{skeletonAvatarColumns:a,columns:r,data:i,loading:d,onCheckBoxChange:c,onIndeterminateCheckBoxChange:u,onPaginationChange:w,onSelectChange:_,onSort:q,pageSizes:C,selectable:D,skeletonAvatarProps:S,pagingData:N,tableWidth:A="100%"}=e,{pageSize:z,pageIndex:I,total:k}=N,[R,T]=(0,n.useState)(null),P=(0,n.useMemo)(()=>C.map(e=>({value:e,label:`${e} / page`})),[C]);(0,n.useEffect)(()=>{if(Array.isArray(R)){const e=R.length>0?R[0].desc?"desc":"asc":"",t=R.length>0?R[0].id:"";null===q||void 0===q||q({order:e,key:t})}},[R]);const $=r.some(e=>e.Header||e.accessor||e.Cell),M=(0,n.useMemo)(()=>{const e=r.map(e=>({...e,size:e.size||void 0,minSize:e.minSize||100,maxSize:e.maxSize||300}));return D?[{id:"select",header:e=>{let{table:t}=e;return(0,l.jsx)(b,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:e=>{var a,n;a=e.target.checked,n=t.getRowModel().rows,d||null===u||void 0===u||u(a,n)}})},cell:e=>{let{row:t}=e;return(0,l.jsx)(b,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler(),onCheckBoxChange:e=>((e,t)=>{d||null===c||void 0===c||c(e,t)})(e.target.checked,t.original)})},size:50,minSize:50,maxSize:50},...e]:e},[r,D]),E=(0,h.N4)({data:i,columns:$?[]:M,getCoreRowModel:(0,x.HT)(),getFilteredRowModel:(0,x.hM)(),getPaginationRowModel:(0,x.kW)(),getSortedRowModel:(0,x.h5)(),manualPagination:!0,manualSorting:!0,onSortingChange:T,state:{sorting:R},columnResizeMode:"onChange"}),F=()=>{E.resetSorting()},B=()=>{E.toggleAllRowsSelected(!1)};if((0,n.useImperativeHandle)(t,()=>({resetSorting:F,resetSelected:B})),$){const e="You are using old react-table v7 column config, please use v8 column config instead, refer to our demo or https://tanstack.com/table/v8";return(0,l.jsx)(s.Fc,{children:e})}return(0,l.jsxs)(p.A,{loading:d&&0!==i.length,type:"cover",children:[(0,l.jsx)("div",{style:{width:A,overflowX:"auto"},children:(0,l.jsxs)(s.XI,{style:{width:"100%",tableLayout:"fixed"},children:[(0,l.jsx)(j,{children:E.getHeaderGroups().map(e=>(0,l.jsx)(y,{children:e.headers.map(e=>(0,l.jsx)(g,{colSpan:e.colSpan,style:{width:`${e.column.getSize()}px`},children:e.isPlaceholder?null:(0,l.jsx)("div",{className:o()(d&&"pointer-events-none"),children:(0,h.Kv)(e.column.columnDef.header,e.getContext())})},e.id))},e.id))}),d&&0===i.length?(0,l.jsx)(m,{columns:M.length,rows:N.pageSize,avatarInColumns:a,avatarProps:S}):(0,l.jsx)(f,{children:E.getRowModel().rows.slice(0,z).map(e=>(0,l.jsx)(y,{children:e.getVisibleCells().map(e=>(0,l.jsx)(v,{style:{width:`${e.column.getSize()}px`},children:(0,h.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,l.jsx)(s.dK,{pageSize:z,currentPage:I,total:k,onChange:e=>{d||null===w||void 0===w||w(e)}}),(0,l.jsx)("div",{style:{minWidth:130},children:(0,l.jsx)(s.l6,{size:"sm",menuPlacement:"top",isSearchable:!1,value:P.filter(e=>e.value===z),options:P,onChange:e=>{return t=e.value,void(d||null===_||void 0===_||_(Number(t)));var t}})})]})]})});w.defaultProps={pageSizes:[10,25,50,100],pagingData:{total:0,pageIndex:1,pageSize:10},data:[],columns:[],selectable:!1,loading:!1};const _=w},90642:(e,t,a)=>{a.d(t,{Ai:()=>i,Kz:()=>d,Wm:()=>u,ZS:()=>s,aQ:()=>m,eB:()=>l,jz:()=>r,k7:()=>o,lC:()=>c});var n=a(43971);async function r(){return n.A.fetchData({url:"v1/web/company/customer/statistic",method:"get"})}async function o(e){return n.A.fetchData({url:"v1/web/company/customer/update",method:"put",data:e})}async function s(e){return n.A.fetchData({url:"v1/web/company/customer/select",method:"get"})}async function l(e){return n.A.fetchData({url:"v1/web/company/customer/register",method:"post",data:e})}async function i(e){return n.A.fetchData({url:"v1/web/company/customer/update/id",method:"put",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/customer",method:"post",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/customer/details/id",method:"post",data:e})}async function u(){return n.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function m(e){return n.A.fetchData({url:"v1/web/company/customer/delete/id",method:"delete",data:e})}},97608:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ue});var n=a(65043),r=a(24603),o=a(50805),s=a(80907),l=a(83838);const i=(0,s.zD)("quotation/data/all/enquiry",async e=>{try{return await(0,l.F)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),d=(0,s.zD)("quotation/data/delete/enquiry",async e=>{try{return await(0,l.dq)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),c=(0,s.Z0)({name:"quotation/data",initialState:{loading:!1,enquiryList:[],tableData:{total:0,pageIndex:1,pageSize:10,query:""}},reducers:{setTableData:(e,t)=>{e.tableData=t.payload}},extraReducers:{[i.fulfilled]:(e,t)=>{var a;e.enquiryList=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[],e.tableData.table=t.payload.data.total||0,e.loading=!1},[i.pending]:(e,t)=>{e.loading=!0},[d.fulfilled]:(e,t)=>{}}}),{setTableData:u,setFilterData:m}=c.actions,p=c.reducer,h=(0,s.Z0)({name:"quotation/state",initialState:{deleteConfirmation:!1,selectedEnquiry:{},openDrawer:!1},reducers:{togglDeleteConfirmationDialog:(e,t)=>{e.deleteConfirmation=t.payload},toggleDrawer:(e,t)=>{e.openDrawer=t.payload},setSelectedEnquiry:(e,t)=>{e.selectedEnquiry=t.payload}}}),{togglDeleteConfirmationDialog:x,setSelectedEnquiry:y,toggleDrawer:g}=h.actions,v=h.reducer,j=(0,o.HY)({data:p,state:v});var f=a(79456),b=a(23533),w=a(73216),_=a(35475),q=a(56434),C=a.n(q),D=a(88705),S=a(93751),N=a(49934),A=a(90642),z=a(99149);const I=(0,s.zD)("new/quotation/data/customer/all",async()=>{try{return await(0,A.ZS)()}catch(e){return null===e||void 0===e?void 0:e.response}}),k=(0,s.zD)("new/quotation/data/product/all",async()=>{try{return await(0,z.qT)()}catch(e){return null===e||void 0===e?void 0:e.response}}),R=(0,s.zD)("new/quotation/data/register",async e=>{try{return await(0,l.QM)(e)}catch(t){return null===t||void 0===t?void 0:t.response}}),T=(0,s.Z0)({name:"new/quotation/data",initialState:{customers:[],products:[]},extraReducers:{[I.fulfilled]:(e,t)=>{var a;e.customers=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[]},[R.fulfilled]:e=>{},[k.fulfilled]:(e,t)=>{var a;e.products=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[]}}}).reducer,P=(0,o.HY)({data:T});a(98257);var $=a(41434),M=a(63516),E=a(80899),F=a(27176),B=a(72234),Y=a(70579);const{Tr:G,Th:H,Td:K,THead:Q,TBody:W}=N.XI,{Control:Z}=B.c,O=e=>{let{values:t,errors:a,touched:r,Products:o=[]}=e;const s=(0,n.useMemo)(()=>o.map(e=>({label:e.name,value:e})),[o]),l=e=>{var t;let{children:a,...n}=e;const r=n.getValue()[0];return(0,Y.jsxs)(Z,{...n,children:[r&&(0,Y.jsxs)("span",{className:"ml-2 font-semibold uppercase",children:[null===r||void 0===r||null===(t=r.value)||void 0===t?void 0:t.item_code," :"]}),a]})},i=e=>{var t;let{innerProps:a,label:n,data:r,isSelected:o}=e;return(0,Y.jsx)("div",{className:"flex items-center justify-between p-2 "+(o?"bg-gray-100":"hover:bg-gray-50"),...a,children:(0,Y.jsxs)("div",{className:"items-center flex justify-between w-full",children:[(0,Y.jsx)("div",{className:"ml-2 uppercase",children:`${n} ( ${null===r||void 0===r||null===(t=r.value)||void 0===t?void 0:t.item_code})`}),o&&(0,Y.jsx)(S.q9z,{className:"text-emerald-500 text-xl"})]})})},d={textAlign:"center",border:".2px solid lightGray",width:"130px"};return(0,Y.jsx)("div",{style:{overflowX:"auto",width:"auto"},children:(0,Y.jsxs)(N.XI,{className:"relative",compact:!0,style:{width:"max-content"},children:[(0,Y.jsxs)(Q,{className:"sticky",style:{top:"-.2px"},children:[(0,Y.jsxs)(G,{children:[(0,Y.jsx)(H,{style:{textAlign:"center",border:".2px solid lightGray",widTh:"15px"},rowSpan:"3",children:"Sr"}),(0,Y.jsx)(H,{style:{...d,width:"230px"},rowSpan:"3",children:"Item Name"}),(0,Y.jsx)(H,{style:d,rowSpan:"3",children:"Drawing Rev. No."}),(0,Y.jsx)(H,{style:d,rowSpan:"3",children:"Material Grade"}),(0,Y.jsx)(H,{style:d,rowSpan:"3",children:"MOQ QTY"}),(0,Y.jsx)(H,{style:{...d,BsBorderRight:"1px solid lightGray"},rowSpan:"2",colSpan:"1",children:"RAW Weight"}),(0,Y.jsx)(H,{style:d,colSpan:"9",children:"Costing INR"}),(0,Y.jsx)(H,{style:d,rowSpan:"3",children:"Lead Time"}),(0,Y.jsx)(H,{style:{textAlign:"center",border:".2px solid lightGray",width:"30px"},rowSpan:"3",children:"Action"})]}),(0,Y.jsxs)(G,{children:[(0,Y.jsx)(H,{style:d,colSpan:"1",children:"Raw per Kg rate"}),(0,Y.jsx)(H,{style:d,colSpan:"1",children:"Raw Material cost"}),(0,Y.jsx)(H,{style:d,colSpan:"1",children:"Machining"}),(0,Y.jsx)(H,{style:d,colSpan:"1",children:"Blasting, Primer Paint"}),(0,Y.jsx)(H,{style:d,colSpan:"1",children:"EX-Work Packing Cost"}),(0,Y.jsx)(H,{style:d,colSpan:"1",children:"Total per Unit Cost (Ex-Work)"}),(0,Y.jsx)(H,{style:d,colSpan:"1",children:"Profit (7%)"}),(0,Y.jsx)(H,{style:d,colSpan:"1",children:"Total per Unit Cost (Ex-Work)"}),(0,Y.jsx)(H,{style:d,colSpan:"1",children:"Pattern and Tooling Cost"})]}),(0,Y.jsxs)(G,{children:[(0,Y.jsx)(H,{style:d,children:"A"}),(0,Y.jsx)(H,{style:d,children:"B"}),(0,Y.jsx)(H,{style:d,children:"C=(AXB)"}),(0,Y.jsx)(H,{style:d,children:"D"}),(0,Y.jsx)(H,{style:d,children:"G"}),(0,Y.jsx)(H,{style:d,children:"F"}),(0,Y.jsx)(H,{style:d,children:"T=C+D+F+E+G"}),(0,Y.jsx)(H,{style:d,children:"p"}),(0,Y.jsx)(H,{style:d,children:"TT=T+P"}),(0,Y.jsx)(H,{style:d,children:"PT"})]})]}),(0,Y.jsx)(W,{children:(0,Y.jsx)(M.ED,{name:"items",children:e=>{let{form:a,remove:n,push:r}=e;return(0,Y.jsxs)(Y.Fragment,{children:[t.items&&t.items.length>0?t.items.map((e,r)=>{((e,t)=>{const a=(0,M.O6)(e.errors,t);(0,M.O6)(e.touched,t)&&Boolean(a)})(a,`items[${r}].Product`);return t.items[r].raw_material_cost=(parseFloat(t.items[r].raw_weight)*parseFloat(t.items[r].raw_per_kg_rate)).toFixed(2),(0,Y.jsxs)(G,{children:[(0,Y.jsxs)(K,{style:{...d,width:"15px"},children:[r+1,"."]}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{name:`items[${r}].Product`,children:e=>{let{field:a,form:n}=e;return(0,Y.jsx)(N.l6,{field:a,form:n,size:"sm",className:"w-full",options:s,components:{Option:i,ConTrol:l},value:s.find(e=>{var a,n,o;return(null===(a=e.value)||void 0===a?void 0:a.product_id)===(null===(n=t.items[r])||void 0===n||null===(o=n.Product)||void 0===o?void 0:o.product_id)}),onChange:e=>{n.setFieldValue(a.name,e.value)},menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})}})}})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].revision_number`,size:"sm",disabled:!0,component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",disabled:!0,type:"text",name:`items[${r}].material`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].quantity`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].raw_weight`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].raw_per_kg_rate`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].raw_material_cost`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].machining`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].blasting_primer_paint`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].packing_cost`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].total_per_unit_cost1`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].profit`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].total_per_unit_cost2`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].pattern_tooling_cost`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:d,children:(0,Y.jsx)(N.eI,{label:"",className:"mb-2",children:(0,Y.jsx)(M.D0,{autoComplete:"off",type:"text",name:`items[${r}].lead_time`,size:"sm",component:N.pd})})}),(0,Y.jsx)(K,{style:{textAlign:"center",border:".2px solid lightGray",widTh:"100px"},children:(0,Y.jsx)(N.$n,{shape:"circle",size:"sm",onClick:()=>n(r),icon:(0,Y.jsx)(S.yRo,{})})})]},r)}):null,(0,Y.jsx)(G,{children:(0,Y.jsx)(K,{colSpan:18,style:{textAlign:"end"},children:(0,Y.jsx)(N.$n,{type:"button",size:"sm",variant:"solid",color:"purple-600",onClick:()=>{r({Product:null,casting_drawing_no:"",machining_drawing_no:"",material:"",quantity:"",raw_weight:"",raw_per_kg_rate:"",raw_material_cost:"",machining:"",blasting_primer_paint:"",packing_cost:"",total_per_unit_cost1:"",profit:"",total_per_unit_cost2:"",pattern_tooling_cost:"",lead_time:""})},children:"Add an Product"})})})]})}})})]})})},V=e=>{const{errors:t,touched:a,label:n,name:r,placeholder:o="",type:s="text"}=e;return(0,Y.jsx)(N.eI,{className:"mb-4",label:n,invalid:t&&a,errorMessage:t,children:(0,Y.jsx)(M.D0,{type:s,autoComplete:"off",name:r,placeholder:o,component:N.pd})})},X=(0,n.memo)(V),L=e=>{const{errors:t,touched:a,name:n,data:r,values:o,label:s}=e;return(0,Y.jsx)(N.eI,{className:"mb-3",label:s,invalid:t&&a,errorMessage:t,children:(0,Y.jsx)(M.D0,{name:n,children:e=>{let{field:t,form:a}=e;return(0,Y.jsx)(N.l6,{field:t,form:a,options:r,value:r.filter(e=>e.value===o),onChange:e=>a.setFieldValue(t.name,e.value)})}})})},U=(0,n.memo)(L),J=E.Ik().shape({customer_id:E.Yj().required("Required"),enquiry_date:E.Yj().required("Required"),enquiry_type:E.Yj().required("Required"),enq_number:E.Yj().required("Required"),poc_name:E.Yj().required("Required"),poc_contact:E.Yj().required("Required"),items:E.YO().of(E.Ik().shape({Product:E.Ik().required("Required"),drawing_revision:E.Yj().required("Required").test((e,t)=>{var a,n;return!(null===(a=t.parent)||void 0===a||null===(n=a.Product)||void 0===n||!n.Drawings.some(t=>t.revision_number===e))||t.createError({message:"Not Matched"})}),quantity:E.Yj().required("Required"),delivery_date:E.Yj().required("Required").matches(/^\d{4}-\d{2}-\d{2}$/,"format YYYY-MM-DD")}))}),ee=(0,n.forwardRef)((e,t)=>{(0,f.wA)(),(0,w.Zp)();const{type:a,initialData:r,onFormSubmit:o,onDiscard:s,Customers:l,Products:i}=e,d=(0,n.useMemo)(()=>l.map(e=>({label:e.name,value:e.customer_id})),[l]);return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)("div",{children:(0,Y.jsx)(M.l1,{enableReinitialize:!0,innerRef:t,initialValues:{...r},validationSchema:J,onSubmit:(e,t)=>{let{setSubmitting:a}=t;const n=C()(e);null===o||void 0===o||o(n,a)},children:e=>{let{values:t,errors:a,touched:n,isSubmitting:r,setErrors:o,handleSubmit:s,resetForm:l}=e;return(0,Y.jsx)(M.lV,{children:(0,Y.jsxs)(N.MG,{children:[(0,Y.jsx)(N.Zp,{className:" h-max border-rose-800 bg-rose-50",children:(0,Y.jsxs)("div",{className:"grid grid-cols-7 gap-3",children:[(0,Y.jsx)(U,{errors:null===a||void 0===a?void 0:a.customer_id,touched:null===n||void 0===n?void 0:n.customer_id,name:"enq_number",data:d,values:t.enq_number,label:"Customer"}),(0,Y.jsx)(U,{errors:null===a||void 0===a?void 0:a.customer_id,touched:null===n||void 0===n?void 0:n.customer_id,name:"customer_id",data:d,values:t.customer_id,label:"Customer"}),(0,Y.jsx)(X,{errors:null===a||void 0===a?void 0:a.quotation_number,touched:null===n||void 0===n?void 0:n.quotation_number,placeholder:"Quotation Number",label:"Quotation No.",name:"quotation_number",type:"text"}),(0,Y.jsx)(N.eI,{label:"Quotation Date",invalid:a.quotation_date&&n.quotation_date,errorMessage:a.quotation_date,className:"mb-2",children:(0,Y.jsx)(M.D0,{name:"quotation_date",placeholder:"Date",children:e=>{let{field:a,form:n}=e;return(0,Y.jsx)(N.lr,{field:a,form:n,value:t.date,onChange:e=>{n.setFieldValue(a.name,e)}})}})}),(0,Y.jsx)(X,{placeholder:"Project",label:"Project",name:"project",type:"text"})]})}),(0,Y.jsx)("div",{className:"mt-4",children:(0,Y.jsx)(O,{values:t,Products:i,errors:a,touched:n})}),(0,Y.jsx)(F.NG,{className:"-mx-8 px-8 flex items-center justify-end py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:(0,Y.jsxs)("div",{className:"md:flex items-center",children:[(0,Y.jsx)(N.$n,{size:"sm",className:"mr-3",type:"button",children:"Discard"}),(0,Y.jsx)(N.$n,{size:"sm",variant:"solid",icon:(0,Y.jsx)($.kuV,{className:"mr-1"}),type:"submit",children:"Save"})]})})]})})}})})})});ee.defaultProps={type:"new",initialData:{customer_id:"",enq_number:"",quotation_number:"",quotation_date:new Date,project:"",items:[{Product:null,revision_number:"",material:"",quantity:"",raw_weight:"",raw_per_kg_rate:"",raw_material_cost:"",machining:"",blasting_primer_paint:"",packing_cost:"",total_per_unit_cost1:"",profit:"",total_per_unit_cost2:"",pattern_tooling_cost:"",lead_time:""}]}};const te=ee;(0,r.Mh)("quotation_new",P);const ae=(e,t,a)=>{N.y8.push((0,Y.jsx)(N.Eg,{title:e,type:t,duration:2500,children:a}),{placement:"top-end"})},ne=()=>{const e=(0,f.wA)(),t=(0,w.Zp)(),[a,r]=(0,n.useState)(1400),o=(0,f.d4)(e=>e.quotation_new.data.customers),s=(0,f.d4)(e=>e.quotation_new.data.products),l=(0,f.d4)(e=>e.quotation.state.openDrawer);(0,n.useEffect)(()=>{l&&(c(),d())},[l]);const d=async()=>{e(I()),e(k())},c=()=>{const e=window.innerWidth;r(e-250)},u=()=>{e(g(!1))};N.$n,N.$n;return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(N._s,{title:"New Quotation",isOpen:l,onClose:u,onRequestClose:u,width:a,children:(0,Y.jsx)(te,{type:"new",onFormSubmit:async(t,a)=>{console.log(t),a(!0);(await e(R(t))).payload.status<300?(a(!1),ae("Successfull","success","Enquiry Successfully created"),u(),e(i())):(ae("Unsuccessful","error","Enquiry not created"),a(!1))},onDiscard:()=>{t("/product")},Customers:o,Products:s})})})},re=(e,t,a)=>N.y8.push((0,Y.jsx)(N.Eg,{title:e,type:t,duration:2500,children:a}),{placement:"top-center"}),oe=()=>{const[e,t]=(0,n.useState)(!1),a=(0,f.d4)(e=>e.quotation.data.tableData),r=(0,f.wA)(),o=(0,f.d4)(e=>e.quotation.state.selectedEnquiry),s=(0,f.d4)(e=>e.quotation.state.deleteConfirmation),l=()=>{r(x(!1))};return(0,Y.jsx)(F.TM,{isOpen:s,onClose:l,onRequestClose:l,type:"danger",title:"Delete Enquiry",onCancel:l,onConfirm:async()=>{var e;t(!0);const n=await r(d({enquiry_id:null===o||void 0===o?void 0:o.enquiry_id}));var s,c,u,m;if(t(!1),!((null===(e=n.payload)||void 0===e?void 0:e.status)<300))return re("Unsuccessfully","danger",null===(s=n.payload)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.message);re("Successfully Deleted","success",null===(u=n.payload)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.message),l(),r(i(a))},confirmText:e?"Deleting...":"Confirm",confirmButtonColor:"red-600",children:(0,Y.jsx)("p",{children:"Are you sure you want to delete this Enquiry? This action cannot be undone."})})},se={FOREIGN:{label:"Foreign",bgClass:"bg-emerald-100",textClass:"text-emerald-600"},DOMESTIC:{label:"Domestic",bgClass:"bg-pink-100",textClass:"text-pink-600"}},le=e=>{let{row:t}=e;const{textTheme:a}=(0,b.A)(),n=(0,f.wA)(),r=(0,w.Zp)();return(0,Y.jsxs)("div",{className:"flex justify-center gap-4 text-lg",children:[(0,Y.jsx)("span",{className:`cursor-pointer hover:${a}`,onClick:()=>{r(`/product/edit/${t.id}`)},children:(0,Y.jsx)(S.VUG,{})}),(0,Y.jsx)("span",{className:"cursor-pointer hover:text-red-500",onClick:()=>{n(y(t)),n(x(!0))},children:(0,Y.jsx)(S.yRo,{})})]})},ie=e=>{let{row:t}=e;const{textTheme:a}=(0,b.A)();return(0,Y.jsx)("div",{className:"items-center",children:(0,Y.jsx)(_.N_,{className:`hover:${a} font-semibold`,children:null===t||void 0===t?void 0:t.enq_number})})},de=()=>{const e=(0,f.wA)(),t=(0,f.d4)(e=>e.quotation.data.enquiryList),a=(0,f.d4)(e=>e.quotation.data.loading),r=[{header:"enq. number",accessorKey:"enq_number",cell:e=>{const t=e.row.original;return(0,Y.jsx)(ie,{row:t})}},{header:"customer",accessorKey:"",cell:e=>{var t;const a=e.row.original;return(0,Y.jsx)("div",{children:null===a||void 0===a||null===(t=a.Customer)||void 0===t?void 0:t.name})}},{header:"type",accessorKey:"enquiry_type",cell:e=>{var t,a,n;const r=e.row.original;return(0,Y.jsx)("div",{className:"mr-2",children:(0,Y.jsx)(N.vw,{className:`${null===(t=se[null===r||void 0===r?void 0:r.enquiry_type])||void 0===t?void 0:t.bgClass} ${null===(a=se[null===r||void 0===r?void 0:r.enquiry_type])||void 0===a?void 0:a.textClass} border-0`,children:null===(n=se[null===r||void 0===r?void 0:r.enquiry_type])||void 0===n?void 0:n.label})})}},{header:"Person of contact name",accessorKey:"poc_name"},{header:"enquiry date",accessorKey:"enquiry_date",cell:e=>{const t=e.row.original;return(0,Y.jsx)("div",{className:"font-semibold",children:null===t||void 0===t?void 0:t.enquiry_date})}},{header:"action",accessorKey:"action",id:"t",cell:e=>{const t=e.row.original;return(0,Y.jsx)(le,{row:t})}}],{pageIndex:o,pageSize:s,query:l,total:d}=(0,f.d4)(e=>e.quotation.data.tableData),c=(0,n.useCallback)(()=>{e(i({pageIndex:o,pageSize:s,query:l}))},[o,s,l,e]);(0,n.useEffect)(()=>{c()},[c,o,s]);const m=(0,n.useMemo)(()=>({pageIndex:o,pageSize:s,query:l,total:d}),[o,s,l,d]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(D.A,{columns:r,data:t,loading:a,pagingData:{pageIndex:o,pageSize:s,query:l,total:d},onPaginationChange:t=>{const a=C()(m);a.pageIndex=t,e(u(a))},onSelectChange:t=>{const a=C()(m);a.pageSize=Number(t),a.pageIndex=1,e(u(a))}}),(0,Y.jsx)(ne,{}),(0,Y.jsx)(oe,{})]})},ce=()=>{const e=(0,f.wA)();(0,n.useRef)(),(0,f.d4)(e=>e.quotation.data.tableData);return(0,Y.jsx)("div",{className:"md:flex items-center justify-end gap-2 mb-4",children:(0,Y.jsx)(N.$n,{size:"sm",variant:"solid",color:"purple-600",onClick:()=>{e(g(!0))},children:"Create Quotation"})})};(0,r.Mh)("quotation",j);const ue=()=>(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(N.Zp,{className:"bg-purple-50",children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between","mb-3":!0,children:[(0,Y.jsx)("h3",{children:"Quotation List"}),(0,Y.jsx)(ce,{})]}),(0,Y.jsx)(de,{})]})})},98257:e=>{e.exports="object"===typeof self?self.FormData:window.FormData},99149:(e,t,a)=>{a.d(t,{Hx:()=>u,PD:()=>r,RU:()=>p,Sy:()=>o,dD:()=>i,ik:()=>s,j4:()=>d,jD:()=>l,qT:()=>c,th:()=>m});var n=a(43971);async function r(e){return n.A.fetchData({url:"v1/web/company/product/code/check",method:"post",data:e})}async function o(e){return n.A.fetchData({url:"v1/web/company/product",method:"post",data:e})}async function s(e){return n.A.fetchData({url:"v1/web/company/product/register",method:"post",data:e})}async function l(e){return n.A.fetchData({url:"v1/web/company/product/update/id",method:"put",data:e})}async function i(e){return n.A.fetchData({url:"v1/web/company/product/delete/id",method:"delete",data:e})}async function d(e){return n.A.fetchData({url:"v1/web/company/product/details/id",method:"post",data:e})}async function c(e){return n.A.fetchData({url:"v1/web/company/product/drawing/select",method:"get"})}async function u(e){return n.A.fetchData({url:"v1/web/company/product/category/id",method:"post",data:e})}async function m(){return n.A.fetchData({url:"v1/web/company/product/itemCode/option",method:"get"})}async function p(e){return n.A.fetchData({url:"v1/web/company/product/option",method:"post",data:e})}}}]);
//# sourceMappingURL=7608.87327370.chunk.js.map