(self.webpackChunkBrother_Industrises=self.webpackChunkBrother_Industrises||[]).push([[710],{4757:(e,t,a)=>{var o=a(56552);e.exports=function(){return o.Date.now()}},10143:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},40710:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>$});var o=a(65043),n=a(27176),s=a(79456),r=a(24603),l=a(50805),i=a(80907),d=a(43971);var c=a(90642);const u=(0,i.zD)("customer/dashboard/data/dynamic",async e=>{try{const t=await async function(e){return d.A.fetchData({url:"v1/web/company/customer/dashboard/dynamic",method:"post",data:e})}(e);return t}catch(t){return null===t||void 0===t?void 0:t.response}}),m=(0,i.zD)("customer/dashboard/data/option/customer",async e=>{try{return await(0,c.Wm)()}catch(t){return null===t||void 0===t?void 0:t.response}}),h=(0,i.zD)("customer/dashboard/data/option/years",async e=>{try{return await async function(){return d.A.fetchData({url:"v1/web/company/customer/dashboard/years",method:"get"})}()}catch(t){return null===t||void 0===t?void 0:t.response}}),p=(0,i.zD)("customer/dashboard/data/month",async e=>{try{const t=await async function(e){return d.A.fetchData({url:"v1/web/company/customer/dashboard/month",method:"post",data:e})}(e);return t}catch(t){return null===t||void 0===t?void 0:t.response}}),g=(0,i.zD)("customer/dashboard/data/yearly",async e=>{try{const t=await async function(e){return d.A.fetchData({url:"v1/web/company/customer/dashboard/yearly",method:"post",data:e})}(e);return t}catch(t){return null===t||void 0===t?void 0:t.response}}),v=(0,i.Z0)({name:"customer/dashboard/data",initialState:{loading:!1,customers:[],years:[],customerData:[],monthlySales:{},yearlySales:{},tableData:{total:0,pageIndex:1,pageSize:10,customer_id:"",year:"",month:""},filterData:{type:""}},reducers:{setTableData:(e,t)=>{e.tableData=t.payload},setFilterData:(e,t)=>{e.filterData=t.payload}},extraReducers:{[u.fulfilled]:(e,t)=>{var a,o,n;e.customerData=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[],e.tableData.total=(null===(o=t.payload)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.total)||1,e.loading=!1},[u.pending]:e=>{e.loading=!0},[m.fulfilled]:(e,t)=>{var a;e.customers=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[]},[h.fulfilled]:(e,t)=>{var a;e.years=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||[]},[p.fulfilled]:(e,t)=>{var a;e.monthlySales=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||{}},[g.fulfilled]:(e,t)=>{var a;e.yearlySales=(null===(a=t.payload.data)||void 0===a?void 0:a.data)||{}}}}),{setTableData:f,setFilterData:y}=v.actions,x=v.reducer,b=(0,l.HY)({data:x});var S=a(49934),j=a(23533),w=(a(60446),a(56434)),z=a.n(w),A=a(88705),C=a(70579);const D=e=>{let{row:t}=e;const{textTheme:a}=(0,j.A)();return(0,C.jsx)("div",{className:"items-center uppercase",children:t.name})},N=[{header:"Name",accessorKey:"name",cell:e=>{const t=e.row.original;return(0,C.jsx)(D,{row:t})}},{header:"Sales",cell:e=>{const t=e.row.original;return(0,C.jsx)("span",{className:"uppercase",children:"\u20b9 "+(null===t||void 0===t?void 0:t.GRANDTOTAL)})}}],k=()=>{const e=(0,s.wA)(),t=(0,s.d4)(e=>e.customer_dashboard.data.customerData),a=(0,s.d4)(e=>e.customer_dashboard.data.loading),{type:n}=(0,s.d4)(e=>e.customer_dashboard.data.filterData),{pageIndex:r,pageSize:l,sort:i,query:d,total:c}=(0,s.d4)(e=>e.customer_dashboard.data.tableData),p=(0,o.useCallback)(()=>{e(u({pageIndex:r,pageSize:l})),e(m()),e(h())},[r,l,e]);(0,o.useEffect)(()=>{p()},[p,r,l]);const g=(0,o.useMemo)(()=>({pageIndex:r,pageSize:l}),[r,l,c]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(A.A,{columns:N,data:t,loading:a,pagingData:{pageIndex:r,pageSize:l,query:d,total:c},onPaginationChange:t=>{const a=z()(g);a.pageIndex=t,e(f(a))},onSelectChange:t=>{const a=z()(g);a.pageSize=Number(t),a.pageIndex=1,e(f(a))}})})};var I=a(93950),T=a.n(I),M=a(93751);const R=[{label:"JAN",value:1},{label:"FEB",value:2},{label:"MAR",value:3},{label:"APR",value:4},{label:"MAY",value:5},{label:"JUN",value:6},{label:"JUL",value:7},{label:"AUG",value:8},{label:"SEP",value:9},{label:"OCT",value:10},{label:"NOV",value:11},{label:"DEC",value:12}],_=e=>{let{DeliveryStatus:t}=e;const[a,n]=(0,o.useState)(!1),[r,l]=(0,o.useState)([]),[i,d]=(0,o.useState)([]),[c,m]=(0,o.useState)([]),h=(0,s.wA)(),p=(0,s.d4)(e=>e.customer_dashboard.data.tableData),g=(0,s.d4)(e=>e.customer_dashboard.data.customers),v=(0,s.d4)(e=>e.customer_dashboard.data.years),{customer_id:y,year:x,month:b}=(0,s.d4)(e=>e.customer_dashboard.data.tableData),j=T()((e,t)=>function(e,t){const a=z()(p);if("customer"===t){l(e);let t=e.map(e=>e.value);a.customer_id=JSON.stringify(t)}else if("year"===t){d(e);let t=e.map(e=>e.value);a.year=JSON.stringify(t)}else if("month"===t){m(e);let t=e.map(e=>e.value);a.month=JSON.stringify(t)}a.pageIndex=1,w(a)}(e,t),50);const w=e=>{h(f(e)),h(u({...e}))},A=(e,t)=>{("customer"===t||"year"===t||"month"===t)&&j(e,t)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4",children:[(0,C.jsx)("div",{}),(0,C.jsxs)("div",{className:"flex gap-4",children:[(0,C.jsx)(S.$n,{size:"sm",icon:(0,C.jsx)(M.syA,{}),onClick:()=>n(()=>!a),children:"Filter"}),(0,C.jsx)(S.$n,{size:"sm",onClick:()=>{const e=z()(p);e.customer_id="",e.year="",e.month="",w(e)},children:"Clear All"})]})]}),a&&(0,C.jsx)(S.Zp,{className:"mb-4",children:(0,C.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[(0,C.jsx)(S.l6,{isMulti:!0,placeholder:"Select customer",size:"sm",options:g,value:r,onChange:e=>A(e,"customer")}),(0,C.jsx)(S.l6,{isMulti:!0,placeholder:"Select Year",size:"sm",options:v,value:i,onChange:e=>A(e,"year")}),(0,C.jsx)(S.l6,{isMulti:!0,placeholder:"Select Months",size:"sm",options:R,value:c,onChange:e=>A(e,"month")})]})})]})};var F=a(22019);a(86746);const P=()=>{const[e,t]=(0,o.useState)(null),[a,n]=(0,o.useState)(null),r=(0,s.wA)(),l=(0,s.d4)(e=>e.customer_dashboard.data.monthlySales),i=(0,s.d4)(e=>e.customer_dashboard.data.customers),d=[{name:"Net Sales \u20b9 ",data:l.revenue||[]}];(0,o.useEffect)(()=>{c()},[e]);const c=async()=>{r(p({customer_id:e}))};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"grid grid-cols-3 mb-4",children:[(0,C.jsx)(S.l6,{placeholder:"Select customer",size:"sm",options:i,value:i.filter(t=>t.value===e),onChange:e=>{t(e.value),n(e.label)}}),(0,C.jsx)("div",{})]}),(0,C.jsx)(F.A,{options:{dataLabels:{offsetY:-25,style:{fontSize:"12px"}},chart:{stacked:!0,toolbar:{show:!0,tools:{download:!1,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0}},colors:["#f28500"],responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,endingShape:"round",borderRadius:8}},xaxis:{categories:l.months||[]},legend:{position:"right",offsetY:40},fill:{opacity:1},title:{text:(e?`${a}`:"All Customers")+" Monthly Sales",align:"center",style:{fontSize:"20px",fontWeight:"normal",color:"#263238"}}},series:d,type:"bar",height:300})]})},Y=()=>{const[e,t]=(0,o.useState)(null),[a,n]=(0,o.useState)(null),r=(0,s.wA)();console.log("customer",e);const l=(0,s.d4)(e=>e.customer_dashboard.data.yearlySales),i=(0,s.d4)(e=>e.customer_dashboard.data.customers),d=[{name:"Net Sales \u20b9 ",data:l.revenue||[]}];(0,o.useEffect)(()=>{c()},[e]);const c=async()=>{r(g({customer_id:e}))};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"grid grid-cols-3 mb-4",children:[(0,C.jsx)(S.l6,{placeholder:"Select customer",size:"sm",options:i,value:i.filter(t=>t.value===e),onChange:e=>{t(e.value),n(e.label)}}),(0,C.jsx)("div",{})]}),(0,C.jsx)(F.A,{options:{dataLabels:{offsetY:-25,style:{fontSize:"12px"}},chart:{stacked:!0,toolbar:{show:!0,tools:{download:!1,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0}},colors:["#DA70D6"],responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,endingShape:"round",borderRadius:8}},xaxis:{categories:l.years||[]},legend:{position:"right",offsetY:40},fill:{opacity:1},title:{text:(e?`${a}`:"All Customers")+" Yearly Sales",align:"center",style:{fontSize:"20px",fontWeight:"normal",color:"#263238"}}},series:d,type:"bar",height:300})]})},B=()=>{const[e,t]=(0,o.useState)(null),[a,n]=(0,o.useState)(null),s={revenue:[5e3,7e3,4500,8e3,6500,9e3,1e4],days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},r=[{label:"Customer A",value:"1"},{label:"Customer B",value:"2"},{label:"Customer C",value:"3"}],l=[{name:"Net Sales \u20b9",data:{1:[4e3,6e3,4500,7e3,6500,8e3,9500],2:[5e3,7e3,4800,7500,6200,8500,9900],3:[5500,7500,5e3,8e3,6700,8900,10200]}[e]||s.revenue}];return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"grid grid-cols-3 mb-4",children:[(0,C.jsx)(S.l6,{placeholder:"Select customer",size:"sm",options:r,value:r.filter(t=>t.value===e),onChange:e=>{t(e.value),n(e.label)}}),(0,C.jsx)("div",{})]}),(0,C.jsx)(F.A,{options:{dataLabels:{offsetY:-25,style:{fontSize:"12px"}},chart:{stacked:!0,toolbar:{show:!0,tools:{download:!1,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0}},colors:["#FFA07A"],responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,endingShape:"round",borderRadius:8}},xaxis:{categories:s.days},legend:{position:"right",offsetY:40},fill:{opacity:1},title:{text:(e?`${a}`:"All Customers")+" Weekly Sales",align:"center",style:{fontSize:"20px",fontWeight:"normal",color:"#263238"}}},series:l,type:"bar",height:300})]})};(0,r.Mh)("customer_dashboard",b);const $=()=>{(0,s.wA)();return(0,C.jsxs)(n.Rh,{loading:!1,children:[(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,C.jsx)(S.Zp,{children:(0,C.jsx)(Y,{})}),(0,C.jsx)(S.Zp,{children:(0,C.jsx)(P,{})})]}),(0,C.jsx)(S.Zp,{children:(0,C.jsx)(B,{})}),(0,C.jsxs)(S.Zp,{children:[(0,C.jsx)(_,{}),(0,C.jsx)(k,{})]})]})}},40801:(e,t,a)=>{var o=a(61141),n=a(46686),s=a(19841),r=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,i=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=o(e);var a=l.test(e);return a||i.test(e)?d(e.slice(2),a?2:8):r.test(e)?NaN:+e}},61141:(e,t,a)=>{var o=a(10143),n=/^\s+/;e.exports=function(e){return e?e.slice(0,o(e)+1).replace(n,""):e}},88705:(e,t,a)=>{"use strict";a.d(t,{A:()=>w});var o=a(65043),n=a(98139),s=a.n(n),r=a(49934),l=a(70579);const{Tr:i,Td:d,TBody:c}=r.XI,u=e=>{const{columns:t,rows:a,avatarInColumns:o,avatarProps:n}=e;return(0,l.jsx)(c,{children:Array.from(new Array(a),(e,t)=>t+0).map(e=>(0,l.jsx)(i,{children:Array.from(new Array(t),(e,t)=>t+0).map(e=>(0,l.jsx)(d,{children:(0,l.jsxs)("div",{className:"flex flex-auto items-center gap-2",children:[o.includes(e)&&(0,l.jsx)("div",{children:(0,l.jsx)(r.EA,{variant:"circle",...n})}),(0,l.jsx)(r.EA,{})]})},`col-${e}`))},`row-${e}`))})};u.defaultProps={columns:1,rows:10,avatarInColumns:[]};const m=u;var h=a(6023),p=a(58931),g=a(47111);const{Tr:v,Th:f,Td:y,THead:x,TBody:b}=r.XI,S=e=>{const{indeterminate:t,onChange:a,onCheckBoxChange:n,onIndeterminateCheckBoxChange:s,...i}=e,d=(0,o.useRef)(null);(0,o.useEffect)(()=>{"boolean"===typeof t&&(d.current.indeterminate=!i.checked&&t)},[d,t]);return(0,l.jsx)(r.Sc,{className:"mb-0",ref:d,onChange:(e,t)=>(e=>{a(e),null===n||void 0===n||n(e),null===s||void 0===s||s(e)})(t),...i})},j=(0,o.forwardRef)((e,t)=>{const{skeletonAvatarColumns:a,columns:n,data:i,loading:d,onCheckBoxChange:c,onIndeterminateCheckBoxChange:u,onPaginationChange:j,onSelectChange:w,onSort:z,pageSizes:A,selectable:C,skeletonAvatarProps:D,pagingData:N,tableWidth:k="100%"}=e,{pageSize:I,pageIndex:T,total:M}=N,[R,_]=(0,o.useState)(null),F=(0,o.useMemo)(()=>A.map(e=>({value:e,label:`${e} / page`})),[A]);(0,o.useEffect)(()=>{if(Array.isArray(R)){const e=R.length>0?R[0].desc?"desc":"asc":"",t=R.length>0?R[0].id:"";null===z||void 0===z||z({order:e,key:t})}},[R]);const P=n.some(e=>e.Header||e.accessor||e.Cell),Y=(0,o.useMemo)(()=>{const e=n.map(e=>({...e,size:e.size||void 0,minSize:e.minSize||100,maxSize:e.maxSize||300}));return C?[{id:"select",header:e=>{let{table:t}=e;return(0,l.jsx)(S,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:e=>{var a,o;a=e.target.checked,o=t.getRowModel().rows,d||null===u||void 0===u||u(a,o)}})},cell:e=>{let{row:t}=e;return(0,l.jsx)(S,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler(),onCheckBoxChange:e=>((e,t)=>{d||null===c||void 0===c||c(e,t)})(e.target.checked,t.original)})},size:50,minSize:50,maxSize:50},...e]:e},[n,C]),B=(0,p.N4)({data:i,columns:P?[]:Y,getCoreRowModel:(0,g.HT)(),getFilteredRowModel:(0,g.hM)(),getPaginationRowModel:(0,g.kW)(),getSortedRowModel:(0,g.h5)(),manualPagination:!0,manualSorting:!0,onSortingChange:_,state:{sorting:R},columnResizeMode:"onChange"}),$=()=>{B.resetSorting()},E=()=>{B.toggleAllRowsSelected(!1)};if((0,o.useImperativeHandle)(t,()=>({resetSorting:$,resetSelected:E})),P){const e="You are using old react-table v7 column config, please use v8 column config instead, refer to our demo or https://tanstack.com/table/v8";return(0,l.jsx)(r.Fc,{children:e})}return(0,l.jsxs)(h.A,{loading:d&&0!==i.length,type:"cover",children:[(0,l.jsx)("div",{style:{width:k,overflowX:"auto"},children:(0,l.jsxs)(r.XI,{style:{width:"100%",tableLayout:"fixed"},children:[(0,l.jsx)(x,{children:B.getHeaderGroups().map(e=>(0,l.jsx)(v,{children:e.headers.map(e=>(0,l.jsx)(f,{colSpan:e.colSpan,style:{width:`${e.column.getSize()}px`},children:e.isPlaceholder?null:(0,l.jsx)("div",{className:s()(d&&"pointer-events-none"),children:(0,p.Kv)(e.column.columnDef.header,e.getContext())})},e.id))},e.id))}),d&&0===i.length?(0,l.jsx)(m,{columns:Y.length,rows:N.pageSize,avatarInColumns:a,avatarProps:D}):(0,l.jsx)(b,{children:B.getRowModel().rows.slice(0,I).map(e=>(0,l.jsx)(v,{children:e.getVisibleCells().map(e=>(0,l.jsx)(y,{style:{width:`${e.column.getSize()}px`},children:(0,p.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,l.jsx)(r.dK,{pageSize:I,currentPage:T,total:M,onChange:e=>{d||null===j||void 0===j||j(e)}}),(0,l.jsx)("div",{style:{minWidth:130},children:(0,l.jsx)(r.l6,{size:"sm",menuPlacement:"top",isSearchable:!1,value:F.filter(e=>e.value===I),options:F,onChange:e=>{return t=e.value,void(d||null===w||void 0===w||w(Number(t)));var t}})})]})]})});j.defaultProps={pageSizes:[10,25,50,100],pagingData:{total:0,pageIndex:1,pageSize:10},data:[],columns:[],selectable:!1,loading:!1};const w=j},90642:(e,t,a)=>{"use strict";a.d(t,{Ai:()=>i,Kz:()=>d,Wm:()=>u,ZS:()=>r,aQ:()=>m,eB:()=>l,jz:()=>n,k7:()=>s,lC:()=>c});var o=a(43971);async function n(){return o.A.fetchData({url:"v1/web/company/customer/statistic",method:"get"})}async function s(e){return o.A.fetchData({url:"v1/web/company/customer/update",method:"put",data:e})}async function r(e){return o.A.fetchData({url:"v1/web/company/customer/select",method:"get"})}async function l(e){return o.A.fetchData({url:"v1/web/company/customer/register",method:"post",data:e})}async function i(e){return o.A.fetchData({url:"v1/web/company/customer/update/id",method:"put",data:e})}async function d(e){return o.A.fetchData({url:"v1/web/company/customer",method:"post",data:e})}async function c(e){return o.A.fetchData({url:"v1/web/company/customer/details/id",method:"post",data:e})}async function u(){return o.A.fetchData({url:"v1/web/company/customer/option",method:"get"})}async function m(e){return o.A.fetchData({url:"v1/web/company/customer/delete/id",method:"delete",data:e})}},93950:(e,t,a)=>{var o=a(46686),n=a(4757),s=a(40801),r=Math.max,l=Math.min;e.exports=function(e,t,a){var i,d,c,u,m,h,p=0,g=!1,v=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var a=i,o=d;return i=d=void 0,p=t,u=e.apply(o,a)}function x(e){var a=e-h;return void 0===h||a>=t||a<0||v&&e-p>=c}function b(){var e=n();if(x(e))return S(e);m=setTimeout(b,function(e){var a=t-(e-h);return v?l(a,c-(e-p)):a}(e))}function S(e){return m=void 0,f&&i?y(e):(i=d=void 0,u)}function j(){var e=n(),a=x(e);if(i=arguments,d=this,h=e,a){if(void 0===m)return function(e){return p=e,m=setTimeout(b,t),g?y(e):u}(h);if(v)return clearTimeout(m),m=setTimeout(b,t),y(h)}return void 0===m&&(m=setTimeout(b,t)),u}return t=s(t)||0,o(a)&&(g=!!a.leading,c=(v="maxWait"in a)?r(s(a.maxWait)||0,t):c,f="trailing"in a?!!a.trailing:f),j.cancel=function(){void 0!==m&&clearTimeout(m),p=0,i=h=d=m=void 0},j.flush=function(){return void 0===m?u:S(n())},j}}}]);
//# sourceMappingURL=710.231ce9e2.chunk.js.map